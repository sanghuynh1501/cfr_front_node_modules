{"ast":null,"code":"import _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/dashboard/conferenceDetail/index.jsx\";\n\nimport React from 'react';\nimport { withRouter } from 'react-router';\nimport { withTranslation } from 'react-i18next';\nimport client, { Q_CONFERENCE_DETAIL, Q_USERS, M_DELETE_CONFERENCE } from '@graphql';\nimport { returnError, newNotification } from '@utils';\nimport InfoConference from './ConferenceDetail';\nimport FormEditConference from './EditConference';\n\nvar ConferenceDetail = withRouter(_class = (_temp = /*#__PURE__*/function (_React$Component) {\n  _inherits(ConferenceDetail, _React$Component);\n\n  var _super = _createSuper(ConferenceDetail);\n\n  function ConferenceDetail(props) {\n    var _this;\n\n    _classCallCheck(this, ConferenceDetail);\n\n    _this = _super.call(this, props);\n\n    _this._queryConferenceDetail = function (conferenceId) {\n      client.query({\n        query: Q_CONFERENCE_DETAIL,\n        variables: {\n          conferenceId: conferenceId\n        },\n        fetchPolicy: 'network-only'\n      }).then(function (_ref) {\n        var conference = _ref.data.conference;\n\n        if (conference) {\n          return _this.setState({\n            conference: conference\n          });\n        }\n\n        _this.props.history.push('/');\n\n        return returnError('Get conference detail', {\n          error: '',\n          errorMessage: _this.props.i18n.t('notification.queryConferenceDetailError')\n        }, {\n          container: 'top-right'\n        });\n      }).catch(function (error) {\n        _this.props.history.push('/');\n\n        returnError('Get conference detail', {\n          error: error,\n          errorMessage: _this.props.i18n.t('notification.queryConferenceDetailError')\n        }, {\n          container: 'top-right'\n        });\n      });\n    };\n\n    _this._queryUsers = function () {\n      client.query({\n        query: Q_USERS,\n        fetchPolicy: 'network-only'\n      }).then(function (_ref2) {\n        var users = _ref2.data.users;\n\n        _this.setState({\n          users: users\n        });\n      }).catch(function (error) {\n        return returnError('Get User', {\n          error: error,\n          errorMessage: _this.props.i18n.t('notification.queryUserError')\n        }, {\n          container: 'top-right'\n        });\n      });\n    };\n\n    _this._handleDeleteItem = function () {\n      client.mutate({\n        mutation: M_DELETE_CONFERENCE,\n        variables: {\n          conferenceId: _this.state.conference._id\n        }\n      }).then(function (_ref3) {\n        var deleteConference = _ref3.data.deleteConference;\n\n        if (deleteConference) {\n          _this.props.history.push('/');\n\n          return newNotification(_this.props.i18n.t('notification.deleteMeetingSuccess'), 'success');\n        }\n      }).catch(function (error) {\n        return returnError('Delete Conference', {\n          error: error,\n          errorMessage: _this.props.i18n.t('notification.deleteMeetingError')\n        }, {\n          container: 'top-right'\n        });\n      });\n    };\n\n    _this._handleJoinConference = function (e) {\n      window.open(\"\".concat(window.location.origin, \"/cfr/conference/\").concat(e));\n    };\n\n    _this._onEditFunction = function () {\n      return _this.setState({\n        editConference: true\n      });\n    };\n\n    _this._closeEditFunction = function () {\n      return _this.setState({\n        editConference: false\n      });\n    };\n\n    _this.state = {\n      conference: {},\n      users: [],\n      editConference: false\n    };\n    return _this;\n  }\n\n  _createClass(ConferenceDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._queryConferenceDetail(this.props.match.params.ID);\n\n      this._queryUsers();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var myInfo = this.props.myInfo,\n          conference = this.state.conference;\n      return conference ? this.state.editConference ? /*#__PURE__*/React.createElement(FormEditConference, {\n        closeEditFunction: this._closeEditFunction,\n        refetch: this._queryConferenceDetail,\n        conference: this.state.conference,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }\n      }) : /*#__PURE__*/React.createElement(InfoConference, {\n        _queryConferenceDetail: this._queryConferenceDetail,\n        myInfo: myInfo,\n        users: this.state.users,\n        conference: this.state.conference,\n        onEditFunction: this._onEditFunction,\n        history: this.props.history,\n        handleJoinConference: this._handleJoinConference,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }\n      }) : /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }\n      });\n    }\n  }]);\n\n  return ConferenceDetail;\n}(React.Component), _temp)) || _class;\n\nexport default withTranslation()(ConferenceDetail);","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/dashboard/conferenceDetail/index.jsx"],"names":["React","withRouter","withTranslation","client","Q_CONFERENCE_DETAIL","Q_USERS","M_DELETE_CONFERENCE","returnError","newNotification","InfoConference","FormEditConference","ConferenceDetail","props","_queryConferenceDetail","conferenceId","query","variables","fetchPolicy","then","conference","data","setState","history","push","error","errorMessage","i18n","t","container","catch","_queryUsers","users","_handleDeleteItem","mutate","mutation","state","_id","deleteConference","_handleJoinConference","e","window","open","location","origin","_onEditFunction","editConference","_closeEditFunction","match","params","ID","myInfo","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { withRouter } from 'react-router'\nimport { withTranslation } from 'react-i18next'\n\nimport client, { Q_CONFERENCE_DETAIL, Q_USERS, M_DELETE_CONFERENCE } from '@graphql'\nimport { returnError, newNotification } from '@utils'\nimport InfoConference from './ConferenceDetail'\nimport FormEditConference from './EditConference'\n\n@withRouter\nclass ConferenceDetail extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      conference: {},\n      users: [],\n      editConference: false\n    }\n  }\n\n  componentDidMount() {\n    this._queryConferenceDetail(this.props.match.params.ID)\n    this._queryUsers()\n  }\n\n  _queryConferenceDetail = conferenceId => {\n    client\n      .query({\n        query: Q_CONFERENCE_DETAIL,\n        variables: {\n          conferenceId\n        },\n        fetchPolicy: 'network-only'\n      })\n      .then(({ data: { conference } }) => {\n        if (conference) {\n          return this.setState({ conference })\n        }\n        this.props.history.push('/')\n        return returnError(\n          'Get conference detail',\n          {\n            error: '',\n            errorMessage: this.props.i18n.t('notification.queryConferenceDetailError')\n          },\n          { container: 'top-right' }\n        )\n      })\n      .catch(error => {\n        this.props.history.push('/')\n        returnError(\n          'Get conference detail',\n          {\n            error,\n            errorMessage: this.props.i18n.t('notification.queryConferenceDetailError')\n          },\n          { container: 'top-right' }\n        )\n      })\n  }\n\n  // TODO: filter backend không get hết users\n  _queryUsers = () => {\n    client\n      .query({\n        query: Q_USERS,\n        fetchPolicy: 'network-only'\n      })\n      .then(({ data: { users } }) => {\n        this.setState({ users })\n      })\n      .catch(error =>\n        returnError(\n          'Get User',\n          {\n            error,\n            errorMessage: this.props.i18n.t('notification.queryUserError')\n          },\n          { container: 'top-right' }\n        )\n      )\n  }\n\n  _handleDeleteItem = () => {\n    client\n      .mutate({\n        mutation: M_DELETE_CONFERENCE,\n        variables: { conferenceId: this.state.conference._id }\n      })\n      .then(({ data: { deleteConference } }) => {\n        if (deleteConference) {\n          this.props.history.push('/')\n          return newNotification(this.props.i18n.t('notification.deleteMeetingSuccess'), 'success')\n        }\n      })\n      .catch(error =>\n        returnError(\n          'Delete Conference',\n          {\n            error,\n            errorMessage: this.props.i18n.t('notification.deleteMeetingError')\n          },\n          { container: 'top-right' }\n        )\n      )\n  }\n\n  _handleJoinConference = e => {\n    window.open(`${window.location.origin}/cfr/conference/${e}`)\n  }\n\n  _onEditFunction = () => this.setState({ editConference: true })\n  _closeEditFunction = () => this.setState({ editConference: false })\n\n  render() {\n    const {\n      props: { myInfo },\n      state: { conference }\n    } = this\n\n    return conference ? (\n      this.state.editConference ? (\n        <FormEditConference\n          closeEditFunction={this._closeEditFunction}\n          refetch={this._queryConferenceDetail}\n          conference={this.state.conference}\n        />\n      ) : (\n          <InfoConference\n            _queryConferenceDetail={this._queryConferenceDetail}\n            myInfo={myInfo}\n            users={this.state.users}\n            conference={this.state.conference}\n            onEditFunction={this._onEditFunction}\n            history={this.props.history}\n            handleJoinConference={this._handleJoinConference}\n          />\n        )\n    ) : (\n        <React.Fragment />\n      )\n  }\n}\n\nexport default withTranslation()(ConferenceDetail)\n"]},"metadata":{},"sourceType":"module"}