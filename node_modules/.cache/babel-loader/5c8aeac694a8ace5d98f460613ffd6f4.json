{"ast":null,"code":"import \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/popover/style\";\nimport _Popover from \"antd/es/popover\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _toConsumableArray from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/dashboard/users/ListUsers.jsx\";\n\nimport React, { Component } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { inject, observer } from 'mobx-react';\nimport { withRouter } from 'react-router';\nimport moment from 'moment';\nimport { client, Q_ROLES, Q_NODES_BASIC } from '@graphql';\nimport { returnError, isSupperAdmin, hasPermission, parseError } from '@utils';\nimport ModalDelete from '../components/ModalDelete';\nimport SelectColumnForm from './SelectColumnForm';\nimport { PER, ROLE_TYPE } from '@constants';\nvar ListUser = (_dec = inject(function (_ref) {\n  var stores = _ref.stores;\n  return stores;\n}), withRouter(_class = _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(ListUser, _Component);\n\n  var _super = _createSuper(ListUser);\n\n  function ListUser(props) {\n    var _this;\n\n    _classCallCheck(this, ListUser);\n\n    _this = _super.call(this, props);\n\n    _this.queryNodesBasic = function () {\n      client.query({\n        query: Q_NODES_BASIC,\n        fetchPolicy: 'network-only',\n        variables: {\n          inputSearch: {\n            view: 'ALL'\n          }\n        }\n      }).then(function (_ref2) {\n        var nodes = _ref2.data.nodes;\n\n        if (!nodes) {\n          throw new Error();\n        }\n\n        _this.setState({\n          nodes: nodes\n        });\n      }).catch(function (error) {\n        return returnError('users', {\n          error: error,\n          errorMessage: _this.props.i18n.t(parseError(error))\n        }, {\n          container: 'top-right'\n        });\n      });\n    };\n\n    _this.queryRolesApp = function () {\n      client.query({\n        query: Q_ROLES,\n        fetchPolicy: 'network-only',\n        variables: {\n          type: ROLE_TYPE.ROLE_APP\n        }\n      }).then(function (_ref3) {\n        var roles = _ref3.data.roles;\n\n        if (!roles) {\n          throw new Error('notification.queryRoleError');\n        }\n\n        _this.setState({\n          roles: roles\n        });\n      }).catch(function (error) {\n        return returnError('users', {\n          error: error,\n          errorMessage: _this.props.i18n.t(parseError(error))\n        }, {\n          container: 'top-right'\n        });\n      });\n    };\n\n    _this.handleSelectNode = function (value) {\n      _this.props.setInputSearch(_objectSpread({}, _this.props.inputSearch, {\n        nodeId: value\n      }));\n    };\n\n    _this.handleSelectRole = function (value) {\n      _this.props.setInputSearch(_objectSpread({}, _this.props.inputSearch, {\n        roleCode: value\n      }));\n    };\n\n    _this.handleOnChangeTextSearch = function (_ref4) {\n      var value = _ref4.target.value;\n\n      _this.props.setInputSearch(_objectSpread({}, _this.props.inputSearch, {\n        textSearch: value\n      }));\n    };\n\n    _this.handleSearch = function () {\n      _this.props.queryUsersVerified(_this.props.inputSearch);\n    };\n\n    _this.handleVisiblePopoverChange = function (visiblePopover) {\n      _this.setState({\n        visiblePopover: visiblePopover\n      });\n    };\n\n    _this.handleSelectColumn = function (columnsToShow) {\n      _this.setState({\n        columnsToShow: columnsToShow\n      });\n    };\n\n    _this.handleShowAnvancedSearch = function () {\n      _this.setState(function (preState) {\n        if (!preState.expandAdvancedSearch) return {\n          expandInput: true\n        };else {\n          return {\n            expandInput: false\n          };\n        }\n      });\n\n      _this.setState(function (preState) {\n        return {\n          expandAdvancedSearch: !preState.expandAdvancedSearch\n        };\n      });\n    };\n\n    _this.state = {\n      columnsToShow: ['name', 'username', 'email', 'role'],\n      visiblePopover: false,\n      roles: [],\n      expandInput: false,\n      expandAdvancedSearch: false,\n      nodes: []\n    };\n    return _this;\n  }\n\n  _createClass(ListUser, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.queryRolesApp();\n      this.queryNodesBasic();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          users = _this$props.users,\n          handleSelectUser = _this$props.handleSelectUser,\n          mutationDeleteUsers = _this$props.mutationDeleteUsers,\n          i18n = _this$props.i18n,\n          myInfo = _this$props.globalState.myInfo,\n          history = _this$props.history;\n      var _this$state = this.state,\n          nodes = _this$state.nodes,\n          columnsToShow = _this$state.columnsToShow,\n          visiblePopover = _this$state.visiblePopover,\n          roles = _this$state.roles,\n          expandInput = _this$state.expandInput,\n          expandAdvancedSearch = _this$state.expandAdvancedSearch;\n      var profiles = myInfo === null || myInfo === void 0 ? void 0 : myInfo.profiles;\n      var isAllowDeleteUser = isSupperAdmin(profiles) || hasPermission(profiles, PER.P_USER_DELETE);\n      var isAllowAddUser = isSupperAdmin(profiles) || hasPermission(profiles, PER.P_USER_CREATE);\n      var rowData = users.map(function (user) {\n        var _user$profiles, _user$profiles$find;\n\n        var role = user === null || user === void 0 ? void 0 : (_user$profiles = user.profiles) === null || _user$profiles === void 0 ? void 0 : (_user$profiles$find = _user$profiles.find(function (profile) {\n          var _profile$role;\n\n          return (profile === null || profile === void 0 ? void 0 : (_profile$role = profile.role) === null || _profile$role === void 0 ? void 0 : _profile$role.type) === ROLE_TYPE.ROLE_APP;\n        })) === null || _user$profiles$find === void 0 ? void 0 : _user$profiles$find.role;\n        return _objectSpread({}, user, {\n          key: user._id,\n          roleCode: role === null || role === void 0 ? void 0 : role.code,\n          role: role === null || role === void 0 ? void 0 : role.name\n        });\n      });\n      var columns = [{\n        title: i18n.t('user.name'),\n        sorter: function sorter(a, b) {\n          return \"\".concat(a.firstname, \" \").concat(a.lastname).localeCompare(\"\".concat(b.firstname, \" \").concat(b.lastname));\n        },\n        width: 200,\n        render: function render(user) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            className: \"clickableSpan\",\n            onClick: function onClick() {\n              return myInfo._id === user._id ? history.push('profile') : handleSelectUser(user);\n            },\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 11\n            }\n          }, \"\".concat(user.firstname, \" \").concat(user.lastname));\n        }\n      }, {\n        title: 'Email',\n        dataIndex: 'email',\n        sorter: function sorter(a, b) {\n          return a.email.localeCompare(b.email);\n        },\n        width: 300\n      }, {\n        title: i18n.t('user.account'),\n        dataIndex: 'username',\n        sorter: function sorter(a, b) {\n          return a.username.localeCompare(b.username);\n        },\n        width: 200\n      }, {\n        title: i18n.t('user.role'),\n        dataIndex: 'role',\n        sorter: function sorter(a, b) {\n          var _a$role;\n\n          return a === null || a === void 0 ? void 0 : (_a$role = a.role) === null || _a$role === void 0 ? void 0 : _a$role.localeCompare(b === null || b === void 0 ? void 0 : b.role);\n        }\n      }, {\n        title: i18n.t('user.createdAt'),\n        dataIndex: 'createdAt',\n        render: function render(createdAt) {\n          return moment(createdAt).format('MMM Do YYYY, hh:mm a');\n        }\n      }].concat(_toConsumableArray(isAllowDeleteUser ? [{\n        title: '',\n        key: 'x',\n        render: function render(_, user) {\n          var isDisplayBtnDelete = user._id !== myInfo._id && !isSupperAdmin(user.profiles);\n          return /*#__PURE__*/React.createElement(\"span\", {\n            className: \"columnBtnHolder\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }\n          }, isDisplayBtnDelete && /*#__PURE__*/React.createElement(ModalDelete, {\n            itemToDelete: user,\n            handleDeleteItem: mutationDeleteUsers,\n            title: i18n.t('user.deleteUser'),\n            textButtonDelete: i18n.t('common.delete'),\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 19\n            }\n          }));\n        }\n      }] : []));\n\n      var handleFocusIn = function handleFocusIn() {\n        _this2.setState({\n          expandInput: true\n        });\n      };\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"userHeader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"searchBarWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"topPart\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Input.Search, {\n        onFocus: handleFocusIn,\n        className: \"searchInput \".concat(expandInput ? 'expand' : ''),\n        placeholder: !expandInput ? i18n.t('search.search') : i18n.t('search.searchBy'),\n        onSearch: this.handleSearch,\n        onChange: this.handleOnChangeTextSearch,\n        style: {\n          width: 310\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        onClick: this.handleShowAnvancedSearch,\n        className: \"clickableSpan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 15\n        }\n      }, i18n.t('search.advancedSearch'), /*#__PURE__*/React.createElement(_Icon, {\n        className: \"logo  \".concat(expandInput ? 'expand' : ''),\n        type: \"down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bottomPart  \".concat(expandAdvancedSearch ? 'expand' : ''),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        onSelect: this.handleSelectRole,\n        defaultValue: \"\",\n        style: {\n          width: 150,\n          margin: '10px 10px 10px 0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(_Select.Option, {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 17\n        }\n      }, i18n.t('role.allRole')), roles.map(function (role) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: role.code,\n          value: role.code,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 19\n          }\n        }, role.name);\n      })), /*#__PURE__*/React.createElement(_Select, {\n        onSelect: this.handleSelectNode,\n        defaultValue: \"\",\n        style: {\n          width: 150,\n          margin: '10px 10px 10px 0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(_Select.Option, {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 17\n        }\n      }, i18n.t('user.allNodes')), nodes.map(function (node) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: node._id,\n          value: node._id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 19\n          }\n        }, node.name);\n      })), /*#__PURE__*/React.createElement(_Button, {\n        style: {\n          width: 120,\n          margin: '10px  10px 10px'\n        },\n        onClick: this.handleSearch,\n        type: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 15\n        }\n      }, i18n.t('search.search')))), isAllowAddUser && /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        icon: \"plus\",\n        className: \"btn-create\",\n        onClick: function onClick() {\n          return _this2.props.history.push('/userInfo/new');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }\n      }, i18n.t('user.createUser'))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tableWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(_Popover, {\n        className: \"selectColumnFormPopover\",\n        placement: \"bottomRight\",\n        visible: visiblePopover,\n        onVisibleChange: this.handleVisiblePopoverChange,\n        content: /*#__PURE__*/React.createElement(SelectColumnForm, {\n          handleVisiblePopoverChange: this.handleVisiblePopoverChange,\n          handleSelectColumn: this.handleSelectColumn,\n          allValues: columns,\n          initValues: columnsToShow,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 15\n          }\n        }),\n        title: null,\n        trigger: \"click\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(_Icon, {\n        type: \"setting\",\n        theme: \"filled\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(_Table, {\n        className: \"common-table\",\n        dataSource: rowData,\n        columns: columns.filter(function (e) {\n          return columnsToShow.includes(e.dataIndex) || e.dataIndex === undefined;\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return ListUser;\n}(Component), _temp)) || _class) || _class) || _class);\nexport default withTranslation()(ListUser);","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/dashboard/users/ListUsers.jsx"],"names":["React","Component","withTranslation","inject","observer","withRouter","moment","client","Q_ROLES","Q_NODES_BASIC","returnError","isSupperAdmin","hasPermission","parseError","ModalDelete","SelectColumnForm","PER","ROLE_TYPE","ListUser","stores","props","queryNodesBasic","query","fetchPolicy","variables","inputSearch","view","then","nodes","data","Error","setState","catch","error","errorMessage","i18n","t","container","queryRolesApp","type","ROLE_APP","roles","handleSelectNode","value","setInputSearch","nodeId","handleSelectRole","roleCode","handleOnChangeTextSearch","target","textSearch","handleSearch","queryUsersVerified","handleVisiblePopoverChange","visiblePopover","handleSelectColumn","columnsToShow","handleShowAnvancedSearch","preState","expandAdvancedSearch","expandInput","state","users","handleSelectUser","mutationDeleteUsers","myInfo","globalState","history","profiles","isAllowDeleteUser","P_USER_DELETE","isAllowAddUser","P_USER_CREATE","rowData","map","user","role","find","profile","key","_id","code","name","columns","title","sorter","a","b","firstname","lastname","localeCompare","width","render","push","dataIndex","email","username","createdAt","format","_","isDisplayBtnDelete","handleFocusIn","margin","node","filter","e","includes","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,eAAT,QAAgC,eAAhC;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,YAAjC;AAEA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,SAASC,MAAT,EAAiBC,OAAjB,EAA0BC,aAA1B,QAA+C,UAA/C;AACA,SAASC,WAAT,EAAsBC,aAAtB,EAAqCC,aAArC,EAAoDC,UAApD,QAAsE,QAAtE;AAEA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,SAASC,GAAT,EAAcC,SAAd,QAA+B,YAA/B;IAKMC,Q,WAFLf,MAAM,CAAC;AAAA,MAAGgB,MAAH,QAAGA,MAAH;AAAA,SAAgBA,MAAhB;AAAA,CAAD,C,EADNd,U,wBAEAD,Q;;;;;AAEC,oBAAYgB,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,UAYnBC,eAZmB,GAYD,YAAM;AACtBd,MAAAA,MAAM,CACHe,KADH,CACS;AACLA,QAAAA,KAAK,EAAEb,aADF;AAELc,QAAAA,WAAW,EAAE,cAFR;AAGLC,QAAAA,SAAS,EAAE;AACTC,UAAAA,WAAW,EAAE;AACXC,YAAAA,IAAI,EAAE;AADK;AADJ;AAHN,OADT,EAUGC,IAVH,CAUQ,iBAAyB;AAAA,YAAdC,KAAc,SAAtBC,IAAsB,CAAdD,KAAc;;AAC7B,YAAI,CAACA,KAAL,EAAY;AACV,gBAAM,IAAIE,KAAJ,EAAN;AACD;;AACD,cAAKC,QAAL,CAAc;AAAEH,UAAAA,KAAK,EAALA;AAAF,SAAd;AACD,OAfH,EAgBGI,KAhBH,CAgBS,UAAAC,KAAK;AAAA,eACVvB,WAAW,CACT,OADS,EAET;AAAEuB,UAAAA,KAAK,EAALA,KAAF;AAASC,UAAAA,YAAY,EAAE,MAAKd,KAAL,CAAWe,IAAX,CAAgBC,CAAhB,CAAkBvB,UAAU,CAACoB,KAAD,CAA5B;AAAvB,SAFS,EAGT;AAAEI,UAAAA,SAAS,EAAE;AAAb,SAHS,CADD;AAAA,OAhBd;AAuBD,KApCkB;;AAAA,UAsCnBC,aAtCmB,GAsCH,YAAM;AACpB/B,MAAAA,MAAM,CACHe,KADH,CACS;AACLA,QAAAA,KAAK,EAAEd,OADF;AAELe,QAAAA,WAAW,EAAE,cAFR;AAGLC,QAAAA,SAAS,EAAE;AACTe,UAAAA,IAAI,EAAEtB,SAAS,CAACuB;AADP;AAHN,OADT,EAQGb,IARH,CAQQ,iBAAyB;AAAA,YAAdc,KAAc,SAAtBZ,IAAsB,CAAdY,KAAc;;AAC7B,YAAI,CAACA,KAAL,EAAY;AACV,gBAAM,IAAIX,KAAJ,CAAU,6BAAV,CAAN;AACD;;AACD,cAAKC,QAAL,CAAc;AAAEU,UAAAA,KAAK,EAALA;AAAF,SAAd;AACD,OAbH,EAcGT,KAdH,CAcS,UAAAC,KAAK;AAAA,eACVvB,WAAW,CACT,OADS,EAET;AAAEuB,UAAAA,KAAK,EAALA,KAAF;AAASC,UAAAA,YAAY,EAAE,MAAKd,KAAL,CAAWe,IAAX,CAAgBC,CAAhB,CAAkBvB,UAAU,CAACoB,KAAD,CAA5B;AAAvB,SAFS,EAGT;AAAEI,UAAAA,SAAS,EAAE;AAAb,SAHS,CADD;AAAA,OAdd;AAqBD,KA5DkB;;AAAA,UAqEnBK,gBArEmB,GAqEA,UAAAC,KAAK,EAAI;AAC1B,YAAKvB,KAAL,CAAWwB,cAAX,mBACK,MAAKxB,KAAL,CAAWK,WADhB;AAEEoB,QAAAA,MAAM,EAAEF;AAFV;AAID,KA1EkB;;AAAA,UA4EnBG,gBA5EmB,GA4EA,UAAAH,KAAK,EAAI;AAC1B,YAAKvB,KAAL,CAAWwB,cAAX,mBACK,MAAKxB,KAAL,CAAWK,WADhB;AAEEsB,QAAAA,QAAQ,EAAEJ;AAFZ;AAID,KAjFkB;;AAAA,UAmFnBK,wBAnFmB,GAmFQ,iBAA2B;AAAA,UAAdL,KAAc,SAAxBM,MAAwB,CAAdN,KAAc;;AACpD,YAAKvB,KAAL,CAAWwB,cAAX,mBACK,MAAKxB,KAAL,CAAWK,WADhB;AAEEyB,QAAAA,UAAU,EAAEP;AAFd;AAID,KAxFkB;;AAAA,UA0FnBQ,YA1FmB,GA0FJ,YAAM;AACnB,YAAK/B,KAAL,CAAWgC,kBAAX,CAA8B,MAAKhC,KAAL,CAAWK,WAAzC;AACD,KA5FkB;;AAAA,UAgGnB4B,0BAhGmB,GAgGU,UAAAC,cAAc,EAAI;AAC7C,YAAKvB,QAAL,CAAc;AAAEuB,QAAAA,cAAc,EAAdA;AAAF,OAAd;AACD,KAlGkB;;AAAA,UAoGnBC,kBApGmB,GAoGE,UAAAC,aAAa,EAAI;AACpC,YAAKzB,QAAL,CAAc;AAAEyB,QAAAA,aAAa,EAAbA;AAAF,OAAd;AACD,KAtGkB;;AAAA,UA0GnBC,wBA1GmB,GA0GQ,YAAM;AAC/B,YAAK1B,QAAL,CAAc,UAAA2B,QAAQ,EAAI;AACxB,YAAI,CAACA,QAAQ,CAACC,oBAAd,EAAoC,OAAO;AAAEC,UAAAA,WAAW,EAAE;AAAf,SAAP,CAApC,KACK;AACH,iBAAO;AAAEA,YAAAA,WAAW,EAAE;AAAf,WAAP;AACD;AACF,OALD;;AAOA,YAAK7B,QAAL,CAAc,UAAA2B,QAAQ,EAAI;AACxB,eAAO;AAAEC,UAAAA,oBAAoB,EAAE,CAACD,QAAQ,CAACC;AAAlC,SAAP;AACD,OAFD;AAGD,KArHkB;;AAEjB,UAAKE,KAAL,GAAa;AACXL,MAAAA,aAAa,EAAE,CAAC,MAAD,EAAS,UAAT,EAAqB,OAArB,EAA8B,MAA9B,CADJ;AAEXF,MAAAA,cAAc,EAAE,KAFL;AAGXb,MAAAA,KAAK,EAAE,EAHI;AAIXmB,MAAAA,WAAW,EAAE,KAJF;AAKXD,MAAAA,oBAAoB,EAAE,KALX;AAMX/B,MAAAA,KAAK,EAAE;AANI,KAAb;AAFiB;AAUlB;;;;wCAoDmB;AAClB,WAAKU,aAAL;AACA,WAAKjB,eAAL;AACD;;;6BAyDQ;AAAA;;AAAA,wBAQH,KAAKD,KARF;AAAA,UAEL0C,KAFK,eAELA,KAFK;AAAA,UAGLC,gBAHK,eAGLA,gBAHK;AAAA,UAILC,mBAJK,eAILA,mBAJK;AAAA,UAKL7B,IALK,eAKLA,IALK;AAAA,UAMU8B,MANV,eAMLC,WANK,CAMUD,MANV;AAAA,UAOLE,OAPK,eAOLA,OAPK;AAAA,wBAYH,IAZG,CAWLN,KAXK;AAAA,UAWIjC,KAXJ,eAWIA,KAXJ;AAAA,UAWW4B,aAXX,eAWWA,aAXX;AAAA,UAW0BF,cAX1B,eAW0BA,cAX1B;AAAA,UAW0Cb,KAX1C,eAW0CA,KAX1C;AAAA,UAWiDmB,WAXjD,eAWiDA,WAXjD;AAAA,UAW8DD,oBAX9D,eAW8DA,oBAX9D;AAcP,UAAMS,QAAQ,GAAGH,MAAH,aAAGA,MAAH,uBAAGA,MAAM,CAAEG,QAAzB;AACA,UAAMC,iBAAiB,GAAG1D,aAAa,CAACyD,QAAD,CAAb,IAA2BxD,aAAa,CAACwD,QAAD,EAAWpD,GAAG,CAACsD,aAAf,CAAlE;AACA,UAAMC,cAAc,GAAG5D,aAAa,CAACyD,QAAD,CAAb,IAA2BxD,aAAa,CAACwD,QAAD,EAAWpD,GAAG,CAACwD,aAAf,CAA/D;AAGA,UAAIC,OAAO,GAAGX,KAAK,CAChBY,GADW,CACP,UAAAC,IAAI,EAAI;AAAA;;AACX,YAAMC,IAAI,GAAGD,IAAH,aAAGA,IAAH,yCAAGA,IAAI,CAAEP,QAAT,0EAAG,eAAgBS,IAAhB,CAAqB,UAAAC,OAAO;AAAA;;AAAA,iBAAI,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,6BAAAA,OAAO,CAAEF,IAAT,gEAAerC,IAAf,MAAwBtB,SAAS,CAACuB,QAAtC;AAAA,SAA5B,CAAH,wDAAG,oBAA6EoC,IAA1F;AACA,iCACKD,IADL;AAEEI,UAAAA,GAAG,EAAEJ,IAAI,CAACK,GAFZ;AAGEjC,UAAAA,QAAQ,EAAE6B,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEK,IAHlB;AAIEL,UAAAA,IAAI,EAAEA,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEM;AAJd;AAMD,OATW,CAAd;AAWA,UAAMC,OAAO,IACX;AACEC,QAAAA,KAAK,EAAEjD,IAAI,CAACC,CAAL,CAAO,WAAP,CADT;AAEEiD,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAAIC,CAAJ,EAAU;AAChB,iBAAO,UAAGD,CAAC,CAACE,SAAL,cAAkBF,CAAC,CAACG,QAApB,EAA+BC,aAA/B,WAAgDH,CAAC,CAACC,SAAlD,cAA+DD,CAAC,CAACE,QAAjE,EAAP;AACD,SAJH;AAKEE,QAAAA,KAAK,EAAE,GALT;AAMEC,QAAAA,MAAM,EAAE,gBAAAjB,IAAI;AAAA,8BACV;AACE,YAAA,SAAS,EAAC,eADZ;AAEE,YAAA,OAAO,EAAE;AAAA,qBAAOV,MAAM,CAACe,GAAP,KAAeL,IAAI,CAACK,GAApB,GAA0Bb,OAAO,CAAC0B,IAAR,CAAa,SAAb,CAA1B,GAAoD9B,gBAAgB,CAACY,IAAD,CAA3E;AAAA,aAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAIMA,IAAI,CAACa,SAJX,cAIwBb,IAAI,CAACc,QAJ7B,EADU;AAAA;AANd,OADW,EAgBX;AACEL,QAAAA,KAAK,EAAE,OADT;AAEEU,QAAAA,SAAS,EAAE,OAFb;AAGET,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAAIC,CAAJ;AAAA,iBAAUD,CAAC,CAACS,KAAF,CAAQL,aAAR,CAAsBH,CAAC,CAACQ,KAAxB,CAAV;AAAA,SAHV;AAIEJ,QAAAA,KAAK,EAAE;AAJT,OAhBW,EAsBX;AACEP,QAAAA,KAAK,EAAEjD,IAAI,CAACC,CAAL,CAAO,cAAP,CADT;AAEE0D,QAAAA,SAAS,EAAE,UAFb;AAGET,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAAIC,CAAJ;AAAA,iBAAUD,CAAC,CAACU,QAAF,CAAWN,aAAX,CAAyBH,CAAC,CAACS,QAA3B,CAAV;AAAA,SAHV;AAIEL,QAAAA,KAAK,EAAE;AAJT,OAtBW,EA4BX;AACEP,QAAAA,KAAK,EAAEjD,IAAI,CAACC,CAAL,CAAO,WAAP,CADT;AAEE0D,QAAAA,SAAS,EAAE,MAFb;AAGET,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAAIC,CAAJ;AAAA;;AAAA,iBAAUD,CAAV,aAAUA,CAAV,kCAAUA,CAAC,CAAEV,IAAb,4CAAU,QAASc,aAAT,CAAuBH,CAAvB,aAAuBA,CAAvB,uBAAuBA,CAAC,CAAEX,IAA1B,CAAV;AAAA;AAHV,OA5BW,EAiCX;AACEQ,QAAAA,KAAK,EAAEjD,IAAI,CAACC,CAAL,CAAO,gBAAP,CADT;AAEE0D,QAAAA,SAAS,EAAE,WAFb;AAGEF,QAAAA,MAAM,EAAE,gBAAAK,SAAS;AAAA,iBAAI3F,MAAM,CAAC2F,SAAD,CAAN,CAAkBC,MAAlB,CAAyB,sBAAzB,CAAJ;AAAA;AAHnB,OAjCW,4BAsCP7B,iBAAiB,GAAG,CACtB;AACEe,QAAAA,KAAK,EAAE,EADT;AAEEL,QAAAA,GAAG,EAAE,GAFP;AAGEa,QAAAA,MAAM,EAAE,gBAACO,CAAD,EAAIxB,IAAJ,EAAa;AACnB,cAAMyB,kBAAkB,GAAGzB,IAAI,CAACK,GAAL,KAAaf,MAAM,CAACe,GAApB,IAA2B,CAACrE,aAAa,CAACgE,IAAI,CAACP,QAAN,CAApE;AACA,8BACE;AAAM,YAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACGgC,kBAAkB,iBACjB,oBAAC,WAAD;AACE,YAAA,YAAY,EAAEzB,IADhB;AAEE,YAAA,gBAAgB,EAAEX,mBAFpB;AAGE,YAAA,KAAK,EAAE7B,IAAI,CAACC,CAAL,CAAO,iBAAP,CAHT;AAIE,YAAA,gBAAgB,EAAED,IAAI,CAACC,CAAL,CAAO,eAAP,CAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,CADF;AAYD;AAjBH,OADsB,CAAH,GAoBjB,EA1DO,EAAb;;AA8DA,UAAMiE,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,QAAA,MAAI,CAACtE,QAAL,CAAc;AAAE6B,UAAAA,WAAW,EAAE;AAAf,SAAd;AACD,OAFD;;AAGA,0BACE,uDACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,2BAAO,MAAP;AACE,QAAA,OAAO,EAAEyC,aADX;AAEE,QAAA,SAAS,wBAAiBzC,WAAW,GAAG,QAAH,GAAc,EAA1C,CAFX;AAGE,QAAA,WAAW,EAAE,CAACA,WAAD,GAAezB,IAAI,CAACC,CAAL,CAAO,eAAP,CAAf,GAAyCD,IAAI,CAACC,CAAL,CAAO,iBAAP,CAHxD;AAIE,QAAA,QAAQ,EAAE,KAAKe,YAJjB;AAKE,QAAA,QAAQ,EAAE,KAAKH,wBALjB;AAME,QAAA,KAAK,EAAE;AAAE2C,UAAAA,KAAK,EAAE;AAAT,SANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eASE;AAAM,QAAA,OAAO,EAAE,KAAKlC,wBAApB;AAA8C,QAAA,SAAS,EAAC,eAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGtB,IAAI,CAACC,CAAL,CAAO,uBAAP,CADH,eAEE;AAAM,QAAA,SAAS,kBAAWwB,WAAW,GAAG,QAAH,GAAc,EAApC,CAAf;AAAyD,QAAA,IAAI,EAAC,MAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CATF,CADF,eAgBE;AAAK,QAAA,SAAS,wBAAiBD,oBAAoB,GAAG,QAAH,GAAc,EAAnD,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,QAAQ,EAAE,KAAKb,gBADjB;AAEE,QAAA,YAAY,EAAC,EAFf;AAGE,QAAA,KAAK,EAAE;AAAE6C,UAAAA,KAAK,EAAE,GAAT;AAAcW,UAAAA,MAAM,EAAE;AAAtB,SAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE,4BAAQ,MAAR;AAAe,QAAA,KAAK,EAAC,EAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAyBnE,IAAI,CAACC,CAAL,CAAO,cAAP,CAAzB,CALF,EAMGK,KAAK,CAACiC,GAAN,CAAU,UAAAE,IAAI;AAAA,4BACb,4BAAQ,MAAR;AAAe,UAAA,GAAG,EAAEA,IAAI,CAACK,IAAzB;AAA+B,UAAA,KAAK,EAAEL,IAAI,CAACK,IAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGL,IAAI,CAACM,IADR,CADa;AAAA,OAAd,CANH,CADF,eAcE;AACE,QAAA,QAAQ,EAAE,KAAKxC,gBADjB;AAEE,QAAA,YAAY,EAAC,EAFf;AAGE,QAAA,KAAK,EAAE;AAAEiD,UAAAA,KAAK,EAAE,GAAT;AAAcW,UAAAA,MAAM,EAAE;AAAtB,SAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE,4BAAQ,MAAR;AAAe,QAAA,KAAK,EAAC,EAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAyBnE,IAAI,CAACC,CAAL,CAAO,eAAP,CAAzB,CALF,EAMGR,KAAK,CAAC8C,GAAN,CAAU,UAAA6B,IAAI;AAAA,4BACb,4BAAQ,MAAR;AAAe,UAAA,GAAG,EAAEA,IAAI,CAACvB,GAAzB;AAA8B,UAAA,KAAK,EAAEuB,IAAI,CAACvB,GAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGuB,IAAI,CAACrB,IADR,CADa;AAAA,OAAd,CANH,CAdF,eA4BE;AAAQ,QAAA,KAAK,EAAE;AAAES,UAAAA,KAAK,EAAE,GAAT;AAAcW,UAAAA,MAAM,EAAE;AAAtB,SAAf;AAA0D,QAAA,OAAO,EAAE,KAAKnD,YAAxE;AAAsF,QAAA,IAAI,EAAC,SAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGhB,IAAI,CAACC,CAAL,CAAO,eAAP,CADH,CA5BF,CAhBF,CADF,EAoDGmC,cAAc,iBACb;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,SAAS,EAAC,YAHZ;AAIE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACnD,KAAL,CAAW+C,OAAX,CAAmB0B,IAAnB,CAAwB,eAAxB,CAAN;AAAA,SAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMG1D,IAAI,CAACC,CAAL,CAAO,iBAAP,CANH,CArDJ,CADF,eAiEE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,SAAS,EAAC,yBADZ;AAEE,QAAA,SAAS,EAAC,aAFZ;AAGE,QAAA,OAAO,EAAEkB,cAHX;AAIE,QAAA,eAAe,EAAE,KAAKD,0BAJxB;AAKE,QAAA,OAAO,eACL,oBAAC,gBAAD;AACE,UAAA,0BAA0B,EAAE,KAAKA,0BADnC;AAEE,UAAA,kBAAkB,EAAE,KAAKE,kBAF3B;AAGE,UAAA,SAAS,EAAE4B,OAHb;AAIE,UAAA,UAAU,EAAE3B,aAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UANJ;AAaE,QAAA,KAAK,EAAE,IAbT;AAcE,QAAA,OAAO,EAAC,OAdV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAgBE;AAAM,QAAA,IAAI,EAAC,SAAX;AAAqB,QAAA,KAAK,EAAC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAhBF,CADF,eAoBE;AACE,QAAA,SAAS,EAAC,cADZ;AAEE,QAAA,UAAU,EAAEiB,OAFd;AAGE,QAAA,OAAO,EAAEU,OAAO,CAACqB,MAAR,CAAe,UAAAC,CAAC;AAAA,iBAAIjD,aAAa,CAACkD,QAAd,CAAuBD,CAAC,CAACX,SAAzB,KAAuCW,CAAC,CAACX,SAAF,KAAgBa,SAA3D;AAAA,SAAhB,CAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QApBF,CAjEF,CADF;AA8FD;;;;EAxToB1G,S;AA2TvB,eAAeC,eAAe,GAAGgB,QAAH,CAA9B","sourcesContent":["import React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { inject, observer } from 'mobx-react'\nimport { Table, Button } from 'antd'\nimport { withRouter } from 'react-router'\nimport moment from 'moment'\nimport { Icon, Popover, Input, Select } from 'antd'\nimport { client, Q_ROLES, Q_NODES_BASIC } from '@graphql'\nimport { returnError, isSupperAdmin, hasPermission, parseError } from '@utils'\n\nimport ModalDelete from '../components/ModalDelete'\nimport SelectColumnForm from './SelectColumnForm'\nimport { PER, ROLE_TYPE } from '@constants'\n\n@withRouter\n@inject(({ stores }) => stores)\n@observer\nclass ListUser extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      columnsToShow: ['name', 'username', 'email', 'role'],\n      visiblePopover: false,\n      roles: [],\n      expandInput: false,\n      expandAdvancedSearch: false,\n      nodes: []\n    }\n  }\n\n  queryNodesBasic = () => {\n    client\n      .query({\n        query: Q_NODES_BASIC,\n        fetchPolicy: 'network-only',\n        variables: {\n          inputSearch: {\n            view: 'ALL'\n          }\n        }\n      })\n      .then(({ data: { nodes } }) => {\n        if (!nodes) {\n          throw new Error()\n        }\n        this.setState({ nodes })\n      })\n      .catch(error =>\n        returnError(\n          'users',\n          { error, errorMessage: this.props.i18n.t(parseError(error)) },\n          { container: 'top-right' }\n        )\n      )\n  }\n\n  queryRolesApp = () => {\n    client\n      .query({\n        query: Q_ROLES,\n        fetchPolicy: 'network-only',\n        variables: {\n          type: ROLE_TYPE.ROLE_APP\n        }\n      })\n      .then(({ data: { roles } }) => {\n        if (!roles) {\n          throw new Error('notification.queryRoleError')\n        }\n        this.setState({ roles })\n      })\n      .catch(error =>\n        returnError(\n          'users',\n          { error, errorMessage: this.props.i18n.t(parseError(error)) },\n          { container: 'top-right' }\n        )\n      )\n  }\n\n  componentDidMount() {\n    this.queryRolesApp()\n    this.queryNodesBasic()\n  }\n\n\n\n  handleSelectNode = value => {\n    this.props.setInputSearch({\n      ...this.props.inputSearch,\n      nodeId: value\n    })\n  }\n\n  handleSelectRole = value => {\n    this.props.setInputSearch({\n      ...this.props.inputSearch,\n      roleCode: value\n    })\n  }\n\n  handleOnChangeTextSearch = ({ target: { value } }) => {\n    this.props.setInputSearch({\n      ...this.props.inputSearch,\n      textSearch: value\n    })\n  }\n\n  handleSearch = () => {\n    this.props.queryUsersVerified(this.props.inputSearch)\n  }\n\n\n\n  handleVisiblePopoverChange = visiblePopover => {\n    this.setState({ visiblePopover })\n  }\n\n  handleSelectColumn = columnsToShow => {\n    this.setState({ columnsToShow })\n  }\n\n\n\n  handleShowAnvancedSearch = () => {\n    this.setState(preState => {\n      if (!preState.expandAdvancedSearch) return { expandInput: true }\n      else {\n        return { expandInput: false }\n      }\n    })\n\n    this.setState(preState => {\n      return { expandAdvancedSearch: !preState.expandAdvancedSearch }\n    })\n  }\n\n\n\n\n  render() {\n    const {\n      users,\n      handleSelectUser,\n      mutationDeleteUsers,\n      i18n,\n      globalState: { myInfo },\n      history\n    } = this.props\n\n    const {\n      state: { nodes, columnsToShow, visiblePopover, roles, expandInput, expandAdvancedSearch }\n    } = this\n\n    const profiles = myInfo?.profiles\n    const isAllowDeleteUser = isSupperAdmin(profiles) || hasPermission(profiles, PER.P_USER_DELETE)\n    const isAllowAddUser = isSupperAdmin(profiles) || hasPermission(profiles, PER.P_USER_CREATE)\n\n\n    let rowData = users\n      .map(user => {\n        const role = user?.profiles?.find(profile => profile?.role?.type === ROLE_TYPE.ROLE_APP)?.role\n        return {\n          ...user,\n          key: user._id,\n          roleCode: role?.code,\n          role: role?.name\n        }\n      })\n\n    const columns = [\n      {\n        title: i18n.t('user.name'),\n        sorter: (a, b) => {\n          return `${a.firstname} ${a.lastname}`.localeCompare(`${b.firstname} ${b.lastname}`)\n        },\n        width: 200,\n        render: user => (\n          <span\n            className='clickableSpan'\n            onClick={() => (myInfo._id === user._id ? history.push('profile') : handleSelectUser(user))}\n          >\n            {`${user.firstname} ${user.lastname}`}\n          </span>\n        )\n      },\n      {\n        title: 'Email',\n        dataIndex: 'email',\n        sorter: (a, b) => a.email.localeCompare(b.email),\n        width: 300\n      },\n      {\n        title: i18n.t('user.account'),\n        dataIndex: 'username',\n        sorter: (a, b) => a.username.localeCompare(b.username),\n        width: 200\n      },\n      {\n        title: i18n.t('user.role'),\n        dataIndex: 'role',\n        sorter: (a, b) => a?.role?.localeCompare(b?.role)\n      },\n      {\n        title: i18n.t('user.createdAt'),\n        dataIndex: 'createdAt',\n        render: createdAt => moment(createdAt).format('MMM Do YYYY, hh:mm a')\n      },\n      ...(isAllowDeleteUser ? [\n        {\n          title: '',\n          key: 'x',\n          render: (_, user) => {\n            const isDisplayBtnDelete = user._id !== myInfo._id && !isSupperAdmin(user.profiles)\n            return (\n              <span className='columnBtnHolder'>\n                {isDisplayBtnDelete && (\n                  <ModalDelete\n                    itemToDelete={user}\n                    handleDeleteItem={mutationDeleteUsers}\n                    title={i18n.t('user.deleteUser')}\n                    textButtonDelete={i18n.t('common.delete')}\n                  />\n                )}\n              </span>\n            )\n          }\n        }\n      ] : [])\n    ]\n\n\n    const handleFocusIn = () => {\n      this.setState({ expandInput: true })\n    }\n    return (\n      <>\n        <div className='userHeader'>\n          <div className={`searchBarWrapper`}>\n            <div className='topPart'>\n              <Input.Search\n                onFocus={handleFocusIn}\n                className={`searchInput ${expandInput ? 'expand' : ''}`}\n                placeholder={!expandInput ? i18n.t('search.search') : i18n.t('search.searchBy')}\n                onSearch={this.handleSearch}\n                onChange={this.handleOnChangeTextSearch}\n                style={{ width: 310 }}\n              />\n              <span onClick={this.handleShowAnvancedSearch} className='clickableSpan'>\n                {i18n.t('search.advancedSearch')}\n                <Icon className={`logo  ${expandInput ? 'expand' : ''}`} type='down' />\n              </span>\n            </div>\n\n            <div className={`bottomPart  ${expandAdvancedSearch ? 'expand' : ''}`}>\n              <Select\n                onSelect={this.handleSelectRole}\n                defaultValue=''\n                style={{ width: 150, margin: '10px 10px 10px 0' }}\n              >\n                <Select.Option value=''>{i18n.t('role.allRole')}</Select.Option>\n                {roles.map(role => (\n                  <Select.Option key={role.code} value={role.code}>\n                    {role.name}\n                  </Select.Option>\n                ))}\n              </Select>\n\n              <Select\n                onSelect={this.handleSelectNode}\n                defaultValue=''\n                style={{ width: 150, margin: '10px 10px 10px 0' }}\n              >\n                <Select.Option value=''>{i18n.t('user.allNodes')}</Select.Option>\n                {nodes.map(node => (\n                  <Select.Option key={node._id} value={node._id}>\n                    {node.name}\n                  </Select.Option>\n                ))}\n              </Select>\n\n\n              <Button style={{ width: 120, margin: '10px  10px 10px' }} onClick={this.handleSearch} type='primary'>\n                {i18n.t('search.search')}\n              </Button>\n            </div>\n          </div>\n\n\n          {isAllowAddUser && (\n            <Button\n              type='primary'\n              icon='plus'\n              className='btn-create'\n              onClick={() => this.props.history.push('/userInfo/new')}\n            >\n              {i18n.t('user.createUser')}\n            </Button>\n          )}\n        </div>\n\n        <div className='tableWrapper'>\n          <Popover\n            className='selectColumnFormPopover'\n            placement='bottomRight'\n            visible={visiblePopover}\n            onVisibleChange={this.handleVisiblePopoverChange}\n            content={\n              <SelectColumnForm\n                handleVisiblePopoverChange={this.handleVisiblePopoverChange}\n                handleSelectColumn={this.handleSelectColumn}\n                allValues={columns}\n                initValues={columnsToShow}\n              />\n            }\n            title={null}\n            trigger='click'\n          >\n            <Icon type='setting' theme='filled' />\n          </Popover>\n\n          <Table\n            className='common-table'\n            dataSource={rowData}\n            columns={columns.filter(e => columnsToShow.includes(e.dataIndex) || e.dataIndex === undefined)}\n          />\n        </div>\n      </>\n    )\n  }\n}\n\nexport default withTranslation()(ListUser)\n"]},"metadata":{},"sourceType":"module"}