{"ast":null,"code":"import _objectSpread from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\n/* eslint-disable no-useless-escape */\n\n/* eslint-disable no-control-regex */\nimport { store } from 'react-notifications-component';\nimport { ROLE } from '@constants';\nexport function newNotification() {\n  var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Empty message';\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'info';\n  var otherSettings = arguments.length > 2 ? arguments[2] : undefined;\n  store.addNotification(_objectSpread({\n    message: message,\n    type: type,\n    insert: 'top',\n    container: 'top-right',\n    animationIn: ['animated', 'fadeIn'],\n    animationOut: ['animated', 'fadeOut'],\n    dismiss: {\n      duration: 2500,\n      showIcon: true\n    }\n  }, otherSettings));\n}\n/** Friendly errors, catch all Queries/Mutations errors in catch block,\n * log error to console only in dev mode and show notification\n * in production mode\n *\n * - `errorKey`: queries/mutations name\n * - `error`: error that log to console in dev mode\n * - `errorMessage`: message that show in production mode\n */\n\nexport function returnError(errorKey, _ref, otherSettings) {\n  var error = _ref.error,\n      errorMessage = _ref.errorMessage;\n\n  if (process.env.NODE_ENV === 'development') {\n    console.error(\"\".concat(errorKey, \" ERROR:\"), error);\n  }\n\n  return newNotification(errorMessage, 'danger', otherSettings);\n}\nexport function returnNotification() {\n  var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Empty message';\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'info';\n  var otherSettings = arguments.length > 2 ? arguments[2] : undefined;\n  store.addNotification(_objectSpread({\n    message: message,\n    type: type,\n    insert: 'bottom',\n    container: 'bottom-center',\n    animationIn: ['animated', 'fadeIn'],\n    animationOut: ['animated', 'fadeOut'],\n    dismiss: {\n      duration: 2500,\n      showIcon: true\n    }\n  }, otherSettings));\n}\nexport function parseError(err) {\n  var _err$graphQLErrors;\n\n  if (err && err.message && /^Network error:/.test(err.message)) {\n    return 'Error connect';\n  }\n\n  var message = (err === null || err === void 0 ? void 0 : (_err$graphQLErrors = err.graphQLErrors) === null || _err$graphQLErrors === void 0 ? void 0 : _err$graphQLErrors.map(function (er) {\n    return er.message;\n  }).join(',')) || (err === null || err === void 0 ? void 0 : err.message) || 'Có lỗi xảy ra';\n  return message;\n}\nexport function getProfile(_ref2) {\n  var profiles = _ref2.profiles,\n      userId = _ref2.userId,\n      roleCode = _ref2.roleCode,\n      nodeId = _ref2.nodeId;\n  return profiles.find(function (profile) {\n    // if\n    if (roleCode) {\n      var _profile$role;\n\n      if ((profile === null || profile === void 0 ? void 0 : (_profile$role = profile.role) === null || _profile$role === void 0 ? void 0 : _profile$role.code) !== roleCode) {\n        return false;\n      }\n    }\n\n    if (nodeId !== undefined) {\n      var _profile$node;\n\n      if (nodeId === null && !profile.node) {\n        return false;\n      }\n\n      if ((profile === null || profile === void 0 ? void 0 : (_profile$node = profile.node) === null || _profile$node === void 0 ? void 0 : _profile$node._id) !== nodeId) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n}\nexport function hasPermissionInNode(profileNode, permission) {\n  var _profileNode$role, _profileNode$role$per;\n\n  if (!profileNode || !(profileNode === null || profileNode === void 0 ? void 0 : (_profileNode$role = profileNode.role) === null || _profileNode$role === void 0 ? void 0 : (_profileNode$role$per = _profileNode$role.permissions) === null || _profileNode$role$per === void 0 ? void 0 : _profileNode$role$per.some(function (per) {\n    return per.code === permission;\n  }))) {\n    return false;\n  }\n\n  return true;\n}\nexport function isSupperAdmin(profiles) {\n  return profiles === null || profiles === void 0 ? void 0 : profiles.some(function (profile) {\n    var _profile$role2;\n\n    return (profile === null || profile === void 0 ? void 0 : (_profile$role2 = profile.role) === null || _profile$role2 === void 0 ? void 0 : _profile$role2.code) === ROLE.R_SUPPERADMIN;\n  });\n}\nexport function isBotRecord(profiles) {\n  return profiles === null || profiles === void 0 ? void 0 : profiles.some(function (profile) {\n    var _profile$role3;\n\n    return (profile === null || profile === void 0 ? void 0 : (_profile$role3 = profile.role) === null || _profile$role3 === void 0 ? void 0 : _profile$role3.code) === ROLE.R_BOT_RECORD;\n  });\n}\nexport function hasPermission(profiles, permission) {\n  return profiles === null || profiles === void 0 ? void 0 : profiles.some(function (profile) {\n    var _profile$role4, _profile$role4$permis;\n\n    return profile === null || profile === void 0 ? void 0 : (_profile$role4 = profile.role) === null || _profile$role4 === void 0 ? void 0 : (_profile$role4$permis = _profile$role4.permissions) === null || _profile$role4$permis === void 0 ? void 0 : _profile$role4$permis.some(function (per) {\n      return per.code === permission;\n    });\n  });\n}\nexport var addslashes = function addslashes(str) {\n  return \"\".concat(str).replace(/[\\\\\"'\\(\\)\\[\\]]/g, '\\\\$&').replace(/\\u0000/g, '\\\\0');\n};","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/utils/index.ts"],"names":["store","ROLE","newNotification","message","type","otherSettings","addNotification","insert","container","animationIn","animationOut","dismiss","duration","showIcon","returnError","errorKey","error","errorMessage","process","env","NODE_ENV","console","returnNotification","parseError","err","test","graphQLErrors","map","er","join","getProfile","profiles","userId","roleCode","nodeId","find","profile","role","code","undefined","node","_id","hasPermissionInNode","profileNode","permission","permissions","some","per","isSupperAdmin","R_SUPPERADMIN","isBotRecord","R_BOT_RECORD","hasPermission","addslashes","str","replace"],"mappings":";;AAAA;;AACA;AACA,SAASA,KAAT,QAAsB,+BAAtB;AACA,SAASC,IAAT,QAAqB,YAArB;AACA,OAAO,SAASC,eAAT,GAIL;AAAA,MAHAC,OAGA,uEAHkB,eAGlB;AAAA,MAFAC,IAEA,uEAF8D,MAE9D;AAAA,MADAC,aACA;AACAL,EAAAA,KAAK,CAACM,eAAN;AACEH,IAAAA,OAAO,EAAPA,OADF;AAEEC,IAAAA,IAAI,EAAJA,IAFF;AAGEG,IAAAA,MAAM,EAAE,KAHV;AAIEC,IAAAA,SAAS,EAAE,WAJb;AAKEC,IAAAA,WAAW,EAAE,CAAC,UAAD,EAAa,QAAb,CALf;AAMEC,IAAAA,YAAY,EAAE,CAAC,UAAD,EAAa,SAAb,CANhB;AAOEC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,QAAQ,EAAE,IAAZ;AAAkBC,MAAAA,QAAQ,EAAE;AAA5B;AAPX,KAQKR,aARL;AAUD;AAED;;;;;;;;;AAQA,OAAO,SAASS,WAAT,CAAqBC,QAArB,QAAgEV,aAAhE,EAAwG;AAAA,MAA/DW,KAA+D,QAA/DA,KAA+D;AAAA,MAAxDC,YAAwD,QAAxDA,YAAwD;;AAC7G,MAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1CC,IAAAA,OAAO,CAACL,KAAR,WAAiBD,QAAjB,cAAoCC,KAApC;AACD;;AACD,SAAOd,eAAe,CAACe,YAAD,EAAe,QAAf,EAAyBZ,aAAzB,CAAtB;AACD;AAED,OAAO,SAASiB,kBAAT,GAIL;AAAA,MAHAnB,OAGA,uEAHkB,eAGlB;AAAA,MAFAC,IAEA,uEAF8D,MAE9D;AAAA,MADAC,aACA;AACAL,EAAAA,KAAK,CAACM,eAAN;AACEH,IAAAA,OAAO,EAAPA,OADF;AAEEC,IAAAA,IAAI,EAAJA,IAFF;AAGEG,IAAAA,MAAM,EAAE,QAHV;AAIEC,IAAAA,SAAS,EAAE,eAJb;AAKEC,IAAAA,WAAW,EAAE,CAAC,UAAD,EAAa,QAAb,CALf;AAMEC,IAAAA,YAAY,EAAE,CAAC,UAAD,EAAa,SAAb,CANhB;AAOEC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,QAAQ,EAAE,IAAZ;AAAkBC,MAAAA,QAAQ,EAAE;AAA5B;AAPX,KAQKR,aARL;AAUD;AAED,OAAO,SAASkB,UAAT,CAAoBC,GAApB,EAA8B;AAAA;;AACnC,MAAIA,GAAG,IAAIA,GAAG,CAACrB,OAAX,IAAsB,kBAAkBsB,IAAlB,CAAuBD,GAAG,CAACrB,OAA3B,CAA1B,EAA+D;AAC7D,WAAO,eAAP;AACD;;AAED,MAAMA,OAAO,GAAG,CAAAqB,GAAG,SAAH,IAAAA,GAAG,WAAH,kCAAAA,GAAG,CAAEE,aAAL,0EAAoBC,GAApB,CAAwB,UAAAC,EAAE;AAAA,WAAIA,EAAE,CAACzB,OAAP;AAAA,GAA1B,EAA0C0B,IAA1C,CAA+C,GAA/C,OAAuDL,GAAvD,aAAuDA,GAAvD,uBAAuDA,GAAG,CAAErB,OAA5D,KAAuE,eAAvF;AACA,SAAOA,OAAP;AACD;AAED,OAAO,SAAS2B,UAAT,QAUJ;AAAA,MATDC,QASC,SATDA,QASC;AAAA,MARDC,MAQC,SARDA,MAQC;AAAA,MAPDC,QAOC,SAPDA,QAOC;AAAA,MANDC,MAMC,SANDA,MAMC;AACD,SAAOH,QAAQ,CAACI,IAAT,CAAc,UAAAC,OAAO,EAAI;AAC9B;AACA,QAAIH,QAAJ,EAAc;AAAA;;AACZ,UAAI,CAAAG,OAAO,SAAP,IAAAA,OAAO,WAAP,6BAAAA,OAAO,CAAEC,IAAT,gEAAeC,IAAf,MAAwBL,QAA5B,EAAsC;AACpC,eAAO,KAAP;AACD;AACF;;AAED,QAAIC,MAAM,KAAKK,SAAf,EAA0B;AAAA;;AACxB,UAAIL,MAAM,KAAK,IAAX,IAAmB,CAACE,OAAO,CAACI,IAAhC,EAAsC;AACpC,eAAO,KAAP;AACD;;AAED,UAAI,CAAAJ,OAAO,SAAP,IAAAA,OAAO,WAAP,6BAAAA,OAAO,CAAEI,IAAT,gEAAeC,GAAf,MAAuBP,MAA3B,EAAmC;AACjC,eAAO,KAAP;AACD;AACF;;AAED,WAAO,IAAP;AACD,GAnBM,CAAP;AAoBD;AAED,OAAO,SAASQ,mBAAT,CAA6BC,WAA7B,EAA+CC,UAA/C,EAA4E;AAAA;;AACjF,MAAI,CAACD,WAAD,IAAgB,EAACA,WAAD,aAACA,WAAD,4CAACA,WAAW,CAAEN,IAAd,+EAAC,kBAAmBQ,WAApB,0DAAC,sBAAgCC,IAAhC,CAAqC,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACT,IAAJ,KAAaM,UAAjB;AAAA,GAAxC,CAAD,CAApB,EAA2F;AACzF,WAAO,KAAP;AACD;;AACD,SAAO,IAAP;AACD;AAED,OAAO,SAASI,aAAT,CAAuBjB,QAAvB,EAAiD;AACtD,SAAOA,QAAP,aAAOA,QAAP,uBAAOA,QAAQ,CAAEe,IAAV,CAAe,UAAAV,OAAO;AAAA;;AAAA,WAAI,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,8BAAAA,OAAO,CAAEC,IAAT,kEAAeC,IAAf,MAAwBrC,IAAI,CAACgD,aAAjC;AAAA,GAAtB,CAAP;AACD;AAED,OAAO,SAASC,WAAT,CAAqBnB,QAArB,EAA+C;AACpD,SAAOA,QAAP,aAAOA,QAAP,uBAAOA,QAAQ,CAAEe,IAAV,CAAe,UAAAV,OAAO;AAAA;;AAAA,WAAI,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,8BAAAA,OAAO,CAAEC,IAAT,kEAAeC,IAAf,MAAwBrC,IAAI,CAACkD,YAAjC;AAAA,GAAtB,CAAP;AACD;AAED,OAAO,SAASC,aAAT,CAAuBrB,QAAvB,EAAwCa,UAAxC,EAAqE;AAC1E,SAAOb,QAAP,aAAOA,QAAP,uBAAOA,QAAQ,CAAEe,IAAV,CAAe,UAAAV,OAAO;AAAA;;AAAA,WAAIA,OAAJ,aAAIA,OAAJ,yCAAIA,OAAO,CAAEC,IAAb,4EAAI,eAAeQ,WAAnB,0DAAI,sBAA4BC,IAA5B,CAAiC,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACT,IAAJ,KAAaM,UAAjB;AAAA,KAApC,CAAJ;AAAA,GAAtB,CAAP;AACD;AAED,OAAO,IAAMS,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD;AAAA,SAAiB,UAAGA,GAAH,EAASC,OAAT,CAAiB,iBAAjB,EAAoC,MAApC,EAA4CA,OAA5C,CAAoD,SAApD,EAA+D,KAA/D,CAAjB;AAAA,CAAnB","sourcesContent":["/* eslint-disable no-useless-escape */\n/* eslint-disable no-control-regex */\nimport { store } from 'react-notifications-component'\nimport { ROLE } from '@constants'\nexport function newNotification(\n  message: string = 'Empty message',\n  type: 'success' | 'danger' | 'info' | 'default' | 'warning' = 'info',\n  otherSettings?: { [key: string]: any }\n) {\n  store.addNotification({\n    message,\n    type,\n    insert: 'top',\n    container: 'top-right',\n    animationIn: ['animated', 'fadeIn'],\n    animationOut: ['animated', 'fadeOut'],\n    dismiss: { duration: 2500, showIcon: true },\n    ...otherSettings\n  })\n}\n\n/** Friendly errors, catch all Queries/Mutations errors in catch block,\n * log error to console only in dev mode and show notification\n * in production mode\n *\n * - `errorKey`: queries/mutations name\n * - `error`: error that log to console in dev mode\n * - `errorMessage`: message that show in production mode\n */\nexport function returnError(errorKey: string, { error, errorMessage }, otherSettings?: { [key: string]: any }) {\n  if (process.env.NODE_ENV === 'development') {\n    console.error(`${errorKey} ERROR:`, error)\n  }\n  return newNotification(errorMessage, 'danger', otherSettings)\n}\n\nexport function returnNotification(\n  message: string = 'Empty message',\n  type: 'success' | 'danger' | 'info' | 'default' | 'warning' = 'info',\n  otherSettings?: { [key: string]: any }\n) {\n  store.addNotification({\n    message,\n    type,\n    insert: 'bottom',\n    container: 'bottom-center',\n    animationIn: ['animated', 'fadeIn'],\n    animationOut: ['animated', 'fadeOut'],\n    dismiss: { duration: 2500, showIcon: true },\n    ...otherSettings\n  })\n}\n\nexport function parseError(err: any) {\n  if (err && err.message && /^Network error:/.test(err.message)) {\n    return 'Error connect'\n  }\n\n  const message = err?.graphQLErrors?.map(er => er.message).join(',') || err?.message || 'Có lỗi xảy ra'\n  return message\n}\n\nexport function getProfile({\n  profiles,\n  userId,\n  roleCode,\n  nodeId\n}: {\n  profiles: any\n  userId: string\n  roleCode: string\n  nodeId: string\n}) {\n  return profiles.find(profile => {\n    // if\n    if (roleCode) {\n      if (profile?.role?.code !== roleCode) {\n        return false\n      }\n    }\n\n    if (nodeId !== undefined) {\n      if (nodeId === null && !profile.node) {\n        return false\n      }\n\n      if (profile?.node?._id !== nodeId) {\n        return false\n      }\n    }\n\n    return true\n  })\n}\n\nexport function hasPermissionInNode(profileNode: any, permission: string): boolean {\n  if (!profileNode || !profileNode?.role?.permissions?.some(per => per.code === permission)) {\n    return false\n  }\n  return true\n}\n\nexport function isSupperAdmin(profiles: any[]): boolean {\n  return profiles?.some(profile => profile?.role?.code === ROLE.R_SUPPERADMIN)\n}\n\nexport function isBotRecord(profiles: any[]): boolean {\n  return profiles?.some(profile => profile?.role?.code === ROLE.R_BOT_RECORD)\n}\n\nexport function hasPermission(profiles: any[], permission: string): boolean {\n  return profiles?.some(profile => profile?.role?.permissions?.some(per => per.code === permission))\n}\n\nexport const addslashes = (str: string) => `${str}`.replace(/[\\\\\"'\\(\\)\\[\\]]/g, '\\\\$&').replace(/\\u0000/g, '\\\\0')\n"]},"metadata":{},"sourceType":"module"}