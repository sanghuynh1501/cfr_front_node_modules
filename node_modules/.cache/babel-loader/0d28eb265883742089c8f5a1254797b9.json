{"ast":null,"code":"import _defineProperty from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/anonymousLink/index.jsx\";\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { inject, observer } from 'mobx-react';\nimport { withRouter } from 'react-router-dom';\nimport './index.less';\nimport { client, M_ANONYMOUS_JOIN_CONFERENCE } from '@graphql';\nimport FormInput from './FormInput';\nimport logo from \"../../misc/logo/asset9.svg\";\nimport errorIcon from \"@misc/images/toolbar/error.svg\";\nvar STATUS = {\n  INPUT: 'INPUT',\n  VERIFY: 'VERIFY',\n  ERROR: 'ERROR'\n};\nvar AnonymousLink = (_dec = inject(function (_ref) {\n  var stores = _ref.stores;\n  return stores;\n}), withRouter(_class = _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(AnonymousLink, _React$PureComponent);\n\n  var _super = _createSuper(AnonymousLink);\n\n  function AnonymousLink() {\n    var _this;\n\n    _classCallCheck(this, AnonymousLink);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      status: STATUS.INPUT\n    };\n\n    _this.backLogin = function () {\n      _this.props.history.push('/login');\n    };\n\n    _this.handleAnonymousJoinConference = function (data) {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          _assertThisInitialize2 = _assertThisInitialize.props,\n          globalState = _assertThisInitialize2.globalState,\n          match = _assertThisInitialize2.match; // MUTATION: CREATE CONFERENCE\n\n\n      client.mutate({\n        mutation: M_ANONYMOUS_JOIN_CONFERENCE,\n        variables: {\n          type: 'ANONYMOUS',\n          token: match.params.ID,\n          input: {\n            firstname: data.firstname,\n            lastname: data.lastname\n          }\n        }\n      }).then(function (_ref2) {\n        var anonymousJoinConference = _ref2.data.anonymousJoinConference;\n\n        if (anonymousJoinConference) {\n          globalState.auth(anonymousJoinConference.accessToken);\n\n          _this.props.history.push(\"/conference/\".concat(anonymousJoinConference.conferenceCode));\n        }\n      }).catch(function (error) {\n        globalState.clearStore();\n\n        _this.setState({\n          status: STATUS.ERROR\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AnonymousLink, [{\n    key: \"render\",\n    value: function render() {\n      var _renderElement;\n\n      var i18n = this.props.i18n;\n      var renderElement = (_renderElement = {}, _defineProperty(_renderElement, STATUS.INPUT, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper-form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(FormInput, {\n        handleAnonymousJoinConference: this.handleAnonymousJoinConference,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }\n      }))), _defineProperty(_renderElement, STATUS.VERIFY, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper-verify\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }\n      }, i18n.t('beingVerified')))), _defineProperty(_renderElement, STATUS.ERROR, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper-error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: errorIcon,\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }\n      }, i18n.t('verify.confirmFailed')), /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.backLogin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }\n      }, i18n.t('forgotPassword.goToLogin')))), _renderElement);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: logo,\n        alt: \"logo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }\n      }), renderElement[this.state.status]);\n    }\n  }]);\n\n  return AnonymousLink;\n}(React.PureComponent), _temp)) || _class) || _class) || _class);\nexport default withTranslation()(AnonymousLink);","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/anonymousLink/index.jsx"],"names":["React","withTranslation","inject","observer","withRouter","client","M_ANONYMOUS_JOIN_CONFERENCE","FormInput","STATUS","INPUT","VERIFY","ERROR","AnonymousLink","stores","state","status","backLogin","props","history","push","handleAnonymousJoinConference","data","globalState","match","mutate","mutation","variables","type","token","params","ID","input","firstname","lastname","then","anonymousJoinConference","auth","accessToken","conferenceCode","catch","error","clearStore","setState","i18n","renderElement","t","errorIcon","logo","PureComponent"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,eAAhC;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,YAAjC;AAEA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAO,cAAP;AAEA,SAASC,MAAT,EAAiBC,2BAAjB,QAAoD,UAApD;AAEA,OAAOC,SAAP,MAAsB,aAAtB;;;AAKA,IAAMC,MAAM,GAAG;AACbC,EAAAA,KAAK,EAAE,OADM;AAEbC,EAAAA,MAAM,EAAE,QAFK;AAGbC,EAAAA,KAAK,EAAE;AAHM,CAAf;IASMC,a,WAFLV,MAAM,CAAC;AAAA,MAAGW,MAAH,QAAGA,MAAH;AAAA,SAAgBA,MAAhB;AAAA,CAAD,C,EADNT,U,wBAEAD,Q;;;;;;;;;;;;;;;UAECW,K,GAAQ;AACNC,MAAAA,MAAM,EAAEP,MAAM,CAACC;AADT,K;;UAIRO,S,GAAY,YAAM;AAChB,YAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACA,K;;UAEFC,6B,GAAgC,UAACC,IAAD,EAAU;AAAA;AAAA,yDAEtCJ,KAFsC;AAAA,UAE7BK,WAF6B,0BAE7BA,WAF6B;AAAA,UAEhBC,KAFgB,0BAEhBA,KAFgB,EAKxC;;;AACAlB,MAAAA,MAAM,CACHmB,MADH,CACU;AACNC,QAAAA,QAAQ,EAAEnB,2BADJ;AAENoB,QAAAA,SAAS,EAAE;AACTC,UAAAA,IAAI,EAAE,WADG;AAETC,UAAAA,KAAK,EAAEL,KAAK,CAACM,MAAN,CAAaC,EAFX;AAGTC,UAAAA,KAAK,EAAE;AACLC,YAAAA,SAAS,EAAEX,IAAI,CAACW,SADX;AAELC,YAAAA,QAAQ,EAAEZ,IAAI,CAACY;AAFV;AAHE;AAFL,OADV,EAYGC,IAZH,CAYQ,iBAA2C;AAAA,YAAhCC,uBAAgC,SAAxCd,IAAwC,CAAhCc,uBAAgC;;AAC/C,YAAIA,uBAAJ,EAA6B;AAC3Bb,UAAAA,WAAW,CAACc,IAAZ,CAAiBD,uBAAuB,CAACE,WAAzC;;AACA,gBAAKpB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,uBACiBgB,uBAAuB,CAACG,cADzC;AAGD;AACF,OAnBH,EAoBGC,KApBH,CAoBS,UAAAC,KAAK,EAAI;AACdlB,QAAAA,WAAW,CAACmB,UAAZ;;AACA,cAAKC,QAAL,CAAc;AAAE3B,UAAAA,MAAM,EAAEP,MAAM,CAACG;AAAjB,SAAd;AACD,OAvBH;AAwBD,K;;;;;;;6BAEQ;AAAA;;AAAA,UAECgC,IAFD,GAEU,KAAK1B,KAFf,CAEC0B,IAFD;AAIP,UAAMC,aAAa,yDAChBpC,MAAM,CAACC,KADS,eAEf;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,SAAD;AAAW,QAAA,6BAA6B,EAAE,KAAKW,6BAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFe,mCAMhBZ,MAAM,CAACE,MANS,eAOf;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAIiC,IAAI,CAACE,CAAL,CAAO,eAAP,CAAJ,CAFF,CAPe,mCAYhBrC,MAAM,CAACG,KAZS,eAaf;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,GAAG,EAAEmC,SAAV;AAAqB,QAAA,GAAG,EAAC,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAIH,IAAI,CAACE,CAAL,CAAO,sBAAP,CAAJ,CAFF,eAGE;AAAQ,QAAA,IAAI,EAAC,SAAb;AAAuB,QAAA,OAAO,EAAE,KAAK7B,SAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiD2B,IAAI,CAACE,CAAL,CAAO,0BAAP,CAAjD,CAHF,CAbe,kBAAnB;AAqBA,0BACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,GAAG,EAAEE,IAAV;AAAgB,QAAA,GAAG,EAAC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAGIH,aAAa,CAAC,KAAK9B,KAAL,CAAWC,MAAZ,CAHjB,CADF;AAQD;;;;EA1EyBf,KAAK,CAACgD,a;AA6ElC,eAAe/C,eAAe,GAAGW,aAAH,CAA9B","sourcesContent":["import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { inject, observer } from 'mobx-react'\nimport { Button } from 'antd'\nimport { withRouter } from 'react-router-dom'\nimport './index.less'\n\nimport { client, M_ANONYMOUS_JOIN_CONFERENCE } from '@graphql'\n\nimport FormInput from './FormInput'\n\nimport logo from '../../misc/logo/asset9.svg'\nimport errorIcon from '@misc/images/toolbar/error.svg'\n\nconst STATUS = {\n  INPUT: 'INPUT',\n  VERIFY: 'VERIFY',\n  ERROR: 'ERROR'\n}\n\n@withRouter\n@inject(({ stores }) => stores)\n@observer\nclass AnonymousLink extends React.PureComponent {\n  state = {\n    status: STATUS.INPUT\n  }\n\n  backLogin = () => {\n    this.props.history.push('/login')\n   }\n\n  handleAnonymousJoinConference = (data) => {\n    const {\n      props: { globalState, match }\n    } = this\n\n    // MUTATION: CREATE CONFERENCE\n    client\n      .mutate({\n        mutation: M_ANONYMOUS_JOIN_CONFERENCE,\n        variables: {\n          type: 'ANONYMOUS',\n          token: match.params.ID,\n          input: {\n            firstname: data.firstname,\n            lastname: data.lastname\n          }\n        }\n      })\n      .then(({ data: { anonymousJoinConference } }) => {\n        if (anonymousJoinConference) {\n          globalState.auth(anonymousJoinConference.accessToken)\n          this.props.history.push(\n            `/conference/${anonymousJoinConference.conferenceCode}`\n          )\n        }\n      })\n      .catch(error => {\n        globalState.clearStore()\n        this.setState({ status: STATUS.ERROR })\n      })\n  }\n\n  render() {\n\n    const { i18n } = this.props\n\n    const renderElement = {\n      [STATUS.INPUT]: (\n        <div className='wrapper-form'>\n          <FormInput handleAnonymousJoinConference={this.handleAnonymousJoinConference} />\n        </div>\n      ),\n      [STATUS.VERIFY]: (\n        <div className='wrapper-verify'>\n          <div className='loading'></div>\n          <p>{i18n.t('beingVerified')}</p>\n        </div>\n      ),\n      [STATUS.ERROR]: (\n        <div className='wrapper-error'>\n          <img src={errorIcon} alt='icon' />\n          <p>{i18n.t('verify.confirmFailed')}</p>\n          <Button type='primary' onClick={this.backLogin}>{i18n.t('forgotPassword.goToLogin')}</Button>\n        </div>\n      )\n    }\n\n    return (\n      <div className='container'>\n        <img src={logo} alt='logo' />\n        {\n          renderElement[this.state.status]\n        }\n      </div>\n    )\n  }\n}\n\nexport default withTranslation()(AnonymousLink)"]},"metadata":{},"sourceType":"module"}