{"ast":null,"code":"import \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/switch/style\";\nimport _Switch from \"antd/es/switch\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/tooltip/style\";\nimport _Tooltip from \"antd/es/tooltip\";\nimport _toConsumableArray from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/dashboard/conferenceDetail/StatisticComponents/AttendancesStatistic.jsx\";\nimport React, { Component } from 'react';\nimport client, { Q_ATTENDANCES } from '@graphql';\nimport { returnError } from '@utils';\nimport moment from 'moment';\nimport AttendancesDetail from './AttendancesDetail';\n\nvar AttendancesStatistic = /*#__PURE__*/function (_Component) {\n  _inherits(AttendancesStatistic, _Component);\n\n  var _super = _createSuper(AttendancesStatistic);\n\n  function AttendancesStatistic() {\n    var _this;\n\n    _classCallCheck(this, AttendancesStatistic);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      doneAttendances: [],\n      displayByUser: false\n    };\n\n    _this.checkAttended = function (userId, index, doneAttendances) {\n      return doneAttendances.map(function (e) {\n        return e.userAttendances.some(function (e) {\n          return e.isAttended && e.user._id === userId;\n        });\n      })[index];\n    };\n\n    _this.generateObject = function (conferenceUsers, doneAttendances) {\n      var temp = conferenceUsers.map(function (ele, index) {\n        return {\n          index: index,\n          fullName: \"\".concat(ele.user.firstname + ' ' + ele.user.lastname)\n        };\n      });\n\n      var _loop = function _loop(index) {\n        temp = temp.map(function (element, i) {\n          return _objectSpread({}, element, {}, _defineProperty({}, \"doneAtt-\".concat(index), _this.checkAttended(conferenceUsers[i].user._id, index, doneAttendances)));\n        });\n      };\n\n      for (var index = 0; index < doneAttendances.length; index++) {\n        _loop(index);\n      }\n\n      return temp;\n    };\n\n    _this.queryAttendances = function () {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          conferenceId = _assertThisInitialize.props.conferenceId;\n\n      return client.query({\n        query: Q_ATTENDANCES,\n        variables: {\n          conferenceId: conferenceId\n        },\n        fetchPolicy: 'network-only'\n      }).then(function (_ref) {\n        var attendances = _ref.data.attendances;\n\n        if (attendances.length !== 0) {\n          _this.setState({\n            doneAttendances: attendances.filter(function (e) {\n              return !e.isActive;\n            })\n          });\n        }\n      }).catch(function (error) {\n        return returnError('Query queryAttendances', {\n          error: error,\n          errorMessage: 'Cannot get queryAttendances data!'\n        });\n      });\n    };\n\n    _this.componentDidMount = function () {\n      _this.queryAttendances();\n    };\n\n    return _this;\n  }\n\n  _createClass(AttendancesStatistic, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var conferenceUsers = this.props.conferenceUsers,\n          _this$state = this.state,\n          doneAttendances = _this$state.doneAttendances,\n          displayByUser = _this$state.displayByUser;\n      var rowsData = displayByUser ? this.generateObject(conferenceUsers, doneAttendances) : doneAttendances.map(function (ele, index) {\n        return {\n          index: index,\n          numberOfAttendants: \"\".concat(ele.userAttendances.filter(function (e) {\n            return e.isAttended;\n          }).length, \"/\").concat(conferenceUsers.length),\n          createdAt: ele.createdAt\n        };\n      });\n      var columns = displayByUser ? [{\n        title: 'Họ và Tên',\n        dataIndex: 'fullName',\n        key: 'fullName',\n        width: 150,\n        fixed: 'left',\n        ellipsis: true\n      }].concat(_toConsumableArray(doneAttendances.map(function (doneAttendance, index) {\n        return {\n          title: /*#__PURE__*/React.createElement(_Tooltip, {\n            title: moment(doneAttendance.createdAt).format('DD[/]MM[/]YYYY, HH:mm'),\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }\n          }, \"L\\u1EA7n \", index + 1),\n          dataIndex: \"doneAtt-\".concat(index),\n          key: \"doneAtt-\".concat(index),\n          width: 70,\n          className: 'checkedAttend',\n          render: function render(bool) {\n            return /*#__PURE__*/React.createElement(\"span\", {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 29\n              }\n            }, bool && /*#__PURE__*/React.createElement(_Icon, {\n              type: \"check\",\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 44\n              }\n            }));\n          }\n        };\n      }))) : [{\n        title: 'STT',\n        dataIndex: 'index',\n        className: 'index',\n        key: 'index',\n        render: function render(index) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 30\n            }\n          }, index + 1);\n        }\n      }, {\n        title: 'Thời gian',\n        dataIndex: 'createdAt',\n        key: 'createdAt',\n        render: function render(date) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 29\n            }\n          }, moment(date).format('DD[/]MM[/]YYYY, HH:mm'));\n        }\n      }, {\n        title: 'Sỉ số',\n        dataIndex: 'numberOfAttendants',\n        className: 'numberOfAttendants',\n        key: 'numberOfAttendants',\n        width: 100\n      }];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"attendancesStatistic\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"switchHolder\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }\n      }, \"Ch\\u1EBF \\u0111\\u1ED9 xem:\", /*#__PURE__*/React.createElement(_Switch, {\n        onChange: function onChange(displayByUser) {\n          return _this2.setState({\n            displayByUser: displayByUser\n          });\n        },\n        checkedChildren: /*#__PURE__*/React.createElement(_Icon, {\n          type: \"user\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 30\n          }\n        }),\n        unCheckedChildren: /*#__PURE__*/React.createElement(_Icon, {\n          type: \"calendar\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 32\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }\n      })), displayByUser ? /*#__PURE__*/React.createElement(_Table, {\n        scroll: {\n          y: '100%',\n          x: 70\n        },\n        size: 'small',\n        pagination: false,\n        columns: columns,\n        dataSource: rowsData,\n        rowKey: \"index\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }\n      }) : /*#__PURE__*/React.createElement(_Table, {\n        size: 'small',\n        pagination: false,\n        expandedRowRender: function expandedRowRender(record, index, indent, expanded) {\n          return /*#__PURE__*/React.createElement(AttendancesDetail, {\n            conferenceUsers: conferenceUsers,\n            attendanceInfo: doneAttendances[index],\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }\n          });\n        },\n        columns: columns,\n        dataSource: rowsData,\n        rowKey: \"index\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }\n      }));\n    }\n  }]);\n\n  return AttendancesStatistic;\n}(Component);\n\nexport default AttendancesStatistic;","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/dashboard/conferenceDetail/StatisticComponents/AttendancesStatistic.jsx"],"names":["React","Component","client","Q_ATTENDANCES","returnError","moment","AttendancesDetail","AttendancesStatistic","state","doneAttendances","displayByUser","checkAttended","userId","index","map","e","userAttendances","some","isAttended","user","_id","generateObject","conferenceUsers","temp","ele","fullName","firstname","lastname","element","i","length","queryAttendances","conferenceId","props","query","variables","fetchPolicy","then","attendances","data","setState","filter","isActive","catch","error","errorMessage","componentDidMount","rowsData","numberOfAttendants","createdAt","columns","title","dataIndex","key","width","fixed","ellipsis","doneAttendance","format","className","render","bool","date","y","x","record","indent","expanded"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport client, { Q_ATTENDANCES } from '@graphql'\nimport { Table, Icon, Tooltip, Switch } from 'antd'\nimport { returnError } from '@utils'\nimport moment from 'moment'\n\nimport AttendancesDetail from './AttendancesDetail'\n\nclass AttendancesStatistic extends Component {\n  state = {\n    doneAttendances: [],\n    displayByUser: false\n  }\n\n  checkAttended = (userId, index, doneAttendances) =>\n    doneAttendances.map(e =>\n      e.userAttendances.some(e => {\n        return e.isAttended && e.user._id === userId\n      })\n    )[index]\n\n  generateObject = (conferenceUsers, doneAttendances) => {\n    let temp = conferenceUsers.map((ele, index) => ({\n      index,\n      fullName: `${ele.user.firstname + ' ' + ele.user.lastname}`\n    }))\n\n    for (let index = 0; index < doneAttendances.length; index++) {\n      temp = temp.map((element, i) => ({\n        ...element,\n        ...{ [`doneAtt-${index}`]: this.checkAttended(conferenceUsers[i].user._id, index, doneAttendances) }\n      }))\n    }\n\n    return temp\n  }\n\n  queryAttendances = () => {\n    const {\n      props: { conferenceId }\n    } = this\n    return client\n      .query({\n        query: Q_ATTENDANCES,\n        variables: { conferenceId },\n        fetchPolicy: 'network-only'\n      })\n      .then(({ data: { attendances } }) => {\n        if (attendances.length !== 0) {\n          this.setState({ doneAttendances: attendances.filter(e => !e.isActive) })\n        }\n      })\n      .catch(error =>\n        returnError('Query queryAttendances', {\n          error,\n          errorMessage: 'Cannot get queryAttendances data!'\n        })\n      )\n  }\n\n  componentDidMount = () => {\n    this.queryAttendances()\n  }\n\n  render() {\n    const {\n      props: { conferenceUsers },\n      state: { doneAttendances, displayByUser }\n    } = this\n\n    const rowsData = displayByUser\n      ? this.generateObject(conferenceUsers, doneAttendances)\n      : doneAttendances.map((ele, index) => ({\n          index,\n          numberOfAttendants: `${ele.userAttendances.filter(e => e.isAttended).length}/${conferenceUsers.length}`,\n          createdAt: ele.createdAt\n        }))\n\n    const columns = displayByUser\n      ? [\n          {\n            title: 'Họ và Tên',\n            dataIndex: 'fullName',\n            key: 'fullName',\n            width: 150,\n            fixed: 'left',\n            ellipsis: true\n          },\n          ...doneAttendances.map((doneAttendance, index) => ({\n            title: (\n              <Tooltip title={moment(doneAttendance.createdAt).format('DD[/]MM[/]YYYY, HH:mm')}>\n                Lần {index + 1}\n              </Tooltip>\n            ),\n            dataIndex: `doneAtt-${index}`,\n            key: `doneAtt-${index}`,\n            width: 70,\n            className: 'checkedAttend',\n            render: bool => <span>{bool && <Icon type='check' />}</span>\n          }))\n        ]\n      : [\n          {\n            title: 'STT',\n            dataIndex: 'index',\n            className: 'index',\n            key: 'index',\n            render: index => <span>{index + 1}</span>\n          },\n          {\n            title: 'Thời gian',\n            dataIndex: 'createdAt',\n            key: 'createdAt',\n            render: date => <span>{moment(date).format('DD[/]MM[/]YYYY, HH:mm')}</span>\n          },\n          {\n            title: 'Sỉ số',\n            dataIndex: 'numberOfAttendants',\n            className: 'numberOfAttendants',\n            key: 'numberOfAttendants',\n            width: 100\n          }\n        ]\n\n    return (\n      <div className='attendancesStatistic'>\n        <div className='switchHolder'>\n          Chế độ xem:\n          <Switch\n            onChange={displayByUser => this.setState({ displayByUser })}\n            checkedChildren={<Icon type='user' />}\n            unCheckedChildren={<Icon type='calendar' />}\n          />\n        </div>\n        {displayByUser ? (\n          <Table\n            scroll={{ y: '100%', x: 70 }}\n            size={'small'}\n            pagination={false}\n            columns={columns}\n            dataSource={rowsData}\n            rowKey='index'\n          />\n        ) : (\n          <Table\n            size={'small'}\n            pagination={false}\n            expandedRowRender={(record, index, indent, expanded) => (\n              <AttendancesDetail conferenceUsers={conferenceUsers} attendanceInfo={doneAttendances[index]} />\n            )}\n            columns={columns}\n            dataSource={rowsData}\n            rowKey='index'\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default AttendancesStatistic\n"]},"metadata":{},"sourceType":"module"}