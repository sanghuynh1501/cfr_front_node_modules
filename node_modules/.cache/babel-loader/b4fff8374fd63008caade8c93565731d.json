{"ast":null,"code":"import \"antd/es/breadcrumb/style\";\nimport _Breadcrumb from \"antd/es/breadcrumb\";\nimport _defineProperty from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport \"antd/es/tabs/style\";\nimport _Tabs from \"antd/es/tabs\";\nvar _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/dashboard/webinars/index.jsx\";\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport ReactNotification from 'react-notifications-component';\nimport moment from 'moment';\nimport { client, Q_WEBINARS, M_DELETE_WEBINAR, Q_WEBINAR_TEMPLATES, M_DELETE_WEBINAR_TEMPLATE } from '@graphql';\nimport { returnError, newNotification } from '@utils';\nimport WebinarComponent from './Webinar';\nimport CreateWebinar from './CreateWebinar';\nimport DetailWebinar from './DetailWebinar';\nimport DetailWebinarTemplate from './DetailWebinarTemplate';\nimport WebinarTemplateComponent from './WebinarTemplate';\nimport EditWebinar from './EditWebinar';\nvar TabPane = _Tabs.TabPane;\nexport var DISPLAY = {\n  DETAIL: 'DETAIL',\n  CREATE: 'CREATE',\n  DEFAULT: 'DEFAULT',\n  TEMPLATE: 'TEMPLATE',\n  EDIT: 'EDIT'\n};\n\nvar Webinar = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Webinar, _React$PureComponent);\n\n  var _super = _createSuper(Webinar);\n\n  function Webinar() {\n    var _this;\n\n    _classCallCheck(this, Webinar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      webinars: [],\n      display: DISPLAY.DEFAULT,\n      breadcrumbPath: ['My Webinars'],\n      webinarSelect: [],\n      webinarTemplates: [],\n      selectedTemplate: null\n    };\n\n    _this.queryWebinars = function () {\n      client.query({\n        query: Q_WEBINARS,\n        fetchPolicy: 'network-only'\n      }).then(function (_ref) {\n        var webinars = _ref.data.webinars;\n\n        _this.setState({\n          webinars: webinars\n        });\n      }).catch(function (error) {\n        return returnError('Get webinars', {\n          error: error,\n          errorMessage: 'Cannot get webinar list, try again later!'\n        }, {\n          container: 'top-center'\n        });\n      });\n    };\n\n    _this.queryWebinarTemplates = function () {\n      client.query({\n        query: Q_WEBINAR_TEMPLATES,\n        fetchPolicy: 'network-only'\n      }).then(function (_ref2) {\n        var webinarTemplates = _ref2.data.webinarTemplates;\n\n        _this.setState({\n          webinarTemplates: webinarTemplates\n        });\n      }).catch(function (error) {\n        return returnError('Get webinar templates', {\n          error: error,\n          errorMessage: 'Cannot get webinar template list, try again later!'\n        }, {\n          container: 'top-center'\n        });\n      });\n    };\n\n    _this.handleSelectWebinar = function (webinar) {\n      var temp = _this.state.breadcrumbPath;\n      temp.push(\"Manage \\\"\".concat(webinar.name, \"\\\"\"));\n\n      _this.setState(function (_prevState) {\n        return {\n          display: 'DETAIL',\n          breadcrumbPath: temp,\n          webinarSelect: webinar\n        };\n      });\n    };\n\n    _this.handleDeleteItem = function (_id) {\n      client.mutate({\n        mutation: M_DELETE_WEBINAR,\n        variables: {\n          webinarId: _id\n        }\n      }).then(function (_ref3) {\n        var deleteWebinar = _ref3.data.deleteWebinar;\n\n        if (deleteWebinar) {\n          _this.queryWebinars();\n\n          _this.backToDefault();\n\n          return newNotification('Conference is deleted successfully!', 'success', {\n            container: 'top-right'\n          });\n        }\n      }).catch(function (error) {\n        return returnError('Delete Conference', {\n          error: error,\n          errorMessage: 'Can not delete conference, try again later!'\n        }, {\n          container: 'top-right'\n        });\n      });\n    };\n\n    _this.handleDeleteTemplate = function (_id) {\n      client.mutate({\n        mutation: M_DELETE_WEBINAR_TEMPLATE,\n        variables: {\n          webinarTeamplateId: _id\n        }\n      }).then(function (_ref4) {\n        var deleteWebinarTemplate = _ref4.data.deleteWebinarTemplate;\n\n        if (deleteWebinarTemplate) {\n          _this.queryWebinarTemplates();\n\n          return newNotification('Conference is deleted successfully!', 'success', {\n            container: 'top-right'\n          });\n        }\n      }).catch(function (error) {\n        return returnError('Delete Conference', {\n          error: error,\n          errorMessage: 'Can not delete conference, try again later!'\n        }, {\n          container: 'top-right'\n        });\n      });\n    };\n\n    _this.handleChangeDisplay = function (display, link) {\n      var temp = _this.state.breadcrumbPath;\n      temp.push(link);\n\n      _this.setState(function (_prevState) {\n        return {\n          display: display,\n          breadcrumbPath: temp\n        };\n      });\n    };\n\n    _this.backToDefault = function () {\n      _this.setState({\n        breadcrumbPath: ['My Webinars'],\n        display: DISPLAY.DEFAULT,\n        selectedTemplate: null\n      });\n    };\n\n    _this.handleJoinConference = function (e) {\n      window.open(\"\".concat(window.location.origin, \"/cfr/conference/\").concat(e));\n    };\n\n    _this.handleChangeSelectedTemplate = function (e) {\n      _this.setState({\n        selectedTemplate: e\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Webinar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.queryWebinars();\n      this.queryWebinarTemplates();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _switchComponent,\n          _this2 = this;\n\n      var i18n = this.props.i18n;\n      var switchComponent = (_switchComponent = {}, _defineProperty(_switchComponent, DISPLAY.CREATE, /*#__PURE__*/React.createElement(CreateWebinar, {\n        backToDefault: this.backToDefault,\n        refetch: this.queryWebinars,\n        webinarTemplates: this.state.webinarTemplates,\n        selectedTemplate: this.state.selectedTemplate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 9\n        }\n      })), _defineProperty(_switchComponent, DISPLAY.DETAIL, /*#__PURE__*/React.createElement(DetailWebinar, {\n        webinar: this.state.webinarSelect,\n        queryWebinarTemplates: this.queryWebinarTemplates,\n        handleChangeDisplay: this.handleChangeDisplay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      })), _defineProperty(_switchComponent, DISPLAY.TEMPLATE, /*#__PURE__*/React.createElement(DetailWebinarTemplate, {\n        handleChangeDisplay: this.handleChangeDisplay,\n        selectedTemplate: this.state.selectedTemplate,\n        handleChangeSelectedTemplate: this.handleChangeSelectedTemplate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 9\n        }\n      })), _defineProperty(_switchComponent, DISPLAY.EDIT, /*#__PURE__*/React.createElement(EditWebinar, {\n        handleChangeDisplay: this.handleChangeDisplay,\n        webinarSelect: this.state.webinarSelect,\n        backToDefault: this.backToDefault,\n        refetch: this.queryWebinars,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 9\n        }\n      })), _defineProperty(_switchComponent, DISPLAY.DEFAULT, /*#__PURE__*/React.createElement(_Tabs, {\n        className: \"conferenceTabs\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(TabPane, {\n        tab: i18n.t('upcomingWebinar'),\n        key: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(WebinarComponent, {\n        webinars: this.state.webinars.filter(function (e) {\n          return moment().isBefore(e.startAt + e.startDate);\n        }),\n        handleChangeDisplay: this.handleChangeDisplay,\n        handleJoinConference: this.handleJoinConference,\n        handleSelectWebinar: this.handleSelectWebinar,\n        handleDeleteItem: this.handleDeleteItem,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(TabPane, {\n        tab: i18n.t('previousWebinar'),\n        key: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(WebinarComponent, {\n        webinars: this.state.webinars.filter(function (e) {\n          return moment().isAfter(e.startAt + e.startDate) && e.startAt !== 0;\n        }),\n        handleChangeDisplay: this.handleChangeDisplay,\n        handleJoinConference: this.handleJoinConference,\n        handleSelectWebinar: this.handleSelectWebinar,\n        handleDeleteItem: this.handleDeleteItem,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(TabPane, {\n        tab: i18n.t('templateWebinar'),\n        key: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(WebinarTemplateComponent, {\n        handleChangeSelectedTemplate: this.handleChangeSelectedTemplate,\n        handleChangeDisplay: this.handleChangeDisplay,\n        webinarTemplates: this.state.webinarTemplates,\n        handleDeleteTemplate: this.handleDeleteTemplate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }\n      })))), _switchComponent);\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper-notification\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ReactNotification, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }\n      })), this.state.breadcrumbPath.length !== 1 && /*#__PURE__*/React.createElement(_Breadcrumb, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }\n      }, this.state.breadcrumbPath.map(function (e, i) {\n        return /*#__PURE__*/React.createElement(_Breadcrumb.Item, {\n          key: i,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }\n        }, e === 'My Webinars' ? /*#__PURE__*/React.createElement(\"span\", {\n          className: \"clickableSpan\",\n          onClick: _this2.backToDefault,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 19\n          }\n        }, e) : /*#__PURE__*/React.createElement(\"span\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 21\n          }\n        }, e));\n      })), switchComponent[this.state.display]);\n    }\n  }]);\n\n  return Webinar;\n}(React.PureComponent);\n\nexport default withTranslation()(Webinar);","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/dashboard/webinars/index.jsx"],"names":["React","withTranslation","ReactNotification","moment","client","Q_WEBINARS","M_DELETE_WEBINAR","Q_WEBINAR_TEMPLATES","M_DELETE_WEBINAR_TEMPLATE","returnError","newNotification","WebinarComponent","CreateWebinar","DetailWebinar","DetailWebinarTemplate","WebinarTemplateComponent","EditWebinar","TabPane","DISPLAY","DETAIL","CREATE","DEFAULT","TEMPLATE","EDIT","Webinar","state","webinars","display","breadcrumbPath","webinarSelect","webinarTemplates","selectedTemplate","queryWebinars","query","fetchPolicy","then","data","setState","catch","error","errorMessage","container","queryWebinarTemplates","handleSelectWebinar","webinar","temp","push","name","_prevState","handleDeleteItem","_id","mutate","mutation","variables","webinarId","deleteWebinar","backToDefault","handleDeleteTemplate","webinarTeamplateId","deleteWebinarTemplate","handleChangeDisplay","link","handleJoinConference","e","window","open","location","origin","handleChangeSelectedTemplate","i18n","props","switchComponent","t","filter","isBefore","startAt","startDate","isAfter","length","map","i","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Tabs, Breadcrumb } from 'antd'\nimport { withTranslation } from 'react-i18next'\nimport ReactNotification from 'react-notifications-component'\nimport moment from 'moment'\n\nimport { \n  client, \n  Q_WEBINARS, \n  M_DELETE_WEBINAR, \n  Q_WEBINAR_TEMPLATES, \n  M_DELETE_WEBINAR_TEMPLATE \n} from '@graphql'\nimport { returnError, newNotification } from '@utils'\n\nimport WebinarComponent from './Webinar'\nimport CreateWebinar from './CreateWebinar'\nimport DetailWebinar from './DetailWebinar'\nimport DetailWebinarTemplate from './DetailWebinarTemplate'\nimport WebinarTemplateComponent from './WebinarTemplate'\nimport EditWebinar from './EditWebinar'\n\nconst { TabPane } = Tabs\n\nexport const DISPLAY = {\n  DETAIL: 'DETAIL',\n  CREATE: 'CREATE',\n  DEFAULT: 'DEFAULT',\n  TEMPLATE: 'TEMPLATE',\n  EDIT: 'EDIT'\n}\n\nclass Webinar extends React.PureComponent {\n  state = {\n    webinars: [],\n    display: DISPLAY.DEFAULT,\n    breadcrumbPath: ['My Webinars'],\n    webinarSelect: [],\n    webinarTemplates: [],\n    selectedTemplate: null\n  }\n\n  componentDidMount() {\n    this.queryWebinars()\n    this.queryWebinarTemplates()\n  }\n\n  queryWebinars = () => {\n    client\n      .query({\n        query: Q_WEBINARS,\n        fetchPolicy: 'network-only'\n      })\n      .then(({ data: { webinars } }) => {\n        this.setState({ webinars })\n      })\n      .catch(error =>\n        returnError(\n          'Get webinars',\n          {\n            error,\n            errorMessage: 'Cannot get webinar list, try again later!'\n          },\n          { container: 'top-center' }\n        )\n      )\n  }\n\n  queryWebinarTemplates = () => {\n    client\n      .query({\n        query: Q_WEBINAR_TEMPLATES,\n        fetchPolicy: 'network-only'\n      })\n      .then(({ data: { webinarTemplates } }) => {\n        this.setState({ webinarTemplates })\n      })\n      .catch(error =>\n        returnError(\n          'Get webinar templates',\n          {\n            error,\n            errorMessage: 'Cannot get webinar template list, try again later!'\n          },\n          { container: 'top-center' }\n        )\n      )\n  }\n\n  handleSelectWebinar = webinar => {\n    let temp = this.state.breadcrumbPath\n    temp.push(`Manage \"${webinar.name}\"`)\n\n    this.setState(_prevState => ({\n      display: 'DETAIL',\n      breadcrumbPath: temp,\n      webinarSelect: webinar\n    }))\n  }\n\n  handleDeleteItem = _id => {\n    client\n      .mutate({\n        mutation: M_DELETE_WEBINAR,\n        variables: { webinarId: _id }\n      })\n      .then(({ data: { deleteWebinar } }) => {\n        if (deleteWebinar) {\n          this.queryWebinars()\n          this.backToDefault()\n          return newNotification(\n            'Conference is deleted successfully!',\n            'success',\n            { container: 'top-right' }\n          )\n        }\n      })\n      .catch(error =>\n        returnError(\n          'Delete Conference',\n          {\n            error,\n            errorMessage: 'Can not delete conference, try again later!'\n          },\n          { container: 'top-right' }\n        )\n      )\n  }\n\n  handleDeleteTemplate = _id => {\n    client\n      .mutate({\n        mutation: M_DELETE_WEBINAR_TEMPLATE,\n        variables: { webinarTeamplateId: _id }\n      })\n      .then(({ data: { deleteWebinarTemplate } }) => {\n        if (deleteWebinarTemplate) {\n          this.queryWebinarTemplates()\n          return newNotification(\n            'Conference is deleted successfully!',\n            'success',\n            { container: 'top-right' }\n          )\n        }\n      })\n      .catch(error =>\n        returnError(\n          'Delete Conference',\n          {\n            error,\n            errorMessage: 'Can not delete conference, try again later!'\n          },\n          { container: 'top-right' }\n        )\n      )\n  }\n\n  handleChangeDisplay = (display, link) => {\n    let temp = this.state.breadcrumbPath\n    temp.push(link)\n    \n    this.setState(_prevState => ({ display, breadcrumbPath: temp }))\n  }\n\n  backToDefault = () => {\n    this.setState({\n      breadcrumbPath: ['My Webinars'],\n      display: DISPLAY.DEFAULT,\n      selectedTemplate: null\n    })\n  }\n\n  handleJoinConference = e => {\n    window.open(`${window.location.origin}/cfr/conference/${e}`)\n  }\n\n  handleChangeSelectedTemplate = (e) => {\n    this.setState({ selectedTemplate: e })\n  }\n\n  render() {\n    const {\n      i18n\n    } = this.props\n    const switchComponent = {\n      [DISPLAY.CREATE]: (\n        <CreateWebinar\n          backToDefault={this.backToDefault}\n          refetch={this.queryWebinars}\n          webinarTemplates={this.state.webinarTemplates}\n          selectedTemplate={this.state.selectedTemplate}\n        />\n      ),\n      [DISPLAY.DETAIL]: (\n        <DetailWebinar \n          webinar={this.state.webinarSelect} \n          queryWebinarTemplates={this.queryWebinarTemplates}\n          handleChangeDisplay={this.handleChangeDisplay}\n        />\n      ),\n      [DISPLAY.TEMPLATE]: (\n        <DetailWebinarTemplate \n          handleChangeDisplay={this.handleChangeDisplay} \n          selectedTemplate={this.state.selectedTemplate}\n          handleChangeSelectedTemplate={this.handleChangeSelectedTemplate}\n        />\n      ),\n      [DISPLAY.EDIT]: (\n        <EditWebinar \n          handleChangeDisplay={this.handleChangeDisplay} \n          webinarSelect={this.state.webinarSelect} \n          backToDefault={this.backToDefault}\n          refetch={this.queryWebinars}\n        />\n      ),\n      [DISPLAY.DEFAULT]: (\n        <Tabs className='conferenceTabs'>\n          <TabPane tab={i18n.t('upcomingWebinar')} key='1'>\n            <WebinarComponent\n              webinars={this.state.webinars.filter(e =>\n                moment().isBefore(e.startAt + e.startDate)\n              )}\n              handleChangeDisplay={this.handleChangeDisplay}\n              handleJoinConference={this.handleJoinConference}\n              handleSelectWebinar={this.handleSelectWebinar}\n              handleDeleteItem={this.handleDeleteItem}\n            />\n          </TabPane>\n          <TabPane tab={i18n.t('previousWebinar')} key='2'>\n            <WebinarComponent\n              webinars={this.state.webinars.filter(\n                e => moment().isAfter(e.startAt + e.startDate) && e.startAt !== 0\n              )}\n              handleChangeDisplay={this.handleChangeDisplay}\n              handleJoinConference={this.handleJoinConference}\n              handleSelectWebinar={this.handleSelectWebinar}\n              handleDeleteItem={this.handleDeleteItem}\n            />\n          </TabPane>\n          <TabPane tab={i18n.t('templateWebinar')} key='3'>\n            <WebinarTemplateComponent\n              handleChangeSelectedTemplate={this.handleChangeSelectedTemplate}\n              handleChangeDisplay={this.handleChangeDisplay}\n              webinarTemplates={this.state.webinarTemplates}\n              handleDeleteTemplate={this.handleDeleteTemplate}\n            />\n          </TabPane>\n        </Tabs>\n      )\n    }\n\n    return (\n      <>\n        <div className='wrapper-notification'>\n          <ReactNotification />\n        </div>\n        {this.state.breadcrumbPath.length !== 1 && (\n          <Breadcrumb>\n            {this.state.breadcrumbPath.map((e, i) => (\n              <Breadcrumb.Item key={i}>\n                {e === 'My Webinars' ? (\n                  <span className='clickableSpan' onClick={this.backToDefault}>\n                    {e}\n                  </span>\n                ) : (\n                    <span>{e}</span>\n                  )}\n              </Breadcrumb.Item>\n            ))}\n          </Breadcrumb>\n        )}\n        {switchComponent[this.state.display]}\n      </>\n    )\n  }\n}\n\nexport default withTranslation()(Webinar)\n"]},"metadata":{},"sourceType":"module"}