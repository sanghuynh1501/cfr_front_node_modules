{"ast":null,"code":"import \"antd/es/dropdown/style\";\nimport _Dropdown from \"antd/es/dropdown\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/menu/style\";\nimport _Menu from \"antd/es/menu\";\nimport \"antd/es/tooltip/style\";\nimport _Tooltip from \"antd/es/tooltip\";\nimport _objectSpread from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/conference2/collab-panel/Participants.jsx\";\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { inject, observer } from 'mobx-react';\nimport { appConstants, checkPermission, _userStatus } from '@constants';\nimport { AvatarComponent } from '@components';\nimport { client, M_CONFFERENCE_SET_USER_ROLE, M_KICK_CONFERENCE_USER, M_CHANGE_STATUS_USER, M_UPDATE_MUTE_POLICY } from '@graphql';\nimport { returnError, addslashes, newNotification } from '@utils';\nimport dataIcon from \"@misc/images/action/data.svg\";\nimport pinUser from \"@misc/images/ngocly/pin-icon.svg\";\nimport pinnedIcon from \"@misc/images/toolbar/pinned.svg\";\nimport headphone from \"@misc/images/ngocly/headphone.svg\";\nimport camera from \"@misc/images/ngocly/camera.svg\";\nimport cameraOff from \"@misc/images/ngocly/cameraOff.svg\";\nimport micro from \"@misc/images/ngocly/micro.svg\";\nimport microOff from \"@misc/images/ngocly/microOff.svg\";\nimport logoIcon from \"@misc/images/menu/logo.svg\";\nimport moreIcon from \"@misc/images/menu/more.svg\";\nimport noSoundBlack from \"@misc/images/action/no-sound_black.svg\";\nimport { toJS } from 'mobx';\nvar ROLE = appConstants.ROLE,\n    MUTE_POLICY = appConstants.MUTE_POLICY;\nvar Search = _Input.Search;\nvar ParticipantsCollapse = (_dec = inject(function (_ref) {\n  var stores = _ref.stores;\n  return stores;\n}), _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_React$Component) {\n  _inherits(ParticipantsCollapse, _React$Component);\n\n  var _super = _createSuper(ParticipantsCollapse);\n\n  function ParticipantsCollapse(props) {\n    var _this;\n\n    _classCallCheck(this, ParticipantsCollapse);\n\n    _this = _super.call(this, props);\n\n    _this.isConferenceOwner = function () {\n      return _this.props.conferenceState.myRole === ROLE.OWNER;\n    };\n\n    _this.handleCloseContext = function () {\n      _this.refs['menu-context'].style.display = 'none';\n    };\n\n    _this.getUserDisplayNameFromJID = function (jid) {\n      var userFound = _this.props.jitsiStore.participants.find(function (_ref2) {\n        var id = _ref2.id;\n        return id === jid;\n      });\n\n      if (userFound && userFound.displayName) return userFound.displayName;\n      return '';\n    };\n\n    _this.handleSetRole = function (roleId) {\n      var userDisplayName = _this.getUserDisplayNameFromJID(_this.state.idTarget);\n\n      if (userDisplayName) {\n        var _userDisplayName$spli = userDisplayName.split('|'),\n            _userDisplayName$spli2 = _slicedToArray(_userDisplayName$spli, 1),\n            userId = _userDisplayName$spli2[0];\n\n        client.mutate({\n          mutation: M_CONFFERENCE_SET_USER_ROLE,\n          variables: {\n            conferenceId: _this.props.conferenceState.conference._id,\n            userId: userId,\n            roleId: roleId\n          }\n        }).catch(function (error) {\n          return returnError('conferenceSetUserRole', {\n            error: error,\n            errorMessage: 'Err! Please try again later!'\n          });\n        });\n      }\n\n      _this.handleCloseContext();\n    };\n\n    _this.mutationKickConferenceUser = function () {\n      var userDisplayName = _this.getUserDisplayNameFromJID(_this.state.idTarget);\n\n      if (userDisplayName) {\n        var _userDisplayName$spli3 = userDisplayName.split('|'),\n            _userDisplayName$spli4 = _slicedToArray(_userDisplayName$spli3, 1),\n            userId = _userDisplayName$spli4[0];\n\n        client.mutate({\n          mutation: M_KICK_CONFERENCE_USER,\n          variables: {\n            conferenceId: _this.props.conferenceState.conference._id,\n            userId: userId\n          }\n        }).catch(function (error) {\n          return returnError('kickConferenceUser', {\n            error: error,\n            errorMessage: 'Err! Please try again later!'\n          });\n        });\n      }\n    };\n\n    _this.REMOTE_MIC_OFF = function (id, hasAudio) {\n      if (_this.props.jitsiStore.conference.myUserId() !== id) {\n        if (checkPermission(_this.props.conferenceState.myPermissions, 'STOP_USER_AUDIO_SHARING') && hasAudio) {\n          _this.props.jitsiStore.conference.sendCommandOnce('REMOTE_MIC_OFF', {\n            value: id\n          });\n        }\n      }\n    };\n\n    _this.REMOTE_VIDEO_OFF = function (id, hasVideo) {\n      if (_this.props.jitsiStore.conference.myUserId() !== id) {\n        if (checkPermission(_this.props.conferenceState.myPermissions, 'STOP_USER_VIDEO_SHARING') && hasVideo) {\n          _this.props.jitsiStore.conference.sendCommandOnce('REMOTE_VIDEO_OFF', {\n            value: id\n          });\n        }\n      }\n    };\n\n    _this.REMOTE_KICK_USER = function (id) {\n      if (_this.props.jitsiStore.conference.myUserId() !== id) {\n        if (checkPermission(_this.props.conferenceState.myPermissions, 'KICK_USER')) {\n          _this.props.jitsiStore.conference.sendCommandOnce('REMOTE_KICK_USER', {\n            value: id\n          });\n        }\n      }\n    };\n\n    _this.handleCloseContextMenu = function (event) {\n      if (_this.refs['menu-context'] && !_this.refs['menu-context'].contains(event.target)) {\n        _this.handleCloseContext();\n      }\n    };\n\n    _this.handleOpenContextMenu = function (e) {\n      var conferenceState = _this.props.conferenceState;\n      var tempX = 380 - (window.innerWidth - e.pageX);\n      var menuX = tempX > 200 ? tempX - 200 : tempX;\n      var menuY = e.pageY;\n      _this.refs['menu-context'].style.display = 'block';\n      _this.refs['menu-context'].style.transform = \"translate(\".concat(menuX, \"px, \").concat(menuY, \"px)\");\n\n      if (checkPermission(conferenceState.myPermissions, 'AUTHORIZE')) {\n        if (tempX < 80) {\n          _this.refs['menu-child'].style.left = '100%';\n          _this.refs['menu-child'].style.transform = 'translate(0%, 0%)';\n        } else {\n          _this.refs['menu-child'].style.left = '0%';\n          _this.refs['menu-child'].style.transform = 'translate(-100%, 0%)';\n        }\n      }\n    };\n\n    _this.checkShowPermission = function (roleId) {\n      if (_this.state.idTarget) {\n        var userDisplayName = _this.getUserDisplayNameFromJID(_this.state.idTarget);\n\n        if (userDisplayName) {\n          var _userDisplayName$spli5 = userDisplayName.split('|'),\n              _userDisplayName$spli6 = _slicedToArray(_userDisplayName$spli5, 1),\n              userId = _userDisplayName$spli6[0];\n\n          if (userId) {\n            var userProfile = _this.props.conferenceState.conferenceUsers.find(function (_ref3) {\n              var user = _ref3.user;\n              return user && user._id === userId;\n            });\n\n            if (userProfile) return userProfile.role._id === roleId;\n          }\n        }\n      }\n\n      return false;\n    };\n\n    _this.getPermission = function (userId, roleId) {\n      var label = [];\n      if (roleId === ROLE.OWNER) label.push('Host');\n      if (roleId === ROLE.MODERATOR) label.push('Presenter');\n      if (roleId === ROLE.PARTICIPANT) label.push('Participant');\n      if (_this.props.conferenceState.myUserId === userId) label.push('me');\n\n      if (label.length) {\n        if (label.length > 1) return \"   (\".concat(label.join(', '), \")\");\n        return \"   (\".concat(label, \")\");\n      }\n\n      return null;\n    };\n\n    _this.mutateChangeStatus = function (userId, status) {\n      client.mutate({\n        mutation: M_CHANGE_STATUS_USER,\n        variables: {\n          conferenceId: _this.props.conferenceState.conference._id,\n          userId: userId,\n          status: status\n        }\n      }).then(function (_ref4) {\n        var data = _ref4.data;\n        return console.log(data);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.filterFunc = function (participant, textSearch) {\n      if (!participant.info) return false;\n      var userFullName = participant.userFullName,\n          _participant$info = participant.info,\n          username = _participant$info.username,\n          email = _participant$info.email,\n          phoneNumber = _participant$info.phoneNumber;\n      var regex = new RegExp(addslashes(textSearch), 'i');\n      return regex.test(userFullName) || regex.test(username) || regex.test(email) || regex.test(phoneNumber);\n    };\n\n    _this.hanldeSearchParticipant = function (_ref5) {\n      var value = _ref5.target.value;\n\n      _this.setState({\n        textSearch: value\n      });\n    };\n\n    _this.handleChangeMutePolicy = function (mutePolicy) {\n      client.mutate({\n        mutation: M_UPDATE_MUTE_POLICY,\n        variables: {\n          conferenceId: _this.props.conferenceState.conference._id,\n          mutePolicy: mutePolicy\n        }\n      }).then(function (_ref6) {\n        var updateMutePolicy = _ref6.data.updateMutePolicy;\n\n        if (updateMutePolicy) {\n          var _this$props$conferenc = _this.props.conferenceState,\n              setState = _this$props$conferenc.setState,\n              conference = _this$props$conferenc.conference;\n          return setState({\n            conference: _objectSpread({}, conference, {\n              mutePolicy: mutePolicy\n            })\n          });\n        }\n\n        return newNotification('Can not change mute policy at the moment, please try again later!', 'danger');\n      }).catch(function (error) {\n        return returnError('updateMutePolicy', {\n          error: error,\n          errorMessage: 'Can not change mute policy at the moment, please try again later!'\n        });\n      });\n    };\n\n    _this.handleDropdownSelect = function (_ref7) {\n      var key = _ref7.key;\n\n      switch (key) {\n        case MUTE_POLICY.SOFT:\n          {\n            return _this.handleChangeMutePolicy(MUTE_POLICY.SOFT);\n          }\n\n        case MUTE_POLICY.HARD:\n          {\n            return _this.handleChangeMutePolicy(MUTE_POLICY.HARD);\n          }\n\n        case MUTE_POLICY.PUSH_TO_TALK:\n          {\n            return _this.handleChangeMutePolicy(MUTE_POLICY.PUSH_TO_TALK);\n          }\n\n        case MUTE_POLICY.PRIORITY:\n          {\n            return _this.handleChangeMutePolicy(MUTE_POLICY.PRIORITY);\n          }\n\n        default:\n          {}\n      }\n    };\n\n    _this.state = {\n      idTarget: '',\n      textSearch: ''\n    };\n    return _this;\n  }\n\n  _createClass(ParticipantsCollapse, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('mousedown', this.handleCloseContextMenu);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          conferenceState = _this$props.conferenceState,\n          jitsiStore = _this$props.jitsiStore;\n      var textSearch = this.state.textSearch;\n      var selectedTabs = [conferenceState.isShowPoll, conferenceState.isShowPollManagement, conferenceState.isShowParticipants, conferenceState.isShowMessages, conferenceState.isShowAttendancesManagement, conferenceState.isShowQnAManagement, conferenceState.isShowQnA].filter(function (e) {\n        return e;\n      }).length;\n      var userWaiting = conferenceState.conferenceUsers.filter(function (_ref8) {\n        var status = _ref8.status;\n        return status === _userStatus.WAITING;\n      });\n      var participants = toJS(jitsiStore.participants).map(function (participant) {\n        var _participant$user;\n\n        if (participant === null || participant === void 0 ? void 0 : (_participant$user = participant.user) === null || _participant$user === void 0 ? void 0 : _participant$user._displayName) {\n          var _participant$user$_di = participant.user._displayName.split('|'),\n              _participant$user$_di2 = _slicedToArray(_participant$user$_di, 2),\n              userId = _participant$user$_di2[0],\n              userFullName = _participant$user$_di2[1];\n\n          var userFound = conferenceState.conferenceUsers.find(function (_ref9) {\n            var user = _ref9.user;\n            return user._id === userId;\n          });\n          participant.info = _objectSpread({}, toJS(userFound.user), {\n            role: userFound.role\n          });\n          participant.userFullName = userFullName;\n        }\n\n        return participant;\n      }).filter(function (participant) {\n        return textSearch ? _this2.filterFunc(participant, textSearch) : !!participant.info;\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"participants-container\",\n        style: {\n          height: \"calc(100vh - \".concat(selectedTabs * 20 + 1, \"px)\")\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 7\n        }\n      }, conferenceState.conference.createdBy._id === conferenceState.myUserId && userWaiting.length !== 0 && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"participants-waiting\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }\n      }, userWaiting.length, \" person is waiting\"), userWaiting.map(function (_ref10) {\n        var user = _ref10.user;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"participants-info\",\n          key: user._id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(AvatarComponent, Object.assign({}, user, {\n          size: \"small\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 17\n          }\n        })), /*#__PURE__*/React.createElement(\"img\", {\n          className: \"participants-headphone\",\n          src: headphone,\n          alt: \"icon\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 17\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"participants-name\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 17\n          }\n        }, user.firstname, \" \", user.lastname), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"group-btn\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          onClick: function onClick() {\n            return _this2.mutateChangeStatus(user._id, _userStatus.ONLINE);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 19\n          }\n        }, \"Admit\"), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this2.mutateChangeStatus(user._id, _userStatus.OFFLINE);\n          },\n          type: \"button\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 19\n          }\n        }, \"Remove\")));\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper-control-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Search, {\n        className: \"search-participant\",\n        placeholder: \"T\\xECm theo T\\xEAn/Email/S\\u0110T\",\n        onChange: this.hanldeSearchParticipant,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }\n      }), this.isConferenceOwner() && /*#__PURE__*/React.createElement(_Dropdown, {\n        overlay: /*#__PURE__*/React.createElement(_Menu, {\n          selectedKeys: [this.props.conferenceState.conference.mutePolicy],\n          className: \"mute-policy-menu\",\n          onClick: this.handleDropdownSelect,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(_Menu.Item, {\n          key: MUTE_POLICY.HARD,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(_Tooltip, {\n          placement: \"left\",\n          title: \"Ch\\u1EC9 ch\\u1EE7 ph\\xF2ng m\\u1EDBi \\u0111\\u01B0\\u1EE3c ph\\xE9p m\\u1EDF micphone ng\\u01B0\\u1EDDi d\\xF9ng.\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: noSoundBlack,\n          alt: \"icon\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 21\n          }\n        }, \"Hard Mute\")), /*#__PURE__*/React.createElement(_Menu.Item, {\n          key: MUTE_POLICY.SOFT,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(_Tooltip, {\n          placement: \"left\",\n          title: \"Ng\\u01B0\\u1EDDi d\\xF9ng \\u0111\\u01B0\\u1EE3c ph\\xE9p m\\u1EDF t\\u1EAFt micphone.\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: noSoundBlack,\n          alt: \"icon\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 21\n          }\n        }, \"Soft Mute\")), /*#__PURE__*/React.createElement(_Menu.Item, {\n          key: MUTE_POLICY.PUSH_TO_TALK,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(_Tooltip, {\n          placement: \"left\",\n          title: \"Ng\\u01B0\\u1EDDi d\\xF9ng ph\\u1EA3i gi\\u1EEF \\u0111\\xE8 ph\\xEDm Z \\u0111\\u1EC3 n\\xF3i.\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: noSoundBlack,\n          alt: \"icon\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 21\n          }\n        }, \"Push To Talk\")), /*#__PURE__*/React.createElement(_Menu.Item, {\n          key: MUTE_POLICY.PRIORITY,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(_Tooltip, {\n          placement: \"left\",\n          title: \"Ch\\u1EC9 Host, Presenter v\\xE0 Participants \\u0111\\u01B0\\u1EE3c Pin m\\u1EDBi c\\xF3 th\\u1EC3 n\\xF3i.\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: noSoundBlack,\n          alt: \"icon\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 23\n          }\n        })), /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 21\n          }\n        }, \"Discussion Mode\"))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        shape: \"circle\",\n        className: \"btn-mute-policy\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: noSoundBlack,\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 17\n        }\n      })))), !textSearch && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"participants-info\",\n        onContextMenu: function onContextMenu(e) {\n          return e.preventDefault();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(AvatarComponent, Object.assign({}, conferenceState.myInfo, {\n        size: \"small\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"img\", {\n        className: \"participants-headphone\",\n        src: headphone,\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"participants-name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }\n      }, conferenceState.myInfo.firstname, \" \", conferenceState.myInfo.lastname, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 15\n        }\n      }, this.getPermission(conferenceState.myUserId, conferenceState.myRole))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"participants-group-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: jitsiStore.isCamera ? camera : cameraOff,\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: jitsiStore.isAudio ? micro : microOff,\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 17\n        }\n      })))), textSearch && !participants.length && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper-no-data\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: dataIcon,\n        alt: \"icon_no_data\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 13\n        }\n      }, \"No Participant\")), participants.map(function (_ref11) {\n        var id = _ref11.id,\n            userFullName = _ref11.userFullName,\n            info = _ref11.info;\n\n        var hasAudio = _this2.props.doesParticipantHasAudio(id);\n\n        var hasVideo = _this2.props.doesParticipantHasVideo(id);\n\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: id,\n          className: \"participants-info\",\n          \"data-user\": id,\n          onContextMenu: function onContextMenu(e) {\n            e.preventDefault();\n\n            if (jitsiStore.conference.myUserId() !== id && (info.role._id !== ROLE.OWNER || checkPermission(conferenceState.myPermissions, 'KICK_USER'))) {\n              _this2.setState({\n                idTarget: id\n              });\n\n              _this2.handleOpenContextMenu(e);\n            }\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(AvatarComponent, Object.assign({}, info, {\n          size: \"small\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }\n        })), /*#__PURE__*/React.createElement(\"img\", {\n          className: \"participants-headphone\",\n          src: headphone,\n          alt: \"icon\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 15\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"participants-name\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }\n        }, userFullName || 'Loading...', /*#__PURE__*/React.createElement(\"span\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 17\n          }\n        }, _this2.getPermission(id, info.role._id))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"participants-group-btn\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 15\n          }\n        }, checkPermission(conferenceState.myPermissions, 'PIN_MAIN_SPEAKER') ? /*#__PURE__*/React.createElement(\"button\", {\n          className: conferenceState.conference.pinnedUser === id ? 'btn-pin pin-active' : 'btn-pin',\n          onClick: function onClick() {\n            if (checkPermission(conferenceState.myPermissions, 'PIN_MAIN_SPEAKER')) {\n              _this2.props.mutateSetPinnedUser(conferenceState.conference.pinnedUser === id ? '' : id);\n            }\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: conferenceState.conference.pinnedUser === id ? pinnedIcon : pinUser,\n          alt: \"icon\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 21\n          }\n        })) : /*#__PURE__*/React.createElement(React.Fragment, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 19\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          disabled: info.role._id === ROLE.OWNER,\n          onClick: function onClick() {\n            return _this2.REMOTE_VIDEO_OFF(id, hasVideo);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: hasVideo ? camera : cameraOff,\n          alt: \"icon\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 19\n          }\n        })), /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          disabled: info.role._id === ROLE.OWNER,\n          onClick: function onClick() {\n            return _this2.REMOTE_MIC_OFF(id, hasAudio);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: hasAudio ? micro : microOff,\n          alt: \"icon\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 19\n          }\n        }))));\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"menu-context\",\n        ref: \"menu-context\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"menu-parent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }\n      }, checkPermission(conferenceState.myPermissions, 'AUTHORIZE') ? /*#__PURE__*/React.createElement(\"li\", {\n        className: \"item-more border-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item-more-text border-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 19\n        }\n      }, \"Change Role To\"), /*#__PURE__*/React.createElement(\"img\", {\n        src: moreIcon,\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"menu-child\",\n        ref: \"menu-child\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: this.checkShowPermission('MODERATOR') ? 'permission-active' : null,\n        onClick: function onClick() {\n          if (!_this2.checkShowPermission('MODERATOR')) {\n            _this2.handleSetRole('MODERATOR');\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 19\n        }\n      }, this.checkShowPermission('MODERATOR') ? /*#__PURE__*/React.createElement(\"img\", {\n        src: logoIcon,\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 62\n        }\n      }) : /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 98\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 21\n        }\n      }, \"Presenter\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: this.checkShowPermission('PARTICIPANT') ? 'permission-active' : null,\n        onClick: function onClick() {\n          if (!_this2.checkShowPermission('PARTICIPANT')) {\n            _this2.handleSetRole('PARTICIPANT');\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 19\n        }\n      }, this.checkShowPermission('PARTICIPANT') ? /*#__PURE__*/React.createElement(\"img\", {\n        src: logoIcon,\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 64\n        }\n      }) : /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 100\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 21\n        }\n      }, \"Participant\")))) : /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 15\n        }\n      }), checkPermission(conferenceState.myPermissions, 'STOP_USER_AUDIO_SHARING') ? /*#__PURE__*/React.createElement(\"li\", {\n        className: this.props.doesParticipantHasAudio(this.state.idTarget) ? '' : 'disable',\n        onClick: function onClick() {\n          if (checkPermission(conferenceState.myPermissions, 'STOP_USER_AUDIO_SHARING') && _this2.props.doesParticipantHasAudio(_this2.state.idTarget)) {\n            _this2.REMOTE_MIC_OFF(_this2.state.idTarget, true);\n\n            _this2.handleCloseContext();\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"border-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 17\n        }\n      }, \"Mute\")) : /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 15\n        }\n      }), checkPermission(conferenceState.myPermissions, 'STOP_USER_VIDEO_SHARING') ? /*#__PURE__*/React.createElement(\"li\", {\n        className: this.props.doesParticipantHasVideo(this.state.idTarget) ? '' : 'disable',\n        onClick: function onClick() {\n          if (checkPermission(conferenceState.myPermissions, 'STOP_USER_VIDEO_SHARING') && _this2.props.doesParticipantHasVideo(_this2.state.idTarget)) {\n            _this2.REMOTE_VIDEO_OFF(_this2.state.idTarget, true);\n\n            _this2.handleCloseContext();\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"border-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 17\n        }\n      }, \"Stop Video\")) : /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 15\n        }\n      }), checkPermission(conferenceState.myPermissions, 'CHAT') ? /*#__PURE__*/React.createElement(\"li\", {\n        onClick: function onClick() {\n          if (_this2.state.idTarget) {\n            var userFound = jitsiStore.participants.find(function (_ref12) {\n              var id = _ref12.id;\n              return id === _this2.state.idTarget;\n            });\n\n            if (userFound && userFound.displayName) {\n              var _conferenceState$conf = conferenceState.conferenceUsers.filter(function (_ref13) {\n                var _id = _ref13.user._id;\n                return _id === userFound.displayName.split('|')[0];\n              }),\n                  _conferenceState$conf2 = _slicedToArray(_conferenceState$conf, 1),\n                  profileFound = _conferenceState$conf2[0];\n\n              conferenceState.setState({\n                idChatUser: userFound.displayName.split('|')[0],\n                isShowBoxChat: true,\n                infoChatUser: {\n                  _id: userFound.displayName.split('|')[0],\n                  name: userFound.displayName.split('|')[1],\n                  imageUrl: profileFound ? profileFound.user.imageUrl : null\n                }\n              });\n            }\n\n            _this2.handleCloseContext();\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 17\n        }\n      }, \"Chat\")) : /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 15\n        }\n      }), checkPermission(conferenceState.myPermissions, 'KICK_USER') && /*#__PURE__*/React.createElement(\"li\", {\n        onClick: function onClick() {\n          _this2.REMOTE_KICK_USER(_this2.state.idTarget);\n\n          _this2.handleCloseContext();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 17\n        }\n      }, \"Kick user\")))));\n    }\n  }]);\n\n  return ParticipantsCollapse;\n}(React.Component), _temp)) || _class) || _class);\nexport default withTranslation()(ParticipantsCollapse);","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/conference2/collab-panel/Participants.jsx"],"names":["React","withTranslation","inject","observer","appConstants","checkPermission","_userStatus","AvatarComponent","client","M_CONFFERENCE_SET_USER_ROLE","M_KICK_CONFERENCE_USER","M_CHANGE_STATUS_USER","M_UPDATE_MUTE_POLICY","returnError","addslashes","newNotification","toJS","ROLE","MUTE_POLICY","Search","ParticipantsCollapse","stores","props","isConferenceOwner","conferenceState","myRole","OWNER","handleCloseContext","refs","style","display","getUserDisplayNameFromJID","jid","userFound","jitsiStore","participants","find","id","displayName","handleSetRole","roleId","userDisplayName","state","idTarget","split","userId","mutate","mutation","variables","conferenceId","conference","_id","catch","error","errorMessage","mutationKickConferenceUser","REMOTE_MIC_OFF","hasAudio","myUserId","myPermissions","sendCommandOnce","value","REMOTE_VIDEO_OFF","hasVideo","REMOTE_KICK_USER","handleCloseContextMenu","event","contains","target","handleOpenContextMenu","e","tempX","window","innerWidth","pageX","menuX","menuY","pageY","transform","left","checkShowPermission","userProfile","conferenceUsers","user","role","getPermission","label","push","MODERATOR","PARTICIPANT","length","join","mutateChangeStatus","status","then","data","console","log","err","filterFunc","participant","textSearch","info","userFullName","username","email","phoneNumber","regex","RegExp","test","hanldeSearchParticipant","setState","handleChangeMutePolicy","mutePolicy","updateMutePolicy","handleDropdownSelect","key","SOFT","HARD","PUSH_TO_TALK","PRIORITY","document","addEventListener","selectedTabs","isShowPoll","isShowPollManagement","isShowParticipants","isShowMessages","isShowAttendancesManagement","isShowQnAManagement","isShowQnA","filter","userWaiting","WAITING","map","_displayName","height","createdBy","headphone","firstname","lastname","ONLINE","OFFLINE","noSoundBlack","preventDefault","myInfo","isCamera","camera","cameraOff","isAudio","micro","microOff","dataIcon","doesParticipantHasAudio","doesParticipantHasVideo","pinnedUser","mutateSetPinnedUser","pinnedIcon","pinUser","moreIcon","logoIcon","profileFound","idChatUser","isShowBoxChat","infoChatUser","name","imageUrl","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { inject, observer } from 'mobx-react'\n\nimport { appConstants, checkPermission, _userStatus } from '@constants'\nimport { AvatarComponent } from '@components'\nimport {\n  client,\n  M_CONFFERENCE_SET_USER_ROLE,\n  M_KICK_CONFERENCE_USER,\n  M_CHANGE_STATUS_USER,\n  M_UPDATE_MUTE_POLICY\n} from '@graphql'\nimport { returnError, addslashes, newNotification } from '@utils'\n\nimport dataIcon from '@misc/images/action/data.svg'\nimport pinUser from '@misc/images/ngocly/pin-icon.svg'\nimport pinnedIcon from '@misc/images/toolbar/pinned.svg'\nimport headphone from '@misc/images/ngocly/headphone.svg'\nimport camera from '@misc/images/ngocly/camera.svg'\nimport cameraOff from '@misc/images/ngocly/cameraOff.svg'\nimport micro from '@misc/images/ngocly/micro.svg'\nimport microOff from '@misc/images/ngocly/microOff.svg'\nimport logoIcon from '@misc/images/menu/logo.svg'\nimport moreIcon from '@misc/images/menu/more.svg'\nimport noSoundBlack from '@misc/images/action/no-sound_black.svg'\n\nimport { toJS } from 'mobx'\nimport { Input, Dropdown, Menu, Button, Tooltip } from 'antd'\n\nconst { ROLE, MUTE_POLICY } = appConstants\nconst { Search } = Input\n\n@inject(({ stores }) => stores)\n@observer\nclass ParticipantsCollapse extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      idTarget: '',\n      textSearch: ''\n    }\n  }\n\n  isConferenceOwner = () => this.props.conferenceState.myRole === ROLE.OWNER\n\n  handleCloseContext = () => {\n    this.refs['menu-context'].style.display = 'none'\n  }\n\n  getUserDisplayNameFromJID = jid => {\n    const userFound = this.props.jitsiStore.participants.find(({ id }) => id === jid)\n\n    if (userFound && userFound.displayName) return userFound.displayName\n    return ''\n  }\n\n  handleSetRole = roleId => {\n    const userDisplayName = this.getUserDisplayNameFromJID(this.state.idTarget)\n\n    if (userDisplayName) {\n      const [userId] = userDisplayName.split('|')\n      client\n        .mutate({\n          mutation: M_CONFFERENCE_SET_USER_ROLE,\n          variables: { conferenceId: this.props.conferenceState.conference._id, userId, roleId }\n        })\n        .catch(error =>\n          returnError('conferenceSetUserRole', {\n            error,\n            errorMessage: 'Err! Please try again later!'\n          })\n        )\n    }\n\n    this.handleCloseContext()\n  }\n\n  mutationKickConferenceUser = () => {\n    const userDisplayName = this.getUserDisplayNameFromJID(this.state.idTarget)\n\n    if (userDisplayName) {\n      const [userId] = userDisplayName.split('|')\n      client\n        .mutate({\n          mutation: M_KICK_CONFERENCE_USER,\n          variables: { conferenceId: this.props.conferenceState.conference._id, userId }\n        })\n        .catch(error =>\n          returnError('kickConferenceUser', {\n            error,\n            errorMessage: 'Err! Please try again later!'\n          })\n        )\n    }\n  }\n\n  REMOTE_MIC_OFF = (id, hasAudio) => {\n    if (this.props.jitsiStore.conference.myUserId() !== id) {\n      if (checkPermission(this.props.conferenceState.myPermissions, 'STOP_USER_AUDIO_SHARING') && hasAudio) {\n        this.props.jitsiStore.conference.sendCommandOnce('REMOTE_MIC_OFF', { value: id })\n      }\n    }\n  }\n\n  REMOTE_VIDEO_OFF = (id, hasVideo) => {\n    if (this.props.jitsiStore.conference.myUserId() !== id) {\n      if (checkPermission(this.props.conferenceState.myPermissions, 'STOP_USER_VIDEO_SHARING') && hasVideo) {\n        this.props.jitsiStore.conference.sendCommandOnce('REMOTE_VIDEO_OFF', { value: id })\n      }\n    }\n  }\n\n  REMOTE_KICK_USER = id => {\n    if (this.props.jitsiStore.conference.myUserId() !== id) {\n      if (checkPermission(this.props.conferenceState.myPermissions, 'KICK_USER')) {\n        this.props.jitsiStore.conference.sendCommandOnce('REMOTE_KICK_USER', { value: id })\n      }\n    }\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleCloseContextMenu)\n  }\n\n  handleCloseContextMenu = event => {\n    if (this.refs['menu-context'] && !this.refs['menu-context'].contains(event.target)) {\n      this.handleCloseContext()\n    }\n  }\n\n  handleOpenContextMenu = e => {\n    const { conferenceState } = this.props\n\n    const tempX = 380 - (window.innerWidth - e.pageX)\n    const menuX = tempX > 200 ? tempX - 200 : tempX\n    const menuY = e.pageY\n\n    this.refs['menu-context'].style.display = 'block'\n    this.refs['menu-context'].style.transform = `translate(${menuX}px, ${menuY}px)`\n\n    if (checkPermission(conferenceState.myPermissions, 'AUTHORIZE')) {\n      if (tempX < 80) {\n        this.refs['menu-child'].style.left = '100%'\n        this.refs['menu-child'].style.transform = 'translate(0%, 0%)'\n      } else {\n        this.refs['menu-child'].style.left = '0%'\n        this.refs['menu-child'].style.transform = 'translate(-100%, 0%)'\n      }\n    }\n  }\n\n  checkShowPermission = roleId => {\n    if (this.state.idTarget) {\n      const userDisplayName = this.getUserDisplayNameFromJID(this.state.idTarget)\n      if (userDisplayName) {\n        const [userId] = userDisplayName.split('|')\n\n        if (userId) {\n          const userProfile = this.props.conferenceState.conferenceUsers.find(({ user }) => user && user._id === userId)\n\n          if (userProfile) return userProfile.role._id === roleId\n        }\n      }\n    }\n\n    return false\n  }\n\n  getPermission = (userId, roleId) => {\n    let label = []\n\n    if (roleId === ROLE.OWNER) label.push('Host')\n    if (roleId === ROLE.MODERATOR) label.push('Presenter')\n    if (roleId === ROLE.PARTICIPANT) label.push('Participant')\n\n    if (this.props.conferenceState.myUserId === userId) label.push('me')\n\n    if (label.length) {\n      if (label.length > 1) return `   (${label.join(', ')})`\n      return `   (${label})`\n    }\n\n    return null\n  }\n\n  mutateChangeStatus = (userId, status) => {\n    client\n      .mutate({\n        mutation: M_CHANGE_STATUS_USER,\n        variables: {\n          conferenceId: this.props.conferenceState.conference._id,\n          userId,\n          status\n        }\n      })\n      .then(({ data }) => console.log(data))\n      .catch(err => console.log(err))\n  }\n\n  filterFunc = (participant, textSearch) => {\n    if (!participant.info) return false\n\n    const {\n      userFullName,\n      info: { username, email, phoneNumber }\n    } = participant\n\n    const regex = new RegExp(addslashes(textSearch), 'i')\n\n    return regex.test(userFullName) || regex.test(username) || regex.test(email) || regex.test(phoneNumber)\n  }\n\n  hanldeSearchParticipant = ({ target: { value } }) => {\n    this.setState({ textSearch: value })\n  }\n\n  handleChangeMutePolicy = mutePolicy => {\n    client\n      .mutate({\n        mutation: M_UPDATE_MUTE_POLICY,\n        variables: {\n          conferenceId: this.props.conferenceState.conference._id,\n          mutePolicy\n        }\n      })\n      .then(({ data: { updateMutePolicy } }) => {\n        if (updateMutePolicy) {\n          const { setState, conference } = this.props.conferenceState\n          return setState({\n            conference: { ...conference, mutePolicy: mutePolicy }\n          })\n        }\n        return newNotification('Can not change mute policy at the moment, please try again later!', 'danger')\n      })\n      .catch(error =>\n        returnError('updateMutePolicy', {\n          error,\n          errorMessage: 'Can not change mute policy at the moment, please try again later!'\n        })\n      )\n  }\n\n  handleDropdownSelect = ({ key }) => {\n    switch (key) {\n      case MUTE_POLICY.SOFT: {\n        return this.handleChangeMutePolicy(MUTE_POLICY.SOFT)\n      }\n\n      case MUTE_POLICY.HARD: {\n        return this.handleChangeMutePolicy(MUTE_POLICY.HARD)\n      }\n\n      case MUTE_POLICY.PUSH_TO_TALK: {\n        return this.handleChangeMutePolicy(MUTE_POLICY.PUSH_TO_TALK)\n      }\n\n      case MUTE_POLICY.PRIORITY: {\n        return this.handleChangeMutePolicy(MUTE_POLICY.PRIORITY)\n      }\n\n      default: {\n      }\n    }\n  }\n\n  render() {\n    const { conferenceState, jitsiStore } = this.props\n    const { textSearch } = this.state\n\n    const selectedTabs = [\n      conferenceState.isShowPoll,\n      conferenceState.isShowPollManagement,\n      conferenceState.isShowParticipants,\n      conferenceState.isShowMessages,\n      conferenceState.isShowAttendancesManagement,\n      conferenceState.isShowQnAManagement,\n      conferenceState.isShowQnA\n    ].filter(e => e).length\n\n    const userWaiting = conferenceState.conferenceUsers.filter(({ status }) => status === _userStatus.WAITING)\n\n    const participants = toJS(jitsiStore.participants)\n      .map(participant => {\n        if (participant?.user?._displayName) {\n          const [userId, userFullName] = participant.user._displayName.split('|')\n          const userFound = conferenceState.conferenceUsers.find(({ user }) => user._id === userId)\n          participant.info = {\n            ...toJS(userFound.user),\n            role: userFound.role\n          }\n          participant.userFullName = userFullName\n        }\n        return participant\n      })\n      .filter(participant => (textSearch ? this.filterFunc(participant, textSearch) : !!participant.info))\n\n    return (\n      <div className='participants-container' style={{ height: `calc(100vh - ${selectedTabs * 20 + 1}px)` }}>\n        {conferenceState.conference.createdBy._id === conferenceState.myUserId && userWaiting.length !== 0 && (\n          <div className='participants-waiting'>\n            <div className='title'>{userWaiting.length} person is waiting</div>\n            {userWaiting.map(({ user }) => (\n              <div className='participants-info' key={user._id}>\n                <AvatarComponent {...user} size='small' />\n                <img className='participants-headphone' src={headphone} alt='icon' />\n                <div className='participants-name'>\n                  {user.firstname} {user.lastname}\n                </div>\n                <div className='group-btn'>\n                  <button type='button' onClick={() => this.mutateChangeStatus(user._id, _userStatus.ONLINE)}>\n                    Admit\n                  </button>\n                  <button onClick={() => this.mutateChangeStatus(user._id, _userStatus.OFFLINE)} type='button'>\n                    Remove\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        <div className='wrapper-control-btn'>\n          <Search\n            className='search-participant'\n            placeholder='Tm theo Tn/Email/ST'\n            onChange={this.hanldeSearchParticipant}\n          />\n\n          {this.isConferenceOwner() && (\n            <Dropdown\n              overlay={\n                <Menu\n                  selectedKeys={[this.props.conferenceState.conference.mutePolicy]}\n                  className='mute-policy-menu'\n                  onClick={this.handleDropdownSelect}\n                >\n                  <Menu.Item key={MUTE_POLICY.HARD}>\n                    <Tooltip placement='left' title='Ch ch phng mi c php m micphone ngi dng.'>\n                      <img src={noSoundBlack} alt='icon' />\n                    </Tooltip>\n                    <span>Hard Mute</span>\n                  </Menu.Item>\n\n                  <Menu.Item key={MUTE_POLICY.SOFT}>\n                    <Tooltip placement='left' title='Ngi dng c php m tt micphone.'>\n                      <img src={noSoundBlack} alt='icon' />\n                    </Tooltip>\n                    <span>Soft Mute</span>\n                  </Menu.Item>\n\n                  <Menu.Item key={MUTE_POLICY.PUSH_TO_TALK}>\n                    <Tooltip placement='left' title='Ngi dng phi gi  phm Z  ni.'>\n                      <img src={noSoundBlack} alt='icon' />\n                    </Tooltip>\n                    <span>Push To Talk</span>\n                  </Menu.Item>\n\n                  <Menu.Item key={MUTE_POLICY.PRIORITY}>\n                    <Tooltip placement='left' title='Ch Host, Presenter v Participants c Pin mi c th ni.'>\n                      <img src={noSoundBlack} alt='icon' />\n                    </Tooltip>\n                    <span>Discussion Mode</span>\n                  </Menu.Item>\n                </Menu>\n              }\n            >\n              <Button shape='circle' className='btn-mute-policy'>\n                <img src={noSoundBlack} alt='icon' />\n              </Button>\n            </Dropdown>\n          )}\n        </div>\n\n        {!textSearch && (\n          <div className='participants-info' onContextMenu={e => e.preventDefault()}>\n            <AvatarComponent {...conferenceState.myInfo} size='small' />\n            <img className='participants-headphone' src={headphone} alt='icon' />\n            <div className='participants-name'>\n              {conferenceState.myInfo.firstname} {conferenceState.myInfo.lastname}\n              <span>{this.getPermission(conferenceState.myUserId, conferenceState.myRole)}</span>\n            </div>\n            <div className='participants-group-btn'>\n              <button type='button' disabled>\n                <img src={jitsiStore.isCamera ? camera : cameraOff} alt='icon' />\n              </button>\n              <button type='button' disabled>\n                <img src={jitsiStore.isAudio ? micro : microOff} alt='icon' />\n              </button>\n            </div>\n          </div>\n        )}\n\n        {textSearch && !participants.length && (\n          <div className='wrapper-no-data'>\n            <img src={dataIcon} alt='icon_no_data' />\n            <span>No Participant</span>\n          </div>\n        )}\n\n        {participants.map(({ id, userFullName, info }) => {\n          const hasAudio = this.props.doesParticipantHasAudio(id)\n          const hasVideo = this.props.doesParticipantHasVideo(id)\n\n          return (\n            <div\n              key={id}\n              className='participants-info'\n              data-user={id}\n              onContextMenu={e => {\n                e.preventDefault()\n                if (\n                  jitsiStore.conference.myUserId() !== id &&\n                  (info.role._id !== ROLE.OWNER || checkPermission(conferenceState.myPermissions, 'KICK_USER'))\n                ) {\n                  this.setState({ idTarget: id })\n                  this.handleOpenContextMenu(e)\n                }\n              }}\n            >\n              <AvatarComponent {...info} size='small' />\n              <img className='participants-headphone' src={headphone} alt='icon' />\n              <div className='participants-name'>\n                {userFullName || 'Loading...'}\n                <span>{this.getPermission(id, info.role._id)}</span>\n              </div>\n\n              <div className='participants-group-btn'>\n                {checkPermission(conferenceState.myPermissions, 'PIN_MAIN_SPEAKER') ? (\n                  <button\n                    className={conferenceState.conference.pinnedUser === id ? 'btn-pin pin-active' : 'btn-pin'}\n                    onClick={() => {\n                      if (checkPermission(conferenceState.myPermissions, 'PIN_MAIN_SPEAKER')) {\n                        this.props.mutateSetPinnedUser(conferenceState.conference.pinnedUser === id ? '' : id)\n                      }\n                    }}\n                  >\n                    <img src={conferenceState.conference.pinnedUser === id ? pinnedIcon : pinUser} alt='icon' />\n                  </button>\n                ) : (\n                  <React.Fragment />\n                )}\n\n                <button\n                  type='button'\n                  disabled={info.role._id === ROLE.OWNER}\n                  onClick={() => this.REMOTE_VIDEO_OFF(id, hasVideo)}\n                >\n                  <img src={hasVideo ? camera : cameraOff} alt='icon' />\n                </button>\n\n                <button\n                  type='button'\n                  disabled={info.role._id === ROLE.OWNER}\n                  onClick={() => this.REMOTE_MIC_OFF(id, hasAudio)}\n                >\n                  <img src={hasAudio ? micro : microOff} alt='icon' />\n                </button>\n              </div>\n            </div>\n          )\n        })}\n\n        <div className='menu-context' ref='menu-context'>\n          <ul className='menu-parent'>\n            {checkPermission(conferenceState.myPermissions, 'AUTHORIZE') ? (\n              <li className='item-more border-item'>\n                <div className='item-more-text border-item'>\n                  <span>Change Role To</span>\n                  <img src={moreIcon} alt='icon' />\n                </div>\n                <ul className='menu-child' ref='menu-child'>\n                  <li\n                    className={this.checkShowPermission('MODERATOR') ? 'permission-active' : null}\n                    onClick={() => {\n                      if (!this.checkShowPermission('MODERATOR')) {\n                        this.handleSetRole('MODERATOR')\n                      }\n                    }}\n                  >\n                    {this.checkShowPermission('MODERATOR') ? <img src={logoIcon} alt='icon' /> : <React.Fragment />}\n                    <span>Presenter</span>\n                  </li>\n                  <li\n                    className={this.checkShowPermission('PARTICIPANT') ? 'permission-active' : null}\n                    onClick={() => {\n                      if (!this.checkShowPermission('PARTICIPANT')) {\n                        this.handleSetRole('PARTICIPANT')\n                      }\n                    }}\n                  >\n                    {this.checkShowPermission('PARTICIPANT') ? <img src={logoIcon} alt='icon' /> : <React.Fragment />}\n                    <span>Participant</span>\n                  </li>\n                </ul>\n              </li>\n            ) : (\n              <React.Fragment />\n            )}\n\n            {checkPermission(conferenceState.myPermissions, 'STOP_USER_AUDIO_SHARING') ? (\n              <li\n                className={this.props.doesParticipantHasAudio(this.state.idTarget) ? '' : 'disable'}\n                onClick={() => {\n                  if (\n                    checkPermission(conferenceState.myPermissions, 'STOP_USER_AUDIO_SHARING') &&\n                    this.props.doesParticipantHasAudio(this.state.idTarget)\n                  ) {\n                    this.REMOTE_MIC_OFF(this.state.idTarget, true)\n                    this.handleCloseContext()\n                  }\n                }}\n              >\n                <span className='border-item'>Mute</span>\n              </li>\n            ) : (\n              <React.Fragment />\n            )}\n            {checkPermission(conferenceState.myPermissions, 'STOP_USER_VIDEO_SHARING') ? (\n              <li\n                className={this.props.doesParticipantHasVideo(this.state.idTarget) ? '' : 'disable'}\n                onClick={() => {\n                  if (\n                    checkPermission(conferenceState.myPermissions, 'STOP_USER_VIDEO_SHARING') &&\n                    this.props.doesParticipantHasVideo(this.state.idTarget)\n                  ) {\n                    this.REMOTE_VIDEO_OFF(this.state.idTarget, true)\n                    this.handleCloseContext()\n                  }\n                }}\n              >\n                <span className='border-item'>Stop Video</span>\n              </li>\n            ) : (\n              <React.Fragment />\n            )}\n\n            {checkPermission(conferenceState.myPermissions, 'CHAT') ? (\n              <li\n                onClick={() => {\n                  if (this.state.idTarget) {\n                    const userFound = jitsiStore.participants.find(({ id }) => id === this.state.idTarget)\n\n                    if (userFound && userFound.displayName) {\n                      const [profileFound] = conferenceState.conferenceUsers.filter(\n                        ({ user: { _id } }) => _id === userFound.displayName.split('|')[0]\n                      )\n\n                      conferenceState.setState({\n                        idChatUser: userFound.displayName.split('|')[0],\n                        isShowBoxChat: true,\n                        infoChatUser: {\n                          _id: userFound.displayName.split('|')[0],\n                          name: userFound.displayName.split('|')[1],\n                          imageUrl: profileFound ? profileFound.user.imageUrl : null\n                        }\n                      })\n                    }\n\n                    this.handleCloseContext()\n                  }\n                }}\n              >\n                <span>Chat</span>\n              </li>\n            ) : (\n              <React.Fragment />\n            )}\n\n            {checkPermission(conferenceState.myPermissions, 'KICK_USER') && (\n              <li\n                onClick={() => {\n                  this.REMOTE_KICK_USER(this.state.idTarget)\n                  this.handleCloseContext()\n                }}\n              >\n                <span>Kick user</span>\n              </li>\n            )}\n          </ul>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withTranslation()(ParticipantsCollapse)\n"]},"metadata":{},"sourceType":"module"}