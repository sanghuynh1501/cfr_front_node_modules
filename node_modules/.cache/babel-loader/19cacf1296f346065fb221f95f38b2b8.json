{"ast":null,"code":"import \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/tooltip/style\";\nimport _Tooltip from \"antd/es/tooltip\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/dashboard/conferences/Meeting.jsx\";\n\nimport React, { Component } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { withRouter } from 'react-router';\nimport { inject, observer } from 'mobx-react';\nimport moment from 'moment';\nimport { debounce } from 'underscore';\nimport { newNotification, isSupperAdmin } from '@utils';\nimport ModalDelete from '../components/ModalDelete';\nimport { _confType, ROLE } from '@constants';\nvar Meeting = (_dec = inject(function (_ref) {\n  var stores = _ref.stores;\n  return stores;\n}), withRouter(_class = _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(Meeting, _Component);\n\n  var _super = _createSuper(Meeting);\n\n  function Meeting() {\n    var _this;\n\n    _classCallCheck(this, Meeting);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.formatNumber = function (e) {\n      return e < 10 ? '0' + e : e.toString();\n    };\n\n    _this.formatWeekday = function (e) {\n      var arrayDay = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\n      if (moment(e).year() === moment().year() && moment(e).month() === moment().month()) {\n        if (moment(e).date() === moment().date()) {\n          return 'Today';\n        }\n\n        if (moment(e).date() === moment().date() - 1) {\n          return 'Yesterday';\n        }\n\n        if (moment(e).date() === moment().date() + 1) {\n          return 'Tomorrow';\n        }\n      }\n\n      return arrayDay[moment(e).day()];\n    };\n\n    _this.processTime = function (e) {\n      return e ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"timeHolder\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 9\n        }\n      }, _this.formatWeekday(e)), /*#__PURE__*/React.createElement(\"span\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }\n      }, _this.formatNumber(moment(e).hour()), \":\", _this.formatNumber(moment(e).minute()))) : /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: 'black'\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 9\n        }\n      }, _this.props.i18n.t('alwaysAvailable'));\n    };\n\n    _this.handleCopyLink = function (e) {\n      var linkToCopy = window.location.href + \"conference/\".concat(e);\n      var el = document.createElement('textarea');\n      el.value = linkToCopy;\n      document.body.appendChild(el);\n      el.select();\n      document.execCommand('copy');\n      document.body.removeChild(el);\n      return newNotification(_this.props.i18n.t('notification.copyTextSuccess'), 'success', {\n        container: 'top-right'\n      });\n    };\n\n    _this.handleSearchChange = function (e) {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          _assertThisInitialize2 = _assertThisInitialize.props,\n          refetch = _assertThisInitialize2.refetch,\n          conferenceType = _assertThisInitialize2.conferenceType;\n\n      refetch(conferenceType, e);\n    };\n\n    return _this;\n  }\n\n  _createClass(Meeting, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          conferences = _this$props.conferences,\n          handleCreateConference = _this$props.handleCreateConference,\n          handleShowDetail = _this$props.handleShowDetail,\n          handleJoinConference = _this$props.handleJoinConference,\n          conferenceType = _this$props.conferenceType,\n          i18n = _this$props.i18n,\n          myInfo = _this$props.globalState.myInfo;\n      var debouncedHandleSearchChange = debounce(this.handleSearchChange, 200);\n      var profiles = myInfo === null || myInfo === void 0 ? void 0 : myInfo.profiles; //TODO: Upgrade check by Permission code\n\n      var isAllowDelete = isSupperAdmin(profiles) || (profiles === null || profiles === void 0 ? void 0 : profiles.some(function (profile) {\n        var _profile$role;\n\n        return (profile === null || profile === void 0 ? void 0 : (_profile$role = profile.role) === null || _profile$role === void 0 ? void 0 : _profile$role.code) === ROLE.R_ADMIN;\n      }));\n      var rowData = conferences.map(function (e) {\n        return {\n          key: e._id,\n          code: e.code,\n          _id: e._id,\n          topic: /*#__PURE__*/React.createElement(\"span\", {\n            className: \"clickableSpan\",\n            onClick: function onClick() {\n              return handleShowDetail(e._id);\n            },\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 11\n            }\n          }, e.name),\n          startAt: _this2.processTime(e.startAt),\n          timeStamp: e.startAt,\n          rawStartAt: moment(e.startAt).format('MMM Do YYYY, hh:mm a'),\n          name: e.name,\n          duration: e.duration,\n          startTime: e.startAt,\n          endTime: e.endAt,\n          createdBy: e.createdBy\n        };\n      });\n      var columns = [{\n        title: i18n.t('meeting.startTime'),\n        dataIndex: 'startAt',\n        sorter: function sorter(a, b) {\n          return a.timeStamp - b.timeStamp;\n        },\n        width: 180\n      }, {\n        title: i18n.t('meeting.topic'),\n        dataIndex: 'topic',\n        sorter: function sorter(a, b) {\n          return a.name.length < b.name.length;\n        },\n        width: 450\n      }, {\n        title: 'Code',\n        render: function render(e, i) {\n          return /*#__PURE__*/React.createElement(_Tooltip, {\n            placement: \"right\",\n            title: i18n.t('meeting.copyLink'),\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              color: '#000'\n            },\n            onClick: function onClick() {\n              return _this2.handleCopyLink(i.code);\n            },\n            className: \"clickableSpan\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 13\n            }\n          }, i.code));\n        }\n      }, {\n        title: '',\n        key: 'x',\n        render: function render(e, i) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            className: \"columnBtnHolder\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(_Button, {\n            style: {\n              margin: '0 12px 0 0'\n            },\n            type: \"primary\",\n            className: \"btn-create\",\n            onClick: function onClick() {\n              return handleJoinConference(i.code);\n            },\n            disabled: !(conferenceType === _confType.ONGOING),\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 13\n            }\n          }, i18n.t('common.start')), /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              visibility: myInfo && myInfo._id === i.createdBy._id || isAllowDelete ? 'visible' : 'hidden'\n            },\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(ModalDelete, {\n            handleDeleteItem: _this2.props.handleDeleteItem,\n            itemToDelete: i,\n            title: i18n.t('meeting.deleteMeeting'),\n            refetch: _this2.props.refetch,\n            textButtonDelete: i18n.t('common.delete'),\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }\n          })));\n        }\n      }];\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"meetingHeader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        className: \"btn-create\",\n        style: {\n          fontWeight: '500'\n        },\n        onClick: handleCreateConference,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }\n      }, i18n.t('meeting.createMeeting')), /*#__PURE__*/React.createElement(_Input.Search, {\n        placeholder: \"Nh\\u1EADp t\\xEAn cu\\u1ED9c h\\u1ECDp ho\\u1EB7c m\\xE3 cu\\u1ED9c h\\u1ECDp\",\n        onChange: function onChange(e) {\n          return debouncedHandleSearchChange(e.target.value);\n        },\n        style: {\n          width: 310\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(_Table, {\n        className: \"common-table\",\n        dataSource: rowData,\n        columns: columns,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return Meeting;\n}(Component), _temp)) || _class) || _class) || _class);\nexport default withTranslation()(Meeting);","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/dashboard/conferences/Meeting.jsx"],"names":["React","Component","withTranslation","withRouter","inject","observer","moment","debounce","newNotification","isSupperAdmin","ModalDelete","_confType","ROLE","Meeting","stores","formatNumber","e","toString","formatWeekday","arrayDay","year","month","date","day","processTime","hour","minute","color","props","i18n","t","handleCopyLink","linkToCopy","window","location","href","el","document","createElement","value","body","appendChild","select","execCommand","removeChild","container","handleSearchChange","refetch","conferenceType","conferences","handleCreateConference","handleShowDetail","handleJoinConference","myInfo","globalState","debouncedHandleSearchChange","profiles","isAllowDelete","some","profile","role","code","R_ADMIN","rowData","map","key","_id","topic","name","startAt","timeStamp","rawStartAt","format","duration","startTime","endTime","endAt","createdBy","columns","title","dataIndex","sorter","a","b","width","length","render","i","margin","ONGOING","visibility","handleDeleteItem","fontWeight","target"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Table, Button, Tooltip, Input } from 'antd'\nimport { withRouter } from 'react-router'\nimport { inject, observer } from 'mobx-react'\nimport moment from 'moment'\nimport { debounce } from 'underscore'\n\nimport { newNotification, isSupperAdmin } from '@utils'\n\nimport ModalDelete from '../components/ModalDelete'\nimport { _confType, ROLE } from '@constants'\n\n@withRouter\n@inject(({ stores }) => stores)\n@observer\nclass Meeting extends Component {\n  formatNumber = e => (e < 10 ? '0' + e : e.toString())\n  formatWeekday = e => {\n    const arrayDay = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n    if (moment(e).year() === moment().year() && moment(e).month() === moment().month()) {\n      if (moment(e).date() === moment().date()) {\n        return 'Today'\n      }\n      if (moment(e).date() === moment().date() - 1) {\n        return 'Yesterday'\n      }\n      if (moment(e).date() === moment().date() + 1) {\n        return 'Tomorrow'\n      }\n    }\n    return arrayDay[moment(e).day()]\n  }\n\n  processTime = e => {\n    return e ? (\n      <span className='timeHolder'>\n        <span>{this.formatWeekday(e)}</span>\n        <span>\n          {this.formatNumber(moment(e).hour())}:{this.formatNumber(moment(e).minute())}\n        </span>\n      </span>\n    ) : (\n        <span style={{ color: 'black' }}>{this.props.i18n.t('alwaysAvailable')}</span>\n      )\n  }\n\n  handleCopyLink = e => {\n    const linkToCopy = window.location.href + `conference/${e}`\n\n    const el = document.createElement('textarea')\n    el.value = linkToCopy\n    document.body.appendChild(el)\n    el.select()\n    document.execCommand('copy')\n    document.body.removeChild(el)\n\n    return newNotification(this.props.i18n.t('notification.copyTextSuccess'), 'success', {\n      container: 'top-right'\n    })\n  }\n\n  handleSearchChange = e => {\n    const {\n      props: { refetch, conferenceType }\n    } = this\n    refetch(conferenceType, e)\n  }\n\n  render() {\n    const {\n      conferences,\n      handleCreateConference,\n      handleShowDetail,\n      handleJoinConference,\n      conferenceType,\n      i18n,\n      globalState: { myInfo }\n    } = this.props\n\n    const debouncedHandleSearchChange = debounce(this.handleSearchChange, 200)\n    const profiles = myInfo?.profiles\n    //TODO: Upgrade check by Permission code\n    const isAllowDelete = isSupperAdmin(profiles) || profiles?.some(profile => profile?.role?.code === ROLE.R_ADMIN)\n\n    const rowData = conferences.map(e => {\n      return {\n        key: e._id,\n        code: e.code,\n        _id: e._id,\n        topic: (\n          <span className='clickableSpan' onClick={() => handleShowDetail(e._id)}>\n            {e.name}\n          </span>\n        ),\n        startAt: this.processTime(e.startAt),\n        timeStamp: e.startAt,\n        rawStartAt: moment(e.startAt).format('MMM Do YYYY, hh:mm a'),\n        name: e.name,\n        duration: e.duration,\n        startTime: e.startAt,\n        endTime: e.endAt,\n        createdBy: e.createdBy\n      }\n    })\n\n    const columns = [\n      {\n        title: i18n.t('meeting.startTime'),\n        dataIndex: 'startAt',\n        sorter: (a, b) => a.timeStamp - b.timeStamp,\n        width: 180\n      },\n      {\n        title: i18n.t('meeting.topic'),\n        dataIndex: 'topic',\n        sorter: (a, b) => a.name.length < b.name.length,\n        width: 450\n      },\n      {\n        title: 'Code',\n        render: (e, i) => (\n          <Tooltip placement='right' title={i18n.t('meeting.copyLink')}>\n            <span style={{ color: '#000' }} onClick={() => this.handleCopyLink(i.code)} className='clickableSpan'>\n              {i.code}\n            </span>\n          </Tooltip>\n        )\n      },\n      {\n        title: '',\n        key: 'x',\n        render: (e, i) => (\n          <span className='columnBtnHolder'>\n            <Button\n              style={{ margin: '0 12px 0 0' }}\n              type='primary'\n              className='btn-create'\n              onClick={() => handleJoinConference(i.code)}\n              disabled={!(conferenceType === _confType.ONGOING) }\n            >\n              {i18n.t('common.start')}\n            </Button>\n\n            <span\n              style={{\n                visibility: ((myInfo && myInfo._id === i.createdBy._id) || isAllowDelete)\n                  ? 'visible'\n                  : 'hidden'\n              }}\n            >\n              <ModalDelete\n                handleDeleteItem={this.props.handleDeleteItem}\n                itemToDelete={i}\n                title={i18n.t('meeting.deleteMeeting')}\n                refetch={this.props.refetch}\n                textButtonDelete={i18n.t('common.delete')}\n              />\n            </span>\n          </span>\n        )\n      }\n    ]\n    return (\n      <>\n        <div className='meetingHeader'>\n          <Button type='primary' className='btn-create' style={{ fontWeight: '500' }} onClick={handleCreateConference}>\n            {i18n.t('meeting.createMeeting')}\n          </Button>\n\n          <Input.Search\n            placeholder='Nhập tên cuộc họp hoặc mã cuộc họp'\n            onChange={e => debouncedHandleSearchChange(e.target.value)}\n            style={{ width: 310 }}\n          />\n        </div>\n\n        <Table className='common-table' dataSource={rowData} columns={columns} />\n      </>\n    )\n  }\n}\n\nexport default withTranslation()(Meeting)\n"]},"metadata":{},"sourceType":"module"}