{"ast":null,"code":"import \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/tooltip/style\";\nimport _Tooltip from \"antd/es/tooltip\";\nimport _toConsumableArray from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/conference2/collab-panel/AttendanceManagementCollapse/PreviousAttendancesView.jsx\";\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport moment from 'moment';\nimport CurrentAttendanceView from './CurrentAttendanceView';\nvar PreviousAttendancesView = (_dec = inject(function (_ref) {\n  var stores = _ref.stores;\n  return stores;\n}), _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(PreviousAttendancesView, _Component);\n\n  var _super = _createSuper(PreviousAttendancesView);\n\n  function PreviousAttendancesView() {\n    var _this;\n\n    _classCallCheck(this, PreviousAttendancesView);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.checkAttended = function (userId, index, doneAttendances) {\n      return doneAttendances.map(function (e) {\n        return e.userAttendances.some(function (e) {\n          return e.isAttended && e.user._id === userId;\n        });\n      })[index];\n    };\n\n    _this.generateObject = function (conferenceUsers, doneAttendances) {\n      var temp = conferenceUsers.map(function (ele, index) {\n        return {\n          index: index,\n          fullName: \"\".concat(ele.user.firstname + ' ' + ele.user.lastname)\n        };\n      });\n\n      var _loop = function _loop(index) {\n        temp = temp.map(function (element, i) {\n          return _objectSpread({}, element, {}, _defineProperty({}, \"doneAtt-\".concat(index), _this.checkAttended(conferenceUsers[i].user._id, index, doneAttendances)));\n        });\n      };\n\n      for (var index = 0; index < doneAttendances.length; index++) {\n        _loop(index);\n      }\n\n      return temp;\n    };\n\n    return _this;\n  }\n\n  _createClass(PreviousAttendancesView, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          displayByUser = _this$props.displayByUser,\n          _this$props$conferenc = _this$props.conferenceState,\n          doneAttendances = _this$props$conferenc.doneAttendances,\n          conferenceUsers = _this$props$conferenc.conferenceUsers;\n      var rowsData = displayByUser ? this.generateObject(conferenceUsers, doneAttendances) : doneAttendances.map(function (ele, index) {\n        return {\n          index: index,\n          //NOTE: change here if needed\n          numberOfAttendants: \"\".concat(ele.userAttendances.filter(function (e) {\n            return e.isAttended;\n          }).length, \"/\").concat(conferenceUsers.length),\n          createdAt: ele.createdAt\n        };\n      });\n      var columns = displayByUser ? [{\n        title: 'Họ và Tên',\n        dataIndex: 'fullName',\n        key: 'fullName',\n        width: 150,\n        fixed: 'left',\n        ellipsis: true\n      }].concat(_toConsumableArray(doneAttendances.map(function (doneAttendance, index) {\n        return {\n          title: /*#__PURE__*/React.createElement(_Tooltip, {\n            title: moment(doneAttendance.createdAt).format('DD[/]MM[/]YYYY, HH:mm'),\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 15\n            }\n          }, \"L\\u1EA7n \", index + 1),\n          dataIndex: \"doneAtt-\".concat(index),\n          key: \"doneAtt-\".concat(index),\n          width: 70,\n          className: 'checkedAttend',\n          render: function render(bool) {\n            return /*#__PURE__*/React.createElement(\"span\", {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 29\n              }\n            }, bool && /*#__PURE__*/React.createElement(_Icon, {\n              type: \"check\",\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 44\n              }\n            }));\n          }\n        };\n      }))) : [{\n        title: 'STT',\n        dataIndex: 'index',\n        className: 'index',\n        key: 'index'\n      }, {\n        title: 'Thời gian',\n        dataIndex: 'createdAt',\n        key: 'createdAt',\n        render: function render(date) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }\n          }, moment(date).format('DD[/]MM[/]YYYY, HH:mm'));\n        }\n      }, {\n        title: 'Sỉ số',\n        dataIndex: 'numberOfAttendants',\n        className: 'numberOfAttendants',\n        key: 'numberOfAttendants',\n        width: 100\n      }];\n      return displayByUser ? /*#__PURE__*/React.createElement(_Table, {\n        scroll: {\n          y: '100%',\n          x: 70\n        },\n        size: 'small',\n        pagination: false,\n        columns: columns,\n        dataSource: rowsData,\n        rowKey: \"index\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 7\n        }\n      }) : /*#__PURE__*/React.createElement(_Table, {\n        size: 'small',\n        pagination: false,\n        expandedRowRender: function expandedRowRender(record, index, indent, expanded) {\n          return /*#__PURE__*/React.createElement(CurrentAttendanceView //NOTE: change here if needed\n          , {\n            conferenceUsers: conferenceUsers,\n            attendanceInfo: doneAttendances[index],\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 11\n            }\n          });\n        },\n        columns: columns,\n        dataSource: rowsData,\n        rowKey: \"index\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return PreviousAttendancesView;\n}(Component), _temp)) || _class) || _class);\nexport default PreviousAttendancesView;","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/conference2/collab-panel/AttendanceManagementCollapse/PreviousAttendancesView.jsx"],"names":["React","Component","inject","observer","moment","CurrentAttendanceView","PreviousAttendancesView","stores","checkAttended","userId","index","doneAttendances","map","e","userAttendances","some","isAttended","user","_id","generateObject","conferenceUsers","temp","ele","fullName","firstname","lastname","element","i","length","props","displayByUser","conferenceState","rowsData","numberOfAttendants","filter","createdAt","columns","title","dataIndex","key","width","fixed","ellipsis","doneAttendance","format","className","render","bool","date","y","x","record","indent","expanded"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport moment from 'moment'\nimport { Table, Icon, Tooltip } from 'antd'\n\nimport CurrentAttendanceView from './CurrentAttendanceView'\n\n@inject(({ stores }) => stores)\n@observer\nclass PreviousAttendancesView extends Component {\n  checkAttended = (userId, index, doneAttendances) =>\n    doneAttendances.map(e =>\n      e.userAttendances.some(e => {\n        return e.isAttended && e.user._id === userId\n      })\n    )[index]\n\n  generateObject = (conferenceUsers, doneAttendances) => {\n    let temp = conferenceUsers.map((ele, index) => ({\n      index,\n      fullName: `${ele.user.firstname + ' ' + ele.user.lastname}`\n    }))\n\n    for (let index = 0; index < doneAttendances.length; index++) {\n      temp = temp.map((element, i) => ({\n        ...element,\n        ...{ [`doneAtt-${index}`]: this.checkAttended(conferenceUsers[i].user._id, index, doneAttendances) }\n      }))\n    }\n\n    return temp\n  }\n\n  render() {\n    const {\n      props: {\n        displayByUser,\n        conferenceState: { doneAttendances, conferenceUsers }\n      }\n    } = this\n\n    const rowsData = displayByUser\n      ? this.generateObject(conferenceUsers, doneAttendances)\n      : doneAttendances.map((ele, index) => ({\n          index,\n          //NOTE: change here if needed\n          numberOfAttendants: `${ele.userAttendances.filter(e => e.isAttended).length}/${conferenceUsers.length}`,\n          createdAt: ele.createdAt\n        }))\n    const columns = displayByUser\n      ? [\n          {\n            title: 'Họ và Tên',\n            dataIndex: 'fullName',\n            key: 'fullName',\n            width: 150,\n            fixed: 'left',\n            ellipsis: true\n          },\n          ...doneAttendances.map((doneAttendance, index) => ({\n            title: (\n              <Tooltip title={moment(doneAttendance.createdAt).format('DD[/]MM[/]YYYY, HH:mm')}>\n                Lần {index + 1}\n              </Tooltip>\n            ),\n            dataIndex: `doneAtt-${index}`,\n            key: `doneAtt-${index}`,\n            width: 70,\n            className: 'checkedAttend',\n            render: bool => <span>{bool && <Icon type='check' />}</span>\n          }))\n        ]\n      : [\n          {\n            title: 'STT',\n            dataIndex: 'index',\n            className: 'index',\n            key: 'index'\n          },\n          {\n            title: 'Thời gian',\n            dataIndex: 'createdAt',\n            key: 'createdAt',\n            render: date => <span>{moment(date).format('DD[/]MM[/]YYYY, HH:mm')}</span>\n          },\n          {\n            title: 'Sỉ số',\n            dataIndex: 'numberOfAttendants',\n            className: 'numberOfAttendants',\n            key: 'numberOfAttendants',\n            width: 100\n          }\n        ]\n\n    return displayByUser ? (\n      <Table\n        scroll={{ y: '100%', x: 70 }}\n        size={'small'}\n        pagination={false}\n        columns={columns}\n        dataSource={rowsData}\n        rowKey='index'\n      />\n    ) : (\n      <Table\n        size={'small'}\n        pagination={false}\n        expandedRowRender={(record, index, indent, expanded) => (\n          <CurrentAttendanceView\n            //NOTE: change here if needed\n            conferenceUsers={conferenceUsers}\n            attendanceInfo={doneAttendances[index]}\n          />\n        )}\n        columns={columns}\n        dataSource={rowsData}\n        rowKey='index'\n      />\n    )\n  }\n}\nexport default PreviousAttendancesView\n"]},"metadata":{},"sourceType":"module"}