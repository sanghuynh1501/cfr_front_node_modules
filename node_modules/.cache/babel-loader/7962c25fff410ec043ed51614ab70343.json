{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/dashboard/profile/FormChangePassword.jsx\";\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { client, M_UPDATE_PASSWORD } from '@graphql';\nimport { returnError, newNotification, parseError } from '@utils';\n\nvar FormChangePassword = /*#__PURE__*/function (_React$Component) {\n  _inherits(FormChangePassword, _React$Component);\n\n  var _super = _createSuper(FormChangePassword);\n\n  function FormChangePassword() {\n    var _this;\n\n    _classCallCheck(this, FormChangePassword);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        //MUTATION CREATE USER\n        if (!err) {\n          client.mutate({\n            mutation: M_UPDATE_PASSWORD,\n            variables: {\n              userId: _this.props._id,\n              updatePassword: {\n                oldPassword: values['old-password'],\n                newPassword: values['new-password']\n              }\n            }\n          }).then(function (_ref) {\n            var data = _ref.data;\n\n            if (!data.updateUserPassword) {\n              throw new Error('notification.updatePasswordError');\n            }\n\n            _this.props.form.resetFields();\n\n            _this.props.handleToggleEditPassword();\n\n            newNotification(_this.props.i18n.t('notification.updatePasswordSuccess'), 'success', {\n              container: 'top-right'\n            });\n          }).catch(function (errors) {\n            returnError('Error', {\n              errorMessage: _this.props.i18n.t(parseError(errors))\n            }, {\n              container: 'top-right'\n            });\n          });\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(FormChangePassword, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          i18n = _this$props.i18n,\n          getFieldDecorator = _this$props.form.getFieldDecorator,\n          handleToggleEditPassword = _this$props.handleToggleEditPassword;\n      return /*#__PURE__*/React.createElement(_Form, {\n        onSubmit: this.handleSubmit,\n        ref: \"form\",\n        style: {\n          width: '380px'\n        },\n        className: \"common-form form-edit-password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: i18n.t('user.oldPassword'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      }, getFieldDecorator('old-password', {\n        rules: [{\n          required: true,\n          message: i18n.t('require.requireOldPassword')\n        }]\n      })( /*#__PURE__*/React.createElement(_Input, {\n        type: \"password\",\n        placeholder: i18n.t('user.oldPassword'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: i18n.t('user.newPassword'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }\n      }, getFieldDecorator('new-password', {\n        rules: [{\n          required: true,\n          message: i18n.t('require.requireNewPassword')\n        }]\n      })( /*#__PURE__*/React.createElement(_Input, {\n        type: \"password\",\n        placeholder: i18n.t('user.newPassword'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row',\n          alignItems: 'center',\n          marginTop: '10px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        className: \"btn-save\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }\n      }, i18n.t('common.saveChanges'))), /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        className: \"btn-cancel\",\n        onClick: handleToggleEditPassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }\n      }, i18n.t('common.cancel')))));\n    }\n  }]);\n\n  return FormChangePassword;\n}(React.Component);\n\nexport default _Form.create({\n  name: 'normal_login'\n})(withTranslation()(FormChangePassword));","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/dashboard/profile/FormChangePassword.jsx"],"names":["React","withTranslation","client","M_UPDATE_PASSWORD","returnError","newNotification","parseError","FormChangePassword","handleSubmit","e","preventDefault","props","form","validateFields","err","values","mutate","mutation","variables","userId","_id","updatePassword","oldPassword","newPassword","then","data","updateUserPassword","Error","resetFields","handleToggleEditPassword","i18n","t","container","catch","errors","errorMessage","getFieldDecorator","width","rules","required","message","display","flexDirection","alignItems","marginTop","Component","create","name"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Form, Input, Button } from 'antd'\n\nimport { client, M_UPDATE_PASSWORD } from '@graphql'\nimport { returnError, newNotification, parseError } from '@utils'\n\nclass FormChangePassword extends React.Component {\n  handleSubmit = e => {\n    e.preventDefault()\n    this.props.form.validateFields((err, values) => {\n      //MUTATION CREATE USER\n      if (!err) {\n        client\n          .mutate({\n            mutation: M_UPDATE_PASSWORD,\n            variables: {\n              userId: this.props._id,\n              updatePassword: {\n                oldPassword: values['old-password'],\n                newPassword: values['new-password']\n              }\n            }\n          })\n          .then(({ data }) => {\n            if (!data.updateUserPassword) {\n              throw new Error('notification.updatePasswordError')\n            }\n\n            this.props.form.resetFields()\n            this.props.handleToggleEditPassword()\n            newNotification(this.props.i18n.t('notification.updatePasswordSuccess'), 'success', {\n              container: 'top-right'\n            })\n          })\n          .catch(errors => {\n            returnError(\n              'Error',\n              {\n                errorMessage: this.props.i18n.t(parseError(errors))\n              },\n              { container: 'top-right' }\n            )\n          })\n      }\n    })\n  }\n\n  render() {\n    const {\n      props: {\n        i18n,\n        form: { getFieldDecorator },\n        handleToggleEditPassword\n      }\n    } = this\n\n    return (\n      <Form\n        onSubmit={this.handleSubmit}\n        ref='form'\n        style={{ width: '380px' }}\n        className='common-form form-edit-password'\n      >\n        <Form.Item label={i18n.t('user.oldPassword')}>\n          {getFieldDecorator('old-password', {\n            rules: [\n              {\n                required: true,\n                message: i18n.t('require.requireOldPassword')\n              }\n            ]\n          })(\n            <Input type='password' placeholder={i18n.t('user.oldPassword')} />\n          )}\n        </Form.Item>\n        <Form.Item label={i18n.t('user.newPassword')}>\n          {getFieldDecorator('new-password', {\n            rules: [\n              {\n                required: true,\n                message: i18n.t('require.requireNewPassword')\n              }\n            ]\n          })(\n            <Input type='password' placeholder={i18n.t('user.newPassword')} />\n          )}\n        </Form.Item>\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            marginTop: '10px'\n          }}\n        >\n          <Form.Item>\n            <Button\n              type='primary'\n              htmlType='submit'\n              className='btn-save'\n            >\n              {i18n.t('common.saveChanges')}\n            </Button>\n          </Form.Item>\n          <Form.Item>\n            <Button\n              className='btn-cancel'\n              onClick={handleToggleEditPassword}\n            >\n              {i18n.t('common.cancel')}\n            </Button>\n          </Form.Item>\n        </div>\n      </Form>\n    )\n  }\n}\n\nexport default Form.create({ name: 'normal_login' })(withTranslation()(FormChangePassword))"]},"metadata":{},"sourceType":"module"}