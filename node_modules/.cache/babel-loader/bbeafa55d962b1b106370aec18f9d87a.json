{"ast":null,"code":"import _toConsumableArray from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/conference2/collab-panel/tabs/ShareComponents/MultipleQuestion.jsx\";\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { withRouter } from 'react-router-dom';\nimport { inject, observer } from 'mobx-react';\nimport { client, M_CREATE_VOTE } from '@graphql';\nimport { newNotification } from '@utils';\nimport './MultipleQuestion.less';\nimport iconDelete from \"@misc/images/delete.svg\";\nvar MultipleQuestion = (_dec = inject(function (_ref) {\n  var stores = _ref.stores;\n  return stores;\n}), withRouter(_class = _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_React$Component) {\n  _inherits(MultipleQuestion, _React$Component);\n\n  var _super = _createSuper(MultipleQuestion);\n\n  function MultipleQuestion() {\n    var _this;\n\n    _classCallCheck(this, MultipleQuestion);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      question: '',\n      answers: [{\n        key: 'A',\n        value: ''\n      }, {\n        key: 'B',\n        value: ''\n      }]\n    };\n\n    _this.handleAddAnswer = function () {\n      _this.setState(function (_preState) {\n        return {\n          answers: [].concat(_toConsumableArray(_preState.answers), [{\n            key: String.fromCharCode(65 + _preState.answers.length),\n            value: ''\n          }])\n        };\n      });\n    };\n\n    _this.handleDeleteAnswer = function (value) {\n      var len = _this.state.answers.length;\n\n      _this.setState(function (_preState) {\n        return {\n          answers: [].concat(_toConsumableArray(_preState.answers.slice(0, value)), _toConsumableArray(_preState.answers.slice(value + 1, len)))\n        };\n      });\n    };\n\n    _this.handleCreateVote = function () {\n      var dataAnsers = _this.state.answers.map(function (item) {\n        return {\n          key: item.key,\n          value: _this.refs[\"answer\".concat(item.key)].value\n        };\n      });\n\n      var dataQuestion = _this.refs.question.value; // MUTAITON CREATE VOTE\n\n      client.mutate({\n        mutation: M_CREATE_VOTE,\n        variables: {\n          newPollInput: {\n            conferenceId: _this.props.conferenceState.conference._id,\n            question: dataQuestion,\n            answers: dataAnsers,\n            type: 'Multiple'\n          }\n        }\n      }).catch(function (error) {\n        return newNotification('Please try again later!', 'danger');\n      });\n\n      _this.props.handleBack('menu');\n    };\n\n    return _this;\n  }\n\n  _createClass(MultipleQuestion, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var answers = this.state.answers,\n          handleAddAnswer = this.handleAddAnswer,\n          handleDeleteAnswer = this.handleDeleteAnswer,\n          handleCreateVote = this.handleCreateVote,\n          _this$props = this.props,\n          handleBack = _this$props.handleBack,\n          i18n = _this$props.i18n;\n      var html = answers.map(function (item, i) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"answer-item\",\n          key: i,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 11\n          }\n        }, i + 1), /*#__PURE__*/React.createElement(\"input\", {\n          ref: \"answer\".concat(item.key),\n          type: \"text\",\n          placeholder: i18n.t('selectAnswer'),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          disabled: answers.length <= 2,\n          onClick: function onClick() {\n            return handleDeleteAnswer(i);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: iconDelete,\n          alt: \"icon\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }\n        })));\n      });\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"multiple-question\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"multiple-question-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        placeholder: i18n.t('makeQuestion'),\n        ref: \"question\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"multiple-question__answer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }\n      }, html, answers.length < 5 ? /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn-add\",\n        onClick: handleAddAnswer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      }, i18n.t('addChoice')) : null))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"action-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn-cancel\",\n        onClick: function onClick() {\n          return handleBack('vote');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }\n      }, i18n.t('cancel')), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn-start\",\n        onClick: handleCreateVote,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }\n      }, i18n.t('start'))));\n    }\n  }]);\n\n  return MultipleQuestion;\n}(React.Component), _temp)) || _class) || _class) || _class);\nexport default withTranslation()(MultipleQuestion);","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/conference2/collab-panel/tabs/ShareComponents/MultipleQuestion.jsx"],"names":["React","withTranslation","withRouter","inject","observer","client","M_CREATE_VOTE","newNotification","MultipleQuestion","stores","state","question","answers","key","value","handleAddAnswer","setState","_preState","String","fromCharCode","length","handleDeleteAnswer","len","slice","handleCreateVote","dataAnsers","map","item","refs","dataQuestion","mutate","mutation","variables","newPollInput","conferenceId","props","conferenceState","conference","_id","type","catch","error","handleBack","i18n","html","i","t","iconDelete","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from 'react-router-dom'\nimport { inject, observer } from 'mobx-react'\nimport { client, M_CREATE_VOTE } from '@graphql'\nimport { newNotification } from '@utils'\nimport './MultipleQuestion.less'\n\nimport iconDelete from '@misc/images/delete.svg'\n\n@withRouter\n@inject(({ stores }) => stores)\n@observer\nclass MultipleQuestion extends React.Component {\n  state = {\n    question: '',\n    answers: [\n      {\n        key: 'A',\n        value: ''\n      },\n      {\n        key: 'B',\n        value: ''\n      }\n    ]\n  }\n\n  handleAddAnswer = () => {\n    this.setState(_preState => ({\n      answers: [\n        ..._preState.answers,\n        {\n          key: String.fromCharCode(65 + _preState.answers.length),\n          value: ''\n        }\n      ]\n    }))\n  }\n\n  handleDeleteAnswer = value => {\n    const len = this.state.answers.length\n    this.setState(_preState => ({\n      answers: [\n        ..._preState.answers.slice(0, value),\n        ..._preState.answers.slice(value + 1, len)\n      ]\n    }))\n  }\n\n  // Create Vote\n  handleCreateVote = () => {\n    const dataAnsers = this.state.answers.map(item => {\n      return {\n        key: item.key,\n        value: this.refs[`answer${item.key}`].value\n      }\n    })\n\n    const dataQuestion = this.refs.question.value\n    // MUTAITON CREATE VOTE\n    client\n      .mutate({\n        mutation: M_CREATE_VOTE,\n        variables: {\n          newPollInput: {\n            conferenceId: this.props.conferenceState.conference._id,\n            question: dataQuestion,\n            answers: dataAnsers,\n            type: 'Multiple'\n          }\n        }\n      })\n      .catch(error => {\n        return newNotification('Please try again later!', 'danger')\n      })\n    this.props.handleBack('menu')\n  }\n\n  render() {\n    const {\n      state: { answers },\n      handleAddAnswer,\n      handleDeleteAnswer,\n      handleCreateVote,\n      props: { handleBack, i18n }\n    } = this\n    const html = answers.map((item, i) => {\n      return (\n        <div className='answer-item' key={i}>\n          <p>{i + 1}</p>\n          <input\n            ref={`answer${item.key}`}\n            type='text'\n            placeholder={i18n.t('selectAnswer')}\n          />\n          <button\n            type='button'\n            disabled={answers.length <= 2}\n            onClick={() => handleDeleteAnswer(i)}\n          >\n            <img src={iconDelete} alt='icon' />\n          </button>\n        </div>\n      )\n    })\n    return (\n      <>\n        <div className='multiple-question'>\n          <div className='multiple-question-box'>\n            <textarea placeholder={i18n.t('makeQuestion')} ref='question' />\n            <div className='multiple-question__answer'>\n              {html}\n              {answers.length < 5 ? (\n                <button\n                  type='button'\n                  className='btn-add'\n                  onClick={handleAddAnswer}\n                >\n                  {i18n.t('addChoice')}\n                </button>\n              ) : null}\n            </div>\n          </div>\n        </div>\n        <div className='action-box'>\n          <button\n            type='button'\n            className='btn-cancel'\n            onClick={() => handleBack('vote')}\n          >\n            {i18n.t('cancel')}\n          </button>\n          <button\n            type='button'\n            className='btn-start'\n            onClick={handleCreateVote}\n          >\n            {i18n.t('start')}\n          </button>\n        </div>\n      </>\n    )\n  }\n}\n\nexport default withTranslation()(MultipleQuestion)\n"]},"metadata":{},"sourceType":"module"}