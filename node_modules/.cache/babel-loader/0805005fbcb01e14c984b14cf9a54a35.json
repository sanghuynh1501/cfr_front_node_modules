{"ast":null,"code":"import \"antd/es/checkbox/style\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport \"antd/es/tabs/style\";\nimport _Tabs from \"antd/es/tabs\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/conference2/collab-panel/QnAManagementCollapse/index.jsx\";\n\nimport React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { M_START_QNA_SESSION, client, M_END_QNA_SESSION } from '@graphql';\nimport { newNotification, returnError } from '@utils';\nimport QnAPublicView from './QnAPublicView';\nimport QnAApprovalView from './QnAApprovalView';\nvar TabPane = _Tabs.TabPane; // @withRouter\n\nvar QnAManagementCollapse = (_dec = inject(function (_ref) {\n  var stores = _ref.stores;\n  return stores;\n}), _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_React$Component) {\n  _inherits(QnAManagementCollapse, _React$Component);\n\n  var _super = _createSuper(QnAManagementCollapse);\n\n  function QnAManagementCollapse(props) {\n    var _this;\n\n    _classCallCheck(this, QnAManagementCollapse);\n\n    _this = _super.call(this, props);\n\n    _this.handleStartQnASession = function () {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          _assertThisInitialize2 = _assertThisInitialize.props,\n          conferenceState = _assertThisInitialize2.conferenceState,\n          conferenceId = _assertThisInitialize2.conferenceState.conference._id,\n          needApproval = _assertThisInitialize.state.needApproval;\n\n      client.mutate({\n        mutation: M_START_QNA_SESSION,\n        variables: {\n          newQNASessionInput: {\n            conferenceId: conferenceId,\n            needApproval: needApproval\n          }\n        }\n      }).then(function (_ref2) {\n        var createQNASession = _ref2.data.createQNASession;\n\n        if (createQNASession) {\n          conferenceState.setState({\n            hasQnA: true\n          }); // this.setState({ hasQnA: true })\n        }\n      }).catch(function (error) {\n        return newNotification('Please try again later!', 'danger');\n      });\n    };\n\n    _this.handleEndQnASession = function () {\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          conferenceId = _assertThisInitialize3.props.conferenceState.conference._id;\n\n      client.mutate({\n        mutation: M_END_QNA_SESSION,\n        variables: {\n          conferenceId: conferenceId\n        }\n      }).then(function (_ref3) {\n        var endActiveQNASession = _ref3.data.endActiveQNASession;\n\n        if (endActiveQNASession) {// this.setState({ hasQnA: false })\n        }\n      }).catch(function (error) {\n        return returnError('endActiveQNASession', {\n          error: error,\n          errorMessage: 'Please try again later!'\n        });\n      });\n    };\n\n    _this.state = {\n      needApproval: false\n    };\n    return _this;\n  }\n\n  _createClass(QnAManagementCollapse, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          conferenceState = _this$props.conferenceState,\n          _this$props$conferenc = _this$props.conferenceState,\n          hasQnA = _this$props$conferenc.hasQnA,\n          activeQnA = _this$props$conferenc.activeQnA,\n          QNA = _this$props$conferenc.activeQnA.QNA,\n          needApproval = this.state.needApproval;\n      var selectedTabs = [conferenceState.isShowPoll, conferenceState.isShowPollManagement, conferenceState.isShowParticipants, conferenceState.isShowMessages, conferenceState.isShowAttendancesManagement, conferenceState.isShowQnAManagement, conferenceState.isShowQnA].filter(function (e) {\n        return e;\n      }).length;\n      var needApprovalQnA = QNA ? QNA.filter(function (qnaItem) {\n        return !qnaItem.isApproved;\n      }) : [];\n      var publicQnA = QNA ? QNA.filter(function (qnaItem) {\n        return qnaItem.isApproved;\n      }) : [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"qna-management-container\",\n        style: {\n          height: \"calc(100vh - \".concat(selectedTabs * 20 + 1, \"px)\")\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 7\n        }\n      }, hasQnA && /*#__PURE__*/React.createElement(_Tabs, {\n        defaultActiveKey: \"2\",\n        type: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TabPane, {\n        tab: /*#__PURE__*/React.createElement(\"span\", {\n          className: \"infoWrapper\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }\n        }, \"\\u0110\\xE3 duy\\u1EC7t \", /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 28\n          }\n        }, activeQnA.needApproval ? needApprovalQnA.length : '')),\n        disabled: !activeQnA.needApproval,\n        key: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(QnAApprovalView, {\n        needApprovalQnA: needApprovalQnA,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(TabPane, {\n        tab: \"\\u0110\\xE3 duy\\u1EC7t\",\n        key: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(QnAPublicView, {\n        publicQnA: publicQnA,\n        authorizedView: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bottmBtnsWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }\n      }, hasQnA ? /*#__PURE__*/React.createElement(_Button, {\n        onClick: this.handleEndQnASession,\n        style: {\n          width: '30%'\n        },\n        type: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }\n      }, \"K\\u1EBFt Th\\xFAc\") : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"startBtnHolder\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Checkbox, {\n        checked: needApproval,\n        onChange: function onChange(_ref4) {\n          var checked = _ref4.target.checked;\n          return _this2.setState({\n            needApproval: checked\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 15\n        }\n      }, \"Ki\\u1EC3m duy\\u1EC7t c\\xE2u h\\u1ECFi\"), /*#__PURE__*/React.createElement(_Button, {\n        onClick: this.handleStartQnASession,\n        style: {\n          width: '30%'\n        },\n        type: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 15\n        }\n      }, \"B\\u1EAFt \\u0110\\u1EA7u\"))));\n    }\n  }]);\n\n  return QnAManagementCollapse;\n}(React.Component), _temp)) || _class) || _class);\nexport default QnAManagementCollapse;","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/conference2/collab-panel/QnAManagementCollapse/index.jsx"],"names":["React","inject","observer","M_START_QNA_SESSION","client","M_END_QNA_SESSION","newNotification","returnError","QnAPublicView","QnAApprovalView","TabPane","QnAManagementCollapse","stores","props","handleStartQnASession","conferenceState","conferenceId","conference","_id","needApproval","state","mutate","mutation","variables","newQNASessionInput","then","createQNASession","data","setState","hasQnA","catch","error","handleEndQnASession","endActiveQNASession","errorMessage","activeQnA","QNA","selectedTabs","isShowPoll","isShowPollManagement","isShowParticipants","isShowMessages","isShowAttendancesManagement","isShowQnAManagement","isShowQnA","filter","e","length","needApprovalQnA","qnaItem","isApproved","publicQnA","height","width","checked","target","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { Button, Checkbox, Tabs } from 'antd'\nimport { M_START_QNA_SESSION, client, M_END_QNA_SESSION } from '@graphql'\nimport { newNotification, returnError } from '@utils'\nimport QnAPublicView from './QnAPublicView'\nimport QnAApprovalView from './QnAApprovalView'\n\nconst { TabPane } = Tabs\n\n// @withRouter\n@inject(({ stores }) => stores)\n@observer\nclass QnAManagementCollapse extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      needApproval: false\n    }\n  }\n\n  handleStartQnASession = () => {\n    const {\n      props: {\n        conferenceState,\n        conferenceState: {\n          conference: { _id: conferenceId }\n        }\n      },\n      state: { needApproval }\n    } = this\n\n    client\n      .mutate({\n        mutation: M_START_QNA_SESSION,\n        variables: {\n          newQNASessionInput: {\n            conferenceId,\n            needApproval\n          }\n        }\n      })\n      .then(({ data: { createQNASession } }) => {\n        if (createQNASession) {\n          conferenceState.setState({ hasQnA: true })\n          // this.setState({ hasQnA: true })\n        }\n      })\n      .catch(error => {\n        return newNotification('Please try again later!', 'danger')\n      })\n  }\n\n  handleEndQnASession = () => {\n    const {\n      props: {\n        conferenceState: {\n          conference: { _id: conferenceId }\n        }\n      }\n    } = this\n\n    client\n      .mutate({\n        mutation: M_END_QNA_SESSION,\n        variables: {\n          conferenceId\n        }\n      })\n      .then(({ data: { endActiveQNASession } }) => {\n        if (endActiveQNASession) {\n          // this.setState({ hasQnA: false })\n        }\n      })\n      .catch(error =>\n        returnError('endActiveQNASession', {\n          error,\n          errorMessage: 'Please try again later!'\n        })\n      )\n  }\n\n  render() {\n    const {\n      props: {\n        conferenceState,\n        conferenceState: {\n          hasQnA,\n          activeQnA,\n          activeQnA: { QNA }\n        }\n      },\n      state: { needApproval }\n    } = this\n\n    const selectedTabs = [\n      conferenceState.isShowPoll,\n      conferenceState.isShowPollManagement,\n      conferenceState.isShowParticipants,\n      conferenceState.isShowMessages,\n      conferenceState.isShowAttendancesManagement,\n      conferenceState.isShowQnAManagement,\n      conferenceState.isShowQnA\n    ].filter(e => e).length\n\n    const needApprovalQnA = QNA ? QNA.filter(qnaItem => !qnaItem.isApproved) : []\n    const publicQnA = QNA ? QNA.filter(qnaItem => qnaItem.isApproved) : []\n\n    return (\n      <div className='qna-management-container' style={{ height: `calc(100vh - ${selectedTabs * 20 + 1}px)` }}>\n        {hasQnA && (\n          <Tabs defaultActiveKey='2' type='card'>\n            <TabPane\n              tab={\n                <span className='infoWrapper'>\n                  Đã duyệt <span className='info'>{activeQnA.needApproval ? needApprovalQnA.length : ''}</span>\n                </span>\n              }\n              disabled={!activeQnA.needApproval}\n              key='1'\n            >\n              <QnAApprovalView needApprovalQnA={needApprovalQnA} />\n            </TabPane>\n            <TabPane tab='Đã duyệt' key='2'>\n              <QnAPublicView publicQnA={publicQnA} authorizedView={true} />\n            </TabPane>\n          </Tabs>\n        )}\n\n        <div className='bottmBtnsWrapper'>\n          {hasQnA ? (\n            <Button onClick={this.handleEndQnASession} style={{ width: '30%' }} type='danger'>\n              Kết Thúc\n            </Button>\n          ) : (\n            <div className='startBtnHolder'>\n              <Checkbox\n                checked={needApproval}\n                onChange={({ target: { checked } }) => this.setState({ needApproval: checked })}\n              >\n                Kiểm duyệt câu hỏi\n              </Checkbox>\n\n              <Button onClick={this.handleStartQnASession} style={{ width: '30%' }} type='primary'>\n                Bắt Đầu\n              </Button>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default QnAManagementCollapse\n"]},"metadata":{},"sourceType":"module"}