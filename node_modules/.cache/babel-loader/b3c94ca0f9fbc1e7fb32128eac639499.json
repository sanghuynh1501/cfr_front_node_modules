{"ast":null,"code":"import \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport _objectSpread from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/dashboard/groupDetail2/components/ListMemberNode.jsx\";\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport ModalDelete from '../../components/ModalDelete';\nimport client, { M_KICK_MEMBER_IN_NODE } from '@graphql';\nimport { newNotification, returnError } from '@utils';\nimport ModalAssignRole from './ModalEditRole/ModalAssignRole';\nimport ModalEditUserInNode from './ModalEditUserInNode/ModalEditUserInNode';\nimport { observer, inject } from 'mobx-react';\nvar Search = _Input.Search;\nvar MemberNode = (_dec = inject(function (_ref) {\n  var stores = _ref.stores;\n  return stores;\n}), _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(MemberNode, _React$PureComponent);\n\n  var _super = _createSuper(MemberNode);\n\n  function MemberNode() {\n    var _this;\n\n    _classCallCheck(this, MemberNode);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      selectedRowKeys: [],\n      filterKeys: ''\n    };\n\n    _this.onSelectChange = function (selectedRowKeys) {\n      _this.setState({\n        selectedRowKeys: selectedRowKeys\n      });\n    };\n\n    _this.onChangeSearch = function (e) {\n      e.persist();\n      var value = e.target.value;\n\n      _this.setState({\n        filterKeys: value\n      });\n    };\n\n    _this.handleKickMember = function (userIds) {\n      var _this$props = _this.props,\n          node = _this$props.node,\n          queryNode = _this$props.queryNode,\n          i18n = _this$props.i18n;\n      client.query({\n        query: M_KICK_MEMBER_IN_NODE,\n        fetchPolicy: 'no-cache',\n        variables: {\n          nodeId: node._id,\n          userIds: userIds\n        }\n      }).then(function () {\n        queryNode(node._id);\n        newNotification(i18n.t('group.removeUserFromNode'), 'success', {\n          container: 'top-right'\n        });\n      }).catch(function (error) {\n        return returnError('Error: ', {\n          error: 'Error occured: ',\n          errorMessage: error.message\n        }, {\n          container: 'top-center'\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(MemberNode, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          selectedRowKeys = _this$state.selectedRowKeys,\n          filterKeys = _this$state.filterKeys,\n          _this$props2 = this.props,\n          members = _this$props2.members,\n          i18n = _this$props2.i18n,\n          node = _this$props2.node,\n          queryNode = _this$props2.queryNode,\n          isAllowEditUserInNode = _this$props2.isAllowEditUserInNode,\n          isAllowAssignRole = _this$props2.isAllowAssignRole,\n          isAllowKickUser = _this$props2.isAllowKickUser;\n      var columns = [{\n        title: i18n.t('user.username'),\n        dataIndex: 'username'\n      }, {\n        title: i18n.t('common.name'),\n        render: function render(user) {\n          return \"\".concat(user.firstname, \" \").concat(user.lastname);\n        }\n      }, {\n        title: 'Email',\n        dataIndex: 'email'\n      }, {\n        title: i18n.t('role.role'),\n        render: function render(user) {\n          var _user$profiles, _user$profiles$find, _user$profiles$find$r;\n\n          return user === null || user === void 0 ? void 0 : (_user$profiles = user.profiles) === null || _user$profiles === void 0 ? void 0 : (_user$profiles$find = _user$profiles.find(function (profile) {\n            var _profile$node;\n\n            return (profile === null || profile === void 0 ? void 0 : (_profile$node = profile.node) === null || _profile$node === void 0 ? void 0 : _profile$node._id) === node._id;\n          })) === null || _user$profiles$find === void 0 ? void 0 : (_user$profiles$find$r = _user$profiles$find.role) === null || _user$profiles$find$r === void 0 ? void 0 : _user$profiles$find$r.name;\n        }\n      }, {\n        title: '',\n        key: 'x',\n        render: function render(_, user) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            className: \"columnBtnHolder\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 11\n            }\n          }, isAllowEditUserInNode && /*#__PURE__*/React.createElement(ModalEditUserInNode, {\n            user: user,\n            node: node,\n            queryNode: queryNode,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }\n          }), isAllowAssignRole && /*#__PURE__*/React.createElement(ModalAssignRole, {\n            labelButton: i18n.t('group.assignRole'),\n            user: user,\n            node: node,\n            queryNode: queryNode,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }\n          }), isAllowKickUser && /*#__PURE__*/React.createElement(ModalDelete, {\n            handleKickMember: _this2.handleKickMember,\n            itemToDelete: user,\n            title: \"Kick Member\",\n            textButtonDelete: \"Kick\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }\n          }));\n        }\n      }];\n      var rowSelection = {\n        selectedRowKeys: selectedRowKeys,\n        onChange: this.onSelectChange\n      };\n      var hasSelected = selectedRowKeys.length > 0;\n      var data = (filterKeys ? members.filter(function (mem) {\n        return mem.username.includes(filterKeys) > 0;\n      }) : members).map(function (obj) {\n        return _objectSpread({}, obj, {\n          key: obj._id\n        });\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"detail-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      }, i18n.t('group.groupMember')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"group-button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 9\n        }\n      }, members && members.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Search, {\n        onChange: function onChange(e) {\n          return _this2.onChangeSearch(e);\n        },\n        placeholder: i18n.t('group.searchMember'),\n        style: {\n          width: 350\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper-table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 17\n        }\n      }, isAllowKickUser && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper-remove\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          marginRight: '1rem'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 23\n        }\n      }, \"\".concat(selectedRowKeys.length, \" \").concat(i18n.t('group.selectedMember'))), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          visibility: hasSelected ? 'visible' : 'hidden'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ModalDelete, {\n        handleKickMember: this.handleKickMember,\n        itemToDelete: members.filter(function (mem) {\n          return selectedRowKeys.includes(mem._id);\n        }),\n        title: \"Kick \".concat(selectedRowKeys.length, \" Members\"),\n        textButtonDelete: \"Kick\",\n        resetSelect: function resetSelect() {\n          return _this2.setState({\n            selectedRowKeys: []\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }\n      })))), /*#__PURE__*/React.createElement(_Table, {\n        className: \"common-table\",\n        rowSelection: isAllowKickUser ? rowSelection : null,\n        columns: columns,\n        dataSource: data,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 17\n        }\n      }))) : /*#__PURE__*/React.createElement(\"p\", {\n        className: \"no-data\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }\n      }, i18n.t('group.noDataMember'))));\n    }\n  }]);\n\n  return MemberNode;\n}(React.PureComponent), _temp)) || _class) || _class);\nexport default withTranslation()(MemberNode);","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/dashboard/groupDetail2/components/ListMemberNode.jsx"],"names":["React","withTranslation","ModalDelete","client","M_KICK_MEMBER_IN_NODE","newNotification","returnError","ModalAssignRole","ModalEditUserInNode","observer","inject","Search","MemberNode","stores","state","selectedRowKeys","filterKeys","onSelectChange","setState","onChangeSearch","e","persist","value","target","handleKickMember","userIds","props","node","queryNode","i18n","query","fetchPolicy","variables","nodeId","_id","then","t","container","catch","error","errorMessage","message","members","isAllowEditUserInNode","isAllowAssignRole","isAllowKickUser","columns","title","dataIndex","render","user","firstname","lastname","profiles","find","profile","role","name","key","_","rowSelection","onChange","hasSelected","length","data","filter","mem","username","includes","map","obj","width","marginBottom","marginRight","visibility","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Input, Table } from 'antd'\nimport { withTranslation } from 'react-i18next'\n\nimport ModalDelete from '../../components/ModalDelete'\nimport client, { M_KICK_MEMBER_IN_NODE } from '@graphql'\nimport { newNotification, returnError } from '@utils'\nimport ModalAssignRole from './ModalEditRole/ModalAssignRole'\nimport ModalEditUserInNode from './ModalEditUserInNode/ModalEditUserInNode'\nimport { observer, inject } from 'mobx-react'\n\nconst { Search } = Input\n\n@inject(({ stores }) => stores)\n@observer\nclass MemberNode extends React.PureComponent {\n  state = {\n    selectedRowKeys: [],\n    filterKeys: ''\n  }\n\n  onSelectChange = selectedRowKeys => {\n    this.setState({ selectedRowKeys })\n  }\n\n  onChangeSearch = e => {\n    e.persist()\n    const {\n      target: { value }\n    } = e\n\n    this.setState({ filterKeys: value })\n  }\n\n  handleKickMember = userIds => {\n    const { node, queryNode, i18n } = this.props\n    client\n      .query({\n        query: M_KICK_MEMBER_IN_NODE,\n        fetchPolicy: 'no-cache',\n        variables: {\n          nodeId: node._id,\n          userIds\n        }\n      })\n      .then(() => {\n        queryNode(node._id)\n        newNotification(i18n.t('group.removeUserFromNode'), 'success', { container: 'top-right' })\n      })\n      .catch(error =>\n        returnError(\n          'Error: ',\n          {\n            error: 'Error occured: ',\n            errorMessage: error.message\n          },\n          { container: 'top-center' }\n        )\n      )\n  }\n\n  render() {\n    const {\n      state: { selectedRowKeys, filterKeys },\n      props: {\n        members,\n        i18n,\n        node,\n        queryNode,\n        isAllowEditUserInNode,\n        isAllowAssignRole,\n        isAllowKickUser\n      }\n    } = this\n\n    const columns = [\n      {\n        title: i18n.t('user.username'),\n        dataIndex: 'username'\n      },\n      {\n        title: i18n.t('common.name'),\n        render: user => `${user.firstname} ${user.lastname}`\n      },\n      {\n        title: 'Email',\n        dataIndex: 'email'\n      },\n      {\n        title: i18n.t('role.role'),\n        render: user => user?.profiles?.find(profile => profile?.node?._id === node._id)?.role?.name\n      },\n      {\n        title: '',\n        key: 'x',\n        render: (_, user) => (\n          <span className='columnBtnHolder'>\n            {isAllowEditUserInNode && (\n              <ModalEditUserInNode\n                user={user}\n                node={node}\n                queryNode={queryNode}\n              />\n            )}\n\n            {isAllowAssignRole && (\n              <ModalAssignRole\n                labelButton={i18n.t('group.assignRole')}\n                user={user}\n                node={node}\n                queryNode={queryNode}\n              />\n            )}\n\n            {isAllowKickUser && (\n              <ModalDelete\n                handleKickMember={this.handleKickMember}\n                itemToDelete={user}\n                title='Kick Member'\n                textButtonDelete='Kick'\n              />\n            )}\n          </span>\n        )\n      }\n    ]\n\n    const rowSelection = {\n      selectedRowKeys,\n      onChange: this.onSelectChange\n    }\n\n    const hasSelected = selectedRowKeys.length > 0\n\n    const data = (filterKeys ? members.filter(mem => mem.username.includes(filterKeys) > 0) : members)\n      .map(obj => ({\n        ...obj,\n        key: obj._id\n      }))\n\n    return (\n      <div className='detail-group-item'>\n        <div className='header'>\n          <h3>{i18n.t('group.groupMember')}</h3>\n          <div className='group-button'\n          >\n          </div>\n        </div>\n        <div className='content'>\n          {members && members.length > 0 ? (\n            <>\n              <Search onChange={e => this.onChangeSearch(e)} placeholder={i18n.t('group.searchMember')} style={{ width: 350 }} />\n\n              <div className='wrapper-table'>\n\n                <div style={{ marginBottom: 16 }}>\n                  {isAllowKickUser && (\n                    <div className='wrapper-remove'>\n                      <span style={{ marginRight: '1rem' }}>{`${selectedRowKeys.length} ${i18n.t('group.selectedMember')}`}</span>\n                      <span style={{ visibility: hasSelected ? 'visible' : 'hidden' }}>\n                        <ModalDelete\n                          handleKickMember={this.handleKickMember}\n                          itemToDelete={members.filter(mem => selectedRowKeys.includes(mem._id))}\n                          title={`Kick ${selectedRowKeys.length} Members`}\n                          textButtonDelete='Kick'\n                          resetSelect={() => this.setState({ selectedRowKeys: [] })}\n                        />\n                      </span>\n                    </div>\n                  )}\n                </div>\n\n                <Table\n                  className='common-table'\n                  rowSelection={isAllowKickUser ? rowSelection : null}\n                  columns={columns}\n                  dataSource={data}\n                />\n              </div>\n            </>\n          ) : (\n              <p className='no-data'>{i18n.t('group.noDataMember')}</p>\n            )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withTranslation()(MemberNode)\n"]},"metadata":{},"sourceType":"module"}