{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/avatar/style\";\nimport _Avatar from \"antd/es/avatar\";\nimport _classCallCheck from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/sang/js/cfr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/sang/js/cfr-frontend/src/pages/conference2/modals/ModalContentResource.jsx\";\n\nimport React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport './ModalContentResource.less';\nimport PlusGreen from \"@misc/images/ngocly/plus-green.svg\";\nimport PDFIcon from \"@misc/images/ngocly/pdf-icon.svg\";\nimport client, { M_STOP_SHARE_FILE } from '@graphql';\nimport { returnNotification } from '@utils';\nimport { _SLIDE } from '@constants';\n\nvar formatBytes = function formatBytes(bytes) {\n  var decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  if (bytes === 0) return '0 Bytes';\n  var k = 1024;\n  var dm = decimals < 0 ? 0 : decimals;\n  var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  var i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n};\n\nvar ModalContentResource = (_dec = inject(function (_ref) {\n  var stores = _ref.stores;\n  return stores;\n}), _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ModalContentResource, _React$PureComponent);\n\n  var _super = _createSuper(ModalContentResource);\n\n  function ModalContentResource(props) {\n    var _this;\n\n    _classCallCheck(this, ModalContentResource);\n\n    _this = _super.call(this, props);\n\n    _this._openModal = function () {\n      return _this.setState({\n        visible: true\n      });\n    };\n\n    _this._closeModal = function () {\n      return _this.setState({\n        visible: false\n      });\n    };\n\n    _this._showButton = function (key) {\n      return _this.setState({\n        showButton: key\n      });\n    };\n\n    _this._hideButton = function () {\n      return _this.setState({\n        showButton: ''\n      });\n    };\n\n    _this._handleClickPlus = function () {\n      _this._closeModal();\n\n      _this.props.conferenceState.uploadFile();\n    };\n\n    _this._handleOpenFile = function (file) {\n      var _this$props$conferenc = _this.props.conferenceState,\n          setState = _this$props$conferenc.setState,\n          positionSlide = _this$props$conferenc.positionSlide;\n      setState({\n        fileOpen: file,\n        activeDraw: false,\n        positionSlide: file && file.externalData ? JSON.parse(file.externalData)[_SLIDE._externalData.CURRENT_PAGE] : positionSlide\n      });\n\n      _this._closeModal();\n    };\n\n    _this._mutateDeleteFile = function (_id) {\n      return client.mutate({\n        mutation: M_STOP_SHARE_FILE,\n        variables: {\n          _id: _id\n        }\n      }).then(function (_ref2) {\n        var stopShareFile = _ref2.data.stopShareFile;\n\n        if (stopShareFile) {\n          _this.props.sendDraw([]);\n\n          _this.props.conferenceState.setState({\n            fileOpen: null,\n            activeDraw: false\n          });\n\n          returnNotification('Đã huỷ chia sẻ file thành công');\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this._renderItem = function (item, position) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: item._id,\n        onMouseEnter: function onMouseEnter() {\n          return _this._showButton(item._id);\n        },\n        onMouseLeave: _this._hideButton,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 7\n        }\n      }, item.isImage && /*#__PURE__*/React.createElement(_Avatar, {\n        src: item.resources[0],\n        shape: \"square\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 26\n        }\n      }), item.isSlide && /*#__PURE__*/React.createElement(_Avatar, {\n        src: item.resources[0],\n        shape: \"square\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 26\n        }\n      }), item.isPDF && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pdf-container\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: PDFIcon,\n        alt: \"icon\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"file-name\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }\n      }, item.filename), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"file-size\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }\n      }, formatBytes(item.size))), _this.state.showButton === item._id && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"group-btn\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this._handleOpenFile(item);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }\n      }, \"View\")), position === 'left' && /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this._mutateDeleteFile(item._id);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }\n      }, \"Delete\"))));\n    };\n\n    _this.state = {\n      visible: false,\n      showButton: ''\n    };\n    return _this;\n  }\n\n  _createClass(ModalContentResource, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.openModal(this._openModal);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props$conferenc2 = this.props.conferenceState,\n          myResources = _this$props$conferenc2.myResources,\n          otherResources = _this$props$conferenc2.otherResources;\n      return /*#__PURE__*/React.createElement(_Modal, {\n        className: \"modal-content-resources\",\n        visible: this.state.visible,\n        onCancel: this._closeModal,\n        onOk: this._closeModal,\n        closeIcon: /*#__PURE__*/React.createElement(React.Fragment, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 20\n          }\n        }),\n        footer: null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"body-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }\n      }, \"Your uploads\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this._handleClickPlus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: PlusGreen,\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }\n      }, myResources && myResources.map(function (resource) {\n        return _this2._renderItem(resource, 'left');\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"body-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }\n      }, \"Shared with you\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }\n      }, otherResources && otherResources.map(function (resource) {\n        return _this2._renderItem(resource, 'right');\n      }))));\n    }\n  }]);\n\n  return ModalContentResource;\n}(React.PureComponent), _temp)) || _class) || _class);\nexport default ModalContentResource;","map":{"version":3,"sources":["/home/sang/js/cfr-frontend/src/pages/conference2/modals/ModalContentResource.jsx"],"names":["React","inject","observer","client","M_STOP_SHARE_FILE","returnNotification","_SLIDE","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","ModalContentResource","stores","props","_openModal","setState","visible","_closeModal","_showButton","key","showButton","_hideButton","_handleClickPlus","conferenceState","uploadFile","_handleOpenFile","file","positionSlide","fileOpen","activeDraw","externalData","JSON","parse","_externalData","CURRENT_PAGE","_mutateDeleteFile","_id","mutate","mutation","variables","then","stopShareFile","data","sendDraw","catch","err","console","_renderItem","item","position","isImage","resources","isSlide","isPDF","PDFIcon","filename","size","state","openModal","myResources","otherResources","PlusGreen","map","resource","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Modal, Avatar } from 'antd'\nimport { inject, observer } from 'mobx-react'\n\nimport './ModalContentResource.less'\nimport PlusGreen from '@misc/images/ngocly/plus-green.svg'\nimport PDFIcon from '@misc/images/ngocly/pdf-icon.svg'\nimport client, { M_STOP_SHARE_FILE } from '@graphql'\nimport { returnNotification } from '@utils'\nimport { _SLIDE } from '@constants'\n\nconst formatBytes = (bytes, decimals = 2) => {\n  if (bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i]\n}\n\n@inject(({ stores }) => stores)\n@observer\nclass ModalContentResource extends React.PureComponent {\n  constructor(props) {\n    super(props)\n    this.state = {\n      visible: false,\n      showButton: ''\n    }\n  }\n\n  componentDidMount() {\n    this.props.openModal(this._openModal)\n  }\n\n  _openModal = () => this.setState({ visible: true })\n  _closeModal = () => this.setState({ visible: false })\n\n  _showButton = key => this.setState({ showButton: key })\n  _hideButton = () => this.setState({ showButton: '' })\n\n  _handleClickPlus = () => {\n    this._closeModal()\n    this.props.conferenceState.uploadFile()\n  }\n\n  _handleOpenFile = file => {\n    const { setState, positionSlide } = this.props.conferenceState\n    setState({\n      fileOpen: file,\n      activeDraw: false,\n      positionSlide: file && file.externalData ? JSON.parse(file.externalData)[_SLIDE._externalData.CURRENT_PAGE] : positionSlide\n    })\n    this._closeModal()\n  }\n\n  _mutateDeleteFile = _id =>\n    client\n      .mutate({\n        mutation: M_STOP_SHARE_FILE,\n        variables: {\n          _id\n        }\n      })\n      .then(({ data: { stopShareFile } }) => {\n        if (stopShareFile) {\n          this.props.sendDraw([])\n          this.props.conferenceState.setState({ fileOpen: null, activeDraw: false })\n          returnNotification('Đã huỷ chia sẻ file thành công')\n        }\n      })\n      .catch(err => {\n        console.log(err)\n      })\n\n  _renderItem = (item, position) => {\n    return (\n      <div key={item._id} onMouseEnter={() => this._showButton(item._id)} onMouseLeave={this._hideButton}>\n        {item.isImage && <Avatar src={item.resources[0]} shape='square' />}\n        {item.isSlide && <Avatar src={item.resources[0]} shape='square' />}\n        {item.isPDF && (\n          <div className='pdf-container'>\n            <img src={PDFIcon} alt='icon' />\n          </div>\n        )}\n        <div>\n          <div className='file-name'>{item.filename}</div>\n          <div className='file-size'>{formatBytes(item.size)}</div>\n        </div>\n        {this.state.showButton === item._id && (\n          <div className='group-btn'>\n            <button onClick={() => this._handleOpenFile(item)}>\n              <div>View</div>\n            </button>\n            {position === 'left' && (\n              <button onClick={() => this._mutateDeleteFile(item._id)}>\n                <div>Delete</div>\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  render() {\n    const {\n      conferenceState: { myResources, otherResources }\n    } = this.props\n    return (\n      <Modal\n        className='modal-content-resources'\n        visible={this.state.visible}\n        onCancel={this._closeModal}\n        onOk={this._closeModal}\n        closeIcon={<React.Fragment />}\n        footer={null}\n      >\n        <div className='body-left'>\n          <span>Your uploads</span>\n          <button onClick={this._handleClickPlus}>\n            <img src={PlusGreen} alt='icon' />\n          </button>\n          <div className='list-container'>\n            {myResources &&\n              myResources.map(resource => {\n                return this._renderItem(resource, 'left')\n              })}\n          </div>\n        </div>\n        <div className='body-right'>\n          <span>Shared with you</span>\n          <div className='list-container'>\n            {otherResources &&\n              otherResources.map(resource => {\n                return this._renderItem(resource, 'right')\n              })}\n          </div>\n        </div>\n      </Modal>\n    )\n  }\n}\n\nexport default ModalContentResource\n"]},"metadata":{},"sourceType":"module"}